var tome72Eaccbe=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function $(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function k(t,e,n){t.classList[n?"add":"remove"](e)}let b;function x(t){b=t}const w=[],T=[],_=[],C=[],L=Promise.resolve();let R=!1;function F(t){_.push(t)}function B(t){C.push(t)}const E=new Set;let S=0;function A(){const t=b;do{for(;S<w.length;){const t=w[S];S++,x(t),H(t.$$)}for(x(null),w.length=0,S=0;T.length;)T.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];E.has(e)||(E.add(e),e())}_.length=0}while(w.length);for(;C.length;)C.pop()();R=!1,E.clear(),x(t)}function H(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}const M=new Set;function W(t,e){t&&t.i&&(M.delete(t),t.i(e))}function D(t,e,n,o){if(t&&t.o){if(M.has(t))return;M.add(t),undefined.c.push((()=>{M.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function z(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function O(t){t&&t.c()}function j(t,n,a,i){const{fragment:c,on_mount:r,on_destroy:u,after_update:l}=t.$$;c&&c.m(n,a),i||F((()=>{const n=r.map(e).filter(s);u?u.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(F)}function I(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(w.push(t),R||(R=!0,L.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,s,a,i,c,r,l,f=[-1]){const d=b;x(e);const m=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||d.$$.root};l&&l(m.root);let p=!1;if(m.ctx=a?a(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&N(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!i&&i(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();s.intro&&W(e.$$.fragment),j(e,s.target,s.anchor,s.customElement),A()}x(d)}class P{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q(e){let n,o,s,a;return{c(){n=f("button"),o=d(e[2]),h(n,"class","svelte-19loasr"),k(n,"sorted",e[0].field===e[1]),k(n,"reversed",e[0].dir<0)},m(t,i){r(t,n,i),c(n,o),s||(a=p(n,"click",e[3]),s=!0)},p(t,[e]){4&e&&v(o,t[2]),3&e&&k(n,"sorted",t[0].field===t[1]),1&e&&k(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&u(n),s=!1,a()}}}function J(t,e,n){let{method:o,field:s,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,o=t.method),"field"in t&&n(1,s=t.field),"text"in t&&n(2,a=t.text)},[o,s,a,function(){o.field!==s?(n(0,o.field=s,o),n(0,o.dir=1,o)):n(0,o.dir*=-1,o)}]}class Z extends P{constructor(t){super(),K(this,t,J,q,a,{method:0,field:1,text:2})}}const G=location.pathname.match(/([^/.]*)(\.html)?$/),Q=G[1]&&"index"!==G[1]?G[1]:"sword";function U(e){let n,o,s,a,i,l,d,p;return{c(){n=f("ul"),o=f("li"),o.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',s=m(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=m(),l=f("li"),l.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=m(),p=f("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',h(o,"class","svelte-116mxxw"),k(o,"active","sword"===Q),h(a,"class","svelte-116mxxw"),k(a,"active","bow"===Q),h(l,"class","svelte-116mxxw"),k(l,"active","wand"===Q),h(p,"class","svelte-116mxxw"),k(p,"active","tome"===Q),h(n,"class","svelte-116mxxw")},m(t,e){r(t,n,e),c(n,o),c(n,s),c(n,a),c(n,i),c(n,l),c(n,d),c(n,p)},p:t,i:t,o:t,d(t){t&&u(n)}}}class V extends P{constructor(t){super(),K(this,t,null,U,a,{})}}const X=[];const Y="zoldout-damage-calculator",tt=new Map;function et(e,n){if(tt.has(e))return tt.get(e);const o=function(e,n=t){let o;const s=new Set;function i(t){if(a(e,t)&&(e=t,o)){const t=!X.length;for(const t of s)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,c=t){const r=[a,c];return s.add(r),1===s.size&&(o=n(i)||t),a(e),()=>{s.delete(r),0===s.size&&(o(),o=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${Y}/${e}`))??n);return o.subscribe((t=>localStorage.setItem(`${Y}/${e}`,JSON.stringify(t)))),tt.set(e,o),o}var nt=[{name:"傷害後攻擊增加（艾莉諾拉）",type:"bow",afterHit:t=>{t.buff.push({atk:5,times:99}),1===t.totalHit&&t.buff.push({bonus:1.21,times:99})}},{name:"使用武器後中毒（格蕾絲）",type:"bow",afterWeapon:t=>{t.hit&&t.poison.push({atk:300,turn:2,bonus:0})}},{name:"著火時額外傷害（艾娜）",type:"bow",afterHit:t=>{t.fire&&(t.damage+=360*(100-t.getFireResist())/100)}},{name:"使用火武器後加速（歌莉雅）",type:"wand",afterWeapon:(t,e)=>{e.fire?.atk&&(t.cost-=2)}},{name:"著火時增傷、減抗（歌莉雅）",type:"wand",beforeWeapon:t=>{let e=t.targetBuff.find((t=>"goriya1"===t.id));e||(e={id:"goriya1",times:99},t.targetBuff.push(e)),e.injuryBonus=t.fire?10:0,e.fireResist=t.fire?-10:0}},{name:"額外傷害（尤里+泳裝伊蓮）",type:"wand",afterWeapon:(t,e)=>{e.water&&(t.damage+=2*(900-t.getDef({atkType:"magic"})))}},{name:"魔攻增加（西比拉）",type:"wand",beforeWeapon:(t,e)=>{e.casting>=6&&t.hit&&t.buff.push({bonus:25,times:1})}},{name:"生命回復（塔尼亞）",type:"tome",afterWeapon:(t,e)=>{t.hit&&"heal"!==e.atkType||(t.damage+=360)}},{name:"加速（塔尼亞）",type:"tome",afterWeapon:(t,e)=>{t.hit&&"heal"!==e.atkType||t.cost--}}];const ot={F:.85,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85};for(const t in ot)ot[`${t}0`]=ot[t]-.1;class st{constructor({atk:t,def:e,int:n,mdef:o,fireResist:s,waterResist:a,poisonResist:i,lightningResist:c,fire:r=!1,freeze:u=!1,poison:l=!1,poisonTurns:f,passive:d}){this.atk=t,this.def=e,this.int=n,this.mdef=o,this.fireResist=s,this.waterResist=a,this.poisonResist=i,this.lightningResist=c,this.poisonTurns=f,this.passive=d,this.damage=0,this.hit=0,this.totalHit=0,this.stance=0,this.totalHit=0,this.buff=[],this.targetBuff=[],this.poison=l?[{atk:0,turn:99}]:[],this.lightning={},this.fire=r,this.freeze=u}getDef(t){return it(this,t)}getFireResist(){return this.fireResist+this.targetBuff.reduce(((t,e)=>t+(e.fireResist||0)),0)}getInjuryBonus(){return(this.targetBuff.reduce(((t,e)=>t+(e.injuryBonus||0)),0)+100)/100}getWaterAtk(t){return ct(this,t)}getFireAtk(t){return ct(this,t)}}function at({weapons:t,passiveIds:e,...n}){const o=nt.filter(((t,n)=>e.includes(n))),s=[],a=new st({...n,passive:o});for(const e of t){const t=lt(a,e);s.push(t)}const i=s.reduce(((t,e)=>t+e.damage),0),c=s.reduce(((t,e)=>t+e.cost),0);return{stages:s,summary:{damage:i,cost:c,cp:i/c}}}function it({def:t,mdef:e,targetBuff:n},{atkType:o}){return"heal"===o?0:"magic"===o?e+n.reduce(((t,e)=>t+(e.mdef||0)),0):t+n.reduce(((t,e)=>t+(e.def||0)),0)}function ct({atk:t,int:e,buff:n},{modType:o,modLv:s,atk:a=0,bonus:i=0}){const c="int"===o?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(s?c*ot[s]:0))*(i+100)/100}function rt({poison:t,poisonTurns:e,poisonResist:n}){let o=0;for(const s of t)s.atk&&(o+=s.atk*Math.min(s.turn,e)/s.turn*(100-n)/100);return o}function ut(t,e,n){t.passive.forEach((o=>o[n]?.(t,e)))}function lt(t,e){const n=rt(t);t.cost=e.casting||e.cost,t.hit=e.hit||(e.atk||e.modLv?1:0),t.damage=0;const o=it(t,e);e.passive?.(t),ut(t,e,"beforeWeapon");for(let n=0;n<t.hit;n++){t.currentHit=n+1,t.totalHit++;let s=ct(t,e);s*=t.buff.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1),e.stance?.use===t.stance&&(s*=((e.stance.bonus||0)+100)/100),t.damage+=Math.max(s-o,1)*t.getInjuryBonus(),t.lightning?.atk&&(t.damage+=t.lightning.atk*(100-t.lightningResist)/100),ut(t,e,"afterHit")}return t.hit&&(t.buff=t.buff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0)),t.targetBuff=t.targetBuff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0))),e.trap&&(t.damage+=Math.max(e.trap.atk-o,1)),!e.fire||e.fire.cond&&!e.fire.cond(t)||(t.damage+=t.getFireAtk(e.fire)*(100-t.getFireResist())/100,e.fire.time&&(t.fire=!0)),!e.water||e.water.cond&&!e.water.cond(t)||(t.damage+=t.getWaterAtk(e.water)*(100-t.waterResist)/100,e.water.time&&(t.freeze=!0)),!e.lightning||e.lightning.cond&&!e.lightning.cond(t)||(t.damage+=e.lightning.atk*(100-t.lightningResist)/100,(!t.lightning?.atk||e.lightning.time>t.lightning.time)&&(t.lightning=e.lightning)),!e.poison||e.poison.cond&&!e.poison.cond(t)||(t.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0}),e.poison.bonus&&(t.poison=t.poison.map((t=>{const n=(t.bonus+100)*(e.poison.bonus+100)/100-100;return{...t,bonus:Math.min(n,200)}})))),e.buff&&t.buff.push(...e.buff),e.targetBuff&&t.targetBuff.push(...e.targetBuff),e.stance?.use===t.stance&&e.stance.buff&&t.buff.push(...e.stance.buff),null!=e.stance?.gain&&(t.stance=e.stance.gain),ut(t,e,"afterWeapon"),t.damage+=rt(t)-n,{damage:t.damage,cost:t.cost}}function ft(t,e,n){const o=t.slice();return o[71]=e[n],o}function dt(t,e,n){const o=t.slice();return o[74]=e[n],o[75]=e,o[76]=n,o}function mt(t,e,n){const o=t.slice();return o[77]=e[n],o}function pt(t,e,n){const o=t.slice();return o[80]=e[n],o[76]=n,o}function ht(t){let e,n=Q===t[80].type&&function(t){let e,n,o,s,a,i,l,g,v=t[80].name+"";return{c(){e=f("label"),n=f("input"),o=m(),s=f("span"),a=d(v),i=m(),h(n,"type","checkbox"),n.__value=t[76],n.value=n.__value,t[59][0].push(n),h(e,"class","cspan svelte-127o0eo")},m(u,f){r(u,e,f),c(e,n),n.checked=~t[9].indexOf(n.__value),c(e,o),c(e,s),c(s,a),c(e,i),l||(g=p(n,"change",t[58]),l=!0)},p(t,e){512&e[0]&&(n.checked=~t[9].indexOf(n.__value))},d(o){o&&u(e),t[59][0].splice(t[59][0].indexOf(n),1),l=!1,g()}}}(t);return{c(){n&&n.c(),e=d("")},m(t,o){n&&n.m(t,o),r(t,e,o)},p(t,e){Q===t[80].type&&n.p(t,e)},d(t){n&&n.d(t),t&&u(e)}}}function gt(t){let e,n,o,s=t[77].name+"";return{c(){e=f("option"),n=d(s),e.__value=o=t[77],e.value=e.__value},m(t,o){r(t,e,o),c(e,n)},p(t,a){1&a[0]&&s!==(s=t[77].name+"")&&v(n,s),1&a[0]&&o!==(o=t[77])&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function vt(t){let e,n,s,a,i,g,y,k,b,x,w,T,_,C,L,R,B,E,S,A,H,M=t[2].stages[t[76]]?.cost+"",W=t[2].stages[t[76]]?.damage.toFixed(0)+"",D=((t[2].stages[t[76]]?.damage||0)/t[2].stages[t[76]]?.cost).toFixed(0)+"",z=t[0],O=[];for(let e=0;e<z.length;e+=1)O[e]=gt(mt(t,z,e));function j(){t[60].call(e,t[75],t[76])}function I(){return t[61](t[76])}function N(){return t[62](t[76])}function K(){return t[63](t[76])}function P(){return t[64](t[76])}return{c(){e=f("select");for(let t=0;t<O.length;t+=1)O[t].c();n=m(),s=f("span"),a=d(M),i=m(),g=f("span"),y=d(W),k=m(),b=f("span"),x=d(D),w=m(),T=f("div"),_=f("button"),_.textContent="↑",C=m(),L=f("button"),L.textContent="↓",R=m(),B=f("button"),B.textContent="⎘",E=m(),S=f("button"),S.textContent="x",h(e,"class","svelte-127o0eo"),void 0===t[74]&&F(j),h(s,"class","svelte-127o0eo"),h(g,"class","svelte-127o0eo"),h(b,"class","svelte-127o0eo"),h(T,"class","operation svelte-127o0eo")},m(o,u){r(o,e,u);for(let t=0;t<O.length;t+=1)O[t].m(e,null);$(e,t[74]),r(o,n,u),r(o,s,u),c(s,a),r(o,i,u),r(o,g,u),c(g,y),r(o,k,u),r(o,b,u),c(b,x),r(o,w,u),r(o,T,u),c(T,_),c(T,C),c(T,L),c(T,R),c(T,B),c(T,E),c(T,S),A||(H=[p(e,"change",j),p(_,"click",I),p(L,"click",N),p(B,"click",K),p(S,"click",P)],A=!0)},p(n,o){if(t=n,1&o[0]){let n;for(z=t[0],n=0;n<z.length;n+=1){const s=mt(t,z,n);O[n]?O[n].p(s,o):(O[n]=gt(s),O[n].c(),O[n].m(e,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=z.length}3&o[0]&&$(e,t[74]),4&o[0]&&M!==(M=t[2].stages[t[76]]?.cost+"")&&v(a,M),4&o[0]&&W!==(W=t[2].stages[t[76]]?.damage.toFixed(0)+"")&&v(y,W),4&o[0]&&D!==(D=((t[2].stages[t[76]]?.damage||0)/t[2].stages[t[76]]?.cost).toFixed(0)+"")&&v(x,D)},d(t){t&&u(e),l(O,t),t&&u(n),t&&u(s),t&&u(i),t&&u(g),t&&u(k),t&&u(b),t&&u(w),t&&u(T),A=!1,o(H)}}}function yt(t){let e,n,o,s,a,i,l,g,y,$,k,b,x,w,T,_=t[71].name+"",C=t[71].cost+"",L=t[71].damage.toFixed(0)+"",R=t[71].cp.toFixed(0)+"";function F(){return t[69](t[71])}return{c(){e=f("span"),n=d(_),o=m(),s=f("span"),a=d(C),i=m(),l=f("span"),g=d(L),y=m(),$=f("span"),k=d(R),b=m(),x=f("button"),x.textContent="x",h(e,"class","svelte-127o0eo"),h(s,"class","svelte-127o0eo"),h(l,"class","svelte-127o0eo"),h($,"class","svelte-127o0eo"),h(x,"class","svelte-127o0eo")},m(t,u){r(t,e,u),c(e,n),r(t,o,u),r(t,s,u),c(s,a),r(t,i,u),r(t,l,u),c(l,g),r(t,y,u),r(t,$,u),c($,k),r(t,b,u),r(t,x,u),w||(T=p(x,"click",F),w=!0)},p(e,o){t=e,8&o[0]&&_!==(_=t[71].name+"")&&v(n,_),8&o[0]&&C!==(C=t[71].cost+"")&&v(a,C),8&o[0]&&L!==(L=t[71].damage.toFixed(0)+"")&&v(g,L),8&o[0]&&R!==(R=t[71].cp.toFixed(0)+"")&&v(k,R)},d(t){t&&u(e),t&&u(o),t&&u(s),t&&u(i),t&&u(l),t&&u(y),t&&u($),t&&u(b),t&&u(x),w=!1,T()}}}function $t(t){let e,n,s,a,i,$,k,b,x,w,_,C,L,R,F,E,S,A,H,M,N,K,P,q,J,G,Q,U,X,Y,tt,et,ot,st,at,it,ct,rt,ut,lt,mt,gt,$t,kt,bt,xt,wt,Tt,_t,Ct,Lt,Rt,Ft,Bt,Et,St,At,Ht,Mt,Wt,Dt,zt,Ot,jt,It,Nt,Kt,Pt,qt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,oe,se,ae,ie,ce,re,ue,le,fe,de,me,pe,he,ge,ve,ye,$e,ke,be,xe,we,Te,_e,Ce,Le,Re,Fe,Be,Ee,Se,Ae,He,Me,We=t[2].summary.cost+"",De=t[2].summary.damage.toFixed(0)+"",ze=t[2].summary.cp.toFixed(0)+"";s=new V({});let Oe=nt,je=[];for(let e=0;e<Oe.length;e+=1)je[e]=ht(pt(t,Oe,e));let Ie=t[1],Ne=[];for(let e=0;e<Ie.length;e+=1)Ne[e]=vt(dt(t,Ie,e));function Ke(e){t[65](e)}let Pe={field:"name",text:"Name"};function qe(e){t[66](e)}void 0!==t[4]&&(Pe.method=t[4]),ve=new Z({props:Pe}),T.push((()=>z(ve,"method",Ke)));let Je={field:"cost",text:"Cost"};function Ze(e){t[67](e)}void 0!==t[4]&&(Je.method=t[4]),ke=new Z({props:Je}),T.push((()=>z(ke,"method",qe)));let Ge={field:"damage",text:"Damage"};function Qe(e){t[68](e)}void 0!==t[4]&&(Ge.method=t[4]),we=new Z({props:Ge}),T.push((()=>z(we,"method",Ze)));let Ue={field:"cp",text:"CP"};void 0!==t[4]&&(Ue.method=t[4]),Ce=new Z({props:Ue}),T.push((()=>z(Ce,"method",Qe)));let Ve=t[3],Xe=[];for(let e=0;e<Ve.length;e+=1)Xe[e]=yt(ft(t,Ve,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=m(),O(s.$$.fragment),a=m(),i=f("div"),$=f("span"),$.textContent="力量",k=m(),b=f("input"),x=m(),w=f("span"),w.textContent="防禦",_=m(),C=f("input"),L=m(),R=f("span"),R.textContent="智力",F=m(),E=f("input"),S=m(),A=f("span"),A.textContent="魔防",H=m(),M=f("input"),N=m(),K=f("span"),K.textContent="火抗",P=m(),q=f("input"),J=m(),G=f("span"),G.textContent="水抗",Q=m(),U=f("input"),X=m(),Y=f("span"),Y.textContent="毒抗",tt=m(),et=f("input"),ot=m(),st=f("span"),st.textContent="雷抗",at=m(),it=f("input"),ct=m(),rt=f("label"),ut=f("input"),lt=m(),mt=f("span"),mt.textContent="敵人凍結",gt=m(),$t=f("label"),kt=f("input"),bt=m(),xt=f("span"),xt.textContent="敵人著火",wt=m(),Tt=f("label"),_t=f("input"),Ct=m(),Lt=f("span"),Lt.textContent="敵人中毒",Rt=m(),Ft=f("label"),Bt=f("input"),Et=m(),St=f("span"),St.textContent="敵人觸電",At=m(),Ht=f("span"),Ht.textContent="中毒發生次數",Mt=m(),Wt=f("input"),Dt=m();for(let t=0;t<je.length;t+=1)je[t].c();zt=m(),Ot=f("h2"),Ot.textContent="Combo",jt=m(),It=f("div"),Nt=f("span"),Nt.textContent="Weapon",Kt=m(),Pt=f("span"),Pt.textContent="Cost",qt=m(),Jt=f("span"),Jt.textContent="Damage",Zt=m(),Gt=f("span"),Gt.textContent="CP",Qt=m(),Ut=f("span"),Vt=m();for(let t=0;t<Ne.length;t+=1)Ne[t].c();Xt=m(),Yt=f("span"),Yt.textContent="Summary",te=m(),ee=f("span"),ne=d(We),oe=m(),se=f("span"),ae=d(De),ie=m(),ce=f("span"),re=d(ze),ue=m(),le=f("button"),le.textContent="Add to compare list",fe=m(),de=f("h2"),de.textContent="Compare",me=m(),pe=f("button"),pe.textContent="Add all weapons",he=m(),ge=f("div"),O(ve.$$.fragment),$e=m(),O(ke.$$.fragment),xe=m(),O(we.$$.fragment),_e=m(),O(Ce.$$.fragment),Re=m(),Fe=f("span"),Be=m();for(let t=0;t<Xe.length;t+=1)Xe[t].c();Ee=m(),Se=f("footer"),Se.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',h(b,"type","number"),h(C,"type","number"),h(E,"type","number"),h(M,"type","number"),h(q,"type","number"),h(U,"type","number"),h(et,"type","number"),h(it,"type","number"),h(ut,"type","checkbox"),h(rt,"class","cspan svelte-127o0eo"),h(kt,"type","checkbox"),h($t,"class","cspan svelte-127o0eo"),h(_t,"type","checkbox"),h(Tt,"class","cspan svelte-127o0eo"),h(Bt,"type","checkbox"),h(Ft,"class","cspan svelte-127o0eo"),h(Wt,"type","number"),h(i,"class","base-info svelte-127o0eo"),h(Nt,"class","chead svelte-127o0eo"),h(Pt,"class","chead svelte-127o0eo"),h(Jt,"class","chead svelte-127o0eo"),h(Gt,"class","chead svelte-127o0eo"),h(Ut,"class","operation svelte-127o0eo"),h(Yt,"class","chead svelte-127o0eo"),h(ee,"class","svelte-127o0eo"),h(se,"class","svelte-127o0eo"),h(ce,"class","svelte-127o0eo"),h(It,"class","combo-table svelte-127o0eo"),h(Fe,"class","svelte-127o0eo"),h(ge,"class","compare-list svelte-127o0eo"),h(Se,"class","svelte-127o0eo")},m(o,u){r(o,e,u),r(o,n,u),j(s,o,u),r(o,a,u),r(o,i,u),c(i,$),c(i,k),c(i,b),y(b,t[18]),c(i,x),c(i,w),c(i,_),c(i,C),y(C,t[17]),c(i,L),c(i,R),c(i,F),c(i,E),y(E,t[16]),c(i,S),c(i,A),c(i,H),c(i,M),y(M,t[15]),c(i,N),c(i,K),c(i,P),c(i,q),y(q,t[8]),c(i,J),c(i,G),c(i,Q),c(i,U),y(U,t[7]),c(i,X),c(i,Y),c(i,tt),c(i,et),y(et,t[6]),c(i,ot),c(i,st),c(i,at),c(i,it),y(it,t[5]),c(i,ct),c(i,rt),c(rt,ut),ut.checked=t[13],c(rt,lt),c(rt,mt),c(i,gt),c(i,$t),c($t,kt),kt.checked=t[14],c($t,bt),c($t,xt),c(i,wt),c(i,Tt),c(Tt,_t),_t.checked=t[12],c(Tt,Ct),c(Tt,Lt),c(i,Rt),c(i,Ft),c(Ft,Bt),Bt.checked=t[11],c(Ft,Et),c(Ft,St),c(i,At),c(i,Ht),c(i,Mt),c(i,Wt),y(Wt,t[10]),c(i,Dt);for(let t=0;t<je.length;t+=1)je[t].m(i,null);r(o,zt,u),r(o,Ot,u),r(o,jt,u),r(o,It,u),c(It,Nt),c(It,Kt),c(It,Pt),c(It,qt),c(It,Jt),c(It,Zt),c(It,Gt),c(It,Qt),c(It,Ut),c(It,Vt);for(let t=0;t<Ne.length;t+=1)Ne[t].m(It,null);c(It,Xt),c(It,Yt),c(It,te),c(It,ee),c(ee,ne),c(It,oe),c(It,se),c(se,ae),c(It,ie),c(It,ce),c(ce,re),r(o,ue,u),r(o,le,u),r(o,fe,u),r(o,de,u),r(o,me,u),r(o,pe,u),r(o,he,u),r(o,ge,u),j(ve,ge,null),c(ge,$e),j(ke,ge,null),c(ge,xe),j(we,ge,null),c(ge,_e),j(Ce,ge,null),c(ge,Re),c(ge,Fe),c(ge,Be);for(let t=0;t<Xe.length;t+=1)Xe[t].m(ge,null);r(o,Ee,u),r(o,Se,u),Ae=!0,He||(Me=[p(b,"input",t[45]),p(C,"input",t[46]),p(E,"input",t[47]),p(M,"input",t[48]),p(q,"input",t[49]),p(U,"input",t[50]),p(et,"input",t[51]),p(it,"input",t[52]),p(ut,"change",t[53]),p(kt,"change",t[54]),p(_t,"change",t[55]),p(Bt,"change",t[56]),p(Wt,"input",t[57]),p(le,"click",t[38]),p(pe,"click",t[40])],He=!0)},p(t,e){if(262144&e[0]&&g(b.value)!==t[18]&&y(b,t[18]),131072&e[0]&&g(C.value)!==t[17]&&y(C,t[17]),65536&e[0]&&g(E.value)!==t[16]&&y(E,t[16]),32768&e[0]&&g(M.value)!==t[15]&&y(M,t[15]),256&e[0]&&g(q.value)!==t[8]&&y(q,t[8]),128&e[0]&&g(U.value)!==t[7]&&y(U,t[7]),64&e[0]&&g(et.value)!==t[6]&&y(et,t[6]),32&e[0]&&g(it.value)!==t[5]&&y(it,t[5]),8192&e[0]&&(ut.checked=t[13]),16384&e[0]&&(kt.checked=t[14]),4096&e[0]&&(_t.checked=t[12]),2048&e[0]&&(Bt.checked=t[11]),1024&e[0]&&g(Wt.value)!==t[10]&&y(Wt,t[10]),512&e[0]){let n;for(Oe=nt,n=0;n<Oe.length;n+=1){const o=pt(t,Oe,n);je[n]?je[n].p(o,e):(je[n]=ht(o),je[n].c(),je[n].m(i,null))}for(;n<je.length;n+=1)je[n].d(1);je.length=Oe.length}if(7&e[0]|112&e[1]){let n;for(Ie=t[1],n=0;n<Ie.length;n+=1){const o=dt(t,Ie,n);Ne[n]?Ne[n].p(o,e):(Ne[n]=vt(o),Ne[n].c(),Ne[n].m(It,Xt))}for(;n<Ne.length;n+=1)Ne[n].d(1);Ne.length=Ie.length}(!Ae||4&e[0])&&We!==(We=t[2].summary.cost+"")&&v(ne,We),(!Ae||4&e[0])&&De!==(De=t[2].summary.damage.toFixed(0)+"")&&v(ae,De),(!Ae||4&e[0])&&ze!==(ze=t[2].summary.cp.toFixed(0)+"")&&v(re,ze);const n={};!ye&&16&e[0]&&(ye=!0,n.method=t[4],B((()=>ye=!1))),ve.$set(n);const o={};!be&&16&e[0]&&(be=!0,o.method=t[4],B((()=>be=!1))),ke.$set(o);const s={};!Te&&16&e[0]&&(Te=!0,s.method=t[4],B((()=>Te=!1))),we.$set(s);const a={};if(!Le&&16&e[0]&&(Le=!0,a.method=t[4],B((()=>Le=!1))),Ce.$set(a),8&e[0]|256&e[1]){let n;for(Ve=t[3],n=0;n<Ve.length;n+=1){const o=ft(t,Ve,n);Xe[n]?Xe[n].p(o,e):(Xe[n]=yt(o),Xe[n].c(),Xe[n].m(ge,null))}for(;n<Xe.length;n+=1)Xe[n].d(1);Xe.length=Ve.length}},i(t){Ae||(W(s.$$.fragment,t),W(ve.$$.fragment,t),W(ke.$$.fragment,t),W(we.$$.fragment,t),W(Ce.$$.fragment,t),Ae=!0)},o(t){D(s.$$.fragment,t),D(ve.$$.fragment,t),D(ke.$$.fragment,t),D(we.$$.fragment,t),D(Ce.$$.fragment,t),Ae=!1},d(t){t&&u(e),t&&u(n),I(s,t),t&&u(a),t&&u(i),l(je,t),t&&u(zt),t&&u(Ot),t&&u(jt),t&&u(It),l(Ne,t),t&&u(ue),t&&u(le),t&&u(fe),t&&u(de),t&&u(me),t&&u(pe),t&&u(he),t&&u(ge),I(ve),I(ke),I(we),I(Ce),l(Xe,t),t&&u(Ee),t&&u(Se),He=!1,o(Me)}}}function kt(t,e,n){let o,s,a,c,r,u,l,f,d,m,p,h,v,y,$,k,{weapons:b,storeKey:x}=e;const w=Object.fromEntries(b.map((t=>[t.name,t]))),T=et(`${x}/atk`,700);i(t,T,(t=>n(18,k=t)));const _=et("comm/def",200);i(t,_,(t=>n(17,$=t)));const C=et(`${x}/int`,700);i(t,C,(t=>n(16,y=t)));const L=et("comm/mdef",200);i(t,L,(t=>n(15,v=t)));const R=et("comm/fireResist",0);i(t,R,(t=>n(8,u=t)));const F=et("comm/waterResist",0);i(t,F,(t=>n(7,r=t)));const B=et("comm/poisonResist",0);i(t,B,(t=>n(6,c=t)));const E=et("comm/lightningResist",0);i(t,E,(t=>n(5,a=t)));const S=et("comm/fire",!1);i(t,S,(t=>n(14,h=t)));const A=et("comm/freeze",!1);i(t,A,(t=>n(13,p=t)));const H=et("comm/poison",!1);i(t,H,(t=>n(12,m=t)));const M=et("comm/lightning",!1);i(t,M,(t=>n(11,d=t)));const W=et(`${x}/poisonTurns`,99);i(t,W,(t=>n(10,f=t)));const D=et(`${x}/passiveIds`,[]);i(t,D,(t=>n(9,l=t)));const z=et(`${x}/compareList`,[]);i(t,z,(t=>n(44,o=t)));const O=et(`${x}/sortMethod`,{field:null,dir:1});i(t,O,(t=>n(4,s=t)));let j=[b[0]],I={stages:[],summary:{damage:0,cost:0,cp:0}},N=[],K=[],P={};function q(t){j.splice(t,0,j[t]),n(1,j)}function J(t){j.length<=1||(j.splice(t,1),n(1,j))}function Z(t,e){const o=j[t];j.splice(t,1),j.splice(t+e,0,o),n(1,j)}function G(t){o.splice(t,1),z.set(o)}const Q=[[]];return t.$$set=t=>{"weapons"in t&&n(0,b=t.weapons),"storeKey"in t&&n(41,x=t.storeKey)},t.$$.update=()=>{524256&t.$$.dirty[0]&&n(43,P={atk:k,def:$,int:y,mdef:v,fire:h,freeze:p,poison:m,lightning:d,poisonTurns:f,passiveIds:l,fireResist:u,waterResist:r,poisonResist:c,lightningResist:a}),2&t.$$.dirty[0]|4096&t.$$.dirty[1]&&n(2,I=at({...P,weapons:j})),12288&t.$$.dirty[1]&&n(42,N=o.map(((t,e)=>{const n=t.map((t=>w[t])),o=at({...P,weapons:n});return{name:t.join("+"),cost:o.summary.cost,damage:o.summary.damage,cp:o.summary.cp,index:e}}))),24&t.$$.dirty[0]|2048&t.$$.dirty[1]&&(n(3,K=N.slice()),s.field&&K.sort(((t,e)=>(t[s.field]<e[s.field]?-1:t[s.field]>e[s.field]?1:0)*s.dir)))},[b,j,I,K,s,a,c,r,u,l,f,d,m,p,h,v,y,$,k,T,_,C,L,R,F,B,E,S,A,H,M,W,D,z,O,q,J,Z,function(){o.push(j.map((t=>t.name))),z.set(o)},G,function(){const t=new Set(o.map((t=>t[0])));for(const e of b)t.has(e.name)||o.push([e.name]);z.set(o)},x,N,P,o,function(){k=g(this.value),T.set(k)},function(){$=g(this.value),_.set($)},function(){y=g(this.value),C.set(y)},function(){v=g(this.value),L.set(v)},function(){u=g(this.value),R.set(u)},function(){r=g(this.value),F.set(r)},function(){c=g(this.value),B.set(c)},function(){a=g(this.value),E.set(a)},function(){p=this.checked,A.set(p)},function(){h=this.checked,S.set(h)},function(){m=this.checked,H.set(m)},function(){d=this.checked,M.set(d)},function(){f=g(this.value),W.set(f)},function(){l=function(t,e,n){const o=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&o.add(t[e].__value);return n||o.delete(e),Array.from(o)}(Q[0],this.__value,this.checked),D.set(l)},Q,function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,j),n(0,b)},t=>Z(t,-1),t=>Z(t,1),t=>q(t),t=>J(t),function(t){s=t,O.set(s)},function(t){s=t,O.set(s)},function(t){s=t,O.set(s)},function(t){s=t,O.set(s)},t=>G(t.index)]}const bt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int"},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str"},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]}],xt=bt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends P{constructor(t){super(),K(this,t,kt,$t,a,{weapons:0,storeKey:41},null,[-1,-1,-1])}},b:xt,w:bt}}();
//# sourceMappingURL=tome-72eaccbe.js.map
