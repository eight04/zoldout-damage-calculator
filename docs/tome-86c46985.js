var tome86C46985=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function y(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function x(t,e,n){t.classList[n?"add":"remove"](e)}let b;function k(t){b=t}const z=[],T=[],w=[],C=[],_=Promise.resolve();let L=!1;function q(t){w.push(t)}function F(t){C.push(t)}const R=new Set;let A=0;function E(){const t=b;do{for(;A<z.length;){const t=z[A];A++,k(t),S(t.$$)}for(k(null),z.length=0,A=0;T.length;)T.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];R.has(e)||(R.add(e),e())}w.length=0}while(z.length);for(;C.length;)C.pop()();L=!1,R.clear(),k(t)}function S(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const B=new Set;function M(t,e){t&&t.i&&(B.delete(t),t.i(e))}function W(t,e,n,s){if(t&&t.o){if(B.has(t))return;B.add(t),undefined.c.push((()=>{B.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function D(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function O(t){t&&t.c()}function N(t,n,a,i){const{fragment:r,on_mount:c,on_destroy:u,after_update:l}=t.$$;r&&r.m(n,a),i||q((()=>{const n=c.map(e).filter(o);u?u.push(...n):s(n),t.$$.on_mount=[]})),l.forEach(q)}function j(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(z.push(t),L||(L=!0,_.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,o,a,i,r,c,l,f=[-1]){const d=b;k(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};l&&l(m.root);let p=!1;if(m.ctx=a?a(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return m.ctx&&r(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),p&&H(e,t)),n})):[],m.update(),p=!0,s(m.before_update),m.fragment=!!i&&i(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();o.intro&&M(e.$$.fragment),N(e,o.target,o.anchor,o.customElement),E()}k(d)}class I{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function P(e){let n,s,o,a;return{c(){n=f("button"),s=d(e[2]),g(n,"class","svelte-19loasr"),x(n,"sorted",e[0].field===e[1]),x(n,"reversed",e[0].dir<0)},m(t,i){c(t,n,i),r(n,s),o||(a=p(n,"click",e[3]),o=!0)},p(t,[e]){4&e&&$(s,t[2]),3&e&&x(n,"sorted",t[0].field===t[1]),1&e&&x(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&u(n),o=!1,a()}}}function J(t,e,n){let{method:s,field:o,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,s=t.method),"field"in t&&n(1,o=t.field),"text"in t&&n(2,a=t.text)},[s,o,a,function(){s.field!==o?(n(0,s.field=o,s),n(0,s.dir=1,s)):n(0,s.dir*=-1,s)}]}class Z extends I{constructor(t){super(),K(this,t,J,P,a,{method:0,field:1,text:2})}}function G(e){let n,s,o,a,i,l,d,p;return{c(){n=f("ul"),s=f("li"),s.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',o=m(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=m(),l=f("li"),l.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=m(),p=f("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',g(s,"class","svelte-116mxxw"),x(s,"active","sword"===e[0]),g(a,"class","svelte-116mxxw"),x(a,"active","bow"===e[0]),g(l,"class","svelte-116mxxw"),x(l,"active","wand"===e[0]),g(p,"class","svelte-116mxxw"),x(p,"active","tome"===e[0]),g(n,"class","svelte-116mxxw")},m(t,e){c(t,n,e),r(n,s),r(n,o),r(n,a),r(n,i),r(n,l),r(n,d),r(n,p)},p:t,i:t,o:t,d(t){t&&u(n)}}}function Q(t){const e=location.pathname.match(/([^/.]*)(\.html)?$/);return[e[1]&&"index"!==e[1]?e[1]:"sword"]}class U extends I{constructor(t){super(),K(this,t,Q,G,a,{})}}const V=[];const X="zoldout-damage-calculator",Y=new Map;function tt(e,n){if(Y.has(e))return Y.get(e);const s=function(e,n=t){let s;const o=new Set;function i(t){if(a(e,t)&&(e=t,s)){const t=!V.length;for(const t of o)t[1](),V.push(t,e);if(t){for(let t=0;t<V.length;t+=2)V[t][0](V[t+1]);V.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,r=t){const c=[a,r];return o.add(c),1===o.size&&(s=n(i)||t),a(e),()=>{o.delete(c),0===o.size&&(s(),s=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${X}/${e}`))??n);return s.subscribe((t=>localStorage.setItem(`${X}/${e}`,JSON.stringify(t)))),Y.set(e,s),s}const et={F:.85,E0:1,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85};function nt({atk:t,def:e,int:n,mdef:s,weapons:o,poisonTurns:a=99,fireResist:i,waterResist:r,poisonResist:c,lightningResist:u,poisonAfterWeapon:l,speedAfterFireWeapon:f}){const d=[];let m={atk:t,def:e,int:n,mdef:s,stance:0,buff:[],targetBuff:[],poison:[],lightning:{},poisonTurns:a,poisonAfterWeapon:l,speedAfterFireWeapon:f,fireResist:i,waterResist:r,poisonResist:c,lightningResist:u};for(const t of o){const e=ot(m,t);m=e.state,d.push(e)}const p=d.reduce(((t,e)=>t+e.damage),0),g=d.reduce(((t,e)=>t+e.cost),0);return{stages:d,summary:{damage:p,cost:g,cp:p/g}}}function st({poison:t,poisonTurns:e,poisonResist:n}){let s=0;for(const o of t)s+=o.atk*Math.min(o.turn,e)/o.turn*(100-n)/100;return s}function ot(t,e){const n={...t,buff:[],targetBuff:[],poison:[],cost:e.casting||e.cost},s=e.hit||(e.atk||e.modLv?1:0);let o=0;const a=function({def:t,mdef:e,targetBuff:n},{atkType:s}){return"heal"===s?0:"magic"===s?e+n.reduce(((t,e)=>t+(e.mdef||0)),0):t+n.reduce(((t,e)=>t+(e.def||0)),0)}(t,e);if(s){let n=function({atk:t,int:e,buff:n},{modType:s,modLv:o,atk:a=0,bonus:i=0}){const r="int"===s?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(o?r*et[o]:0))*(i+100)/100*n.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1)}(t,e);e.stance?.use===t.stance&&(n*=((e.stance.bonus||0)+100)/100),o=Math.max(n-a,1)*s}if(s){for(const e of t.buff)e.times>1&&n.buff.push({...e,times:e.times-1});for(const e of t.targetBuff)e.times>1&&n.targetBuff.push({...e,times:e.times-1})}else n.buff.push(...t.buff),n.targetBuff.push(...t.targetBuff);if(e.trap&&(o+=Math.max(e.trap.atk-a,1)),e.fire?.atk&&(o+=e.fire.atk*(100-t.fireResist)/100,t.speedAfterFireWeapon&&(n.cost-=2)),e.water?.atk&&(o+=e.water.atk*(100-t.waterResist)/100),s&&t.lightning?.atk&&(o+=t.lightning.atk*s*(100-t.lightningResist)/100),e.lightning?.atk&&(o+=e.lightning.atk*(100-t.lightningResist)/100,(!t.lightning?.atk||e.lightning.time>t.lightning.time)&&(n.lightning=e.lightning)),n.poison.push(...t.poison),e.poison?.atk&&n.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0}),e.poison?.bonus)for(const t of n.poison)t.bonus=(t.bonus+100)*(e.poison.bonus+100)/100-100;return s&&t.poisonAfterWeapon&&(o+=300*Math.min(2,t.poisonTurns)/2,n.poison.push({atk:300,turn:2,bonus:0})),o+=st(n)-st(t),e.buff&&n.buff.push(...e.buff),e.targetBuff&&n.targetBuff.push(...e.targetBuff),e?.stance?.use===t.stance&&e.stance.buff&&n.buff.push(...e.stance.buff),null!=e?.stance?.gain&&(n.stance=e.stance.gain),{damage:o,state:n,cost:n.cost}}function at(t,e,n){const s=t.slice();return s[60]=e[n],s}function it(t,e,n){const s=t.slice();return s[63]=e[n],s[64]=e,s[65]=n,s}function rt(t,e,n){const s=t.slice();return s[66]=e[n],s}function ct(t){let e,n,s,o=t[66].name+"";return{c(){e=f("option"),n=d(o),e.__value=s=t[66],e.value=e.__value},m(t,s){c(t,e,s),r(e,n)},p(t,a){1&a[0]&&o!==(o=t[66].name+"")&&$(n,o),1&a[0]&&s!==(s=t[66])&&(e.__value=s,e.value=e.__value)},d(t){t&&u(e)}}}function ut(t){let e,n,o,a,i,h,v,x,b,k,z,T,w,C,_,L,F,R,A,E,S,B=t[2].stages[t[65]]?.cost+"",M=t[2].stages[t[65]]?.damage.toFixed(0)+"",W=((t[2].stages[t[65]]?.damage||0)/t[2].stages[t[65]]?.cost).toFixed(0)+"",D=t[0],O=[];for(let e=0;e<D.length;e+=1)O[e]=ct(rt(t,D,e));function N(){t[49].call(e,t[64],t[65])}function j(){return t[50](t[65])}function H(){return t[51](t[65])}function K(){return t[52](t[65])}function I(){return t[53](t[65])}return{c(){e=f("select");for(let t=0;t<O.length;t+=1)O[t].c();n=m(),o=f("span"),a=d(B),i=m(),h=f("span"),v=d(M),x=m(),b=f("span"),k=d(W),z=m(),T=f("div"),w=f("button"),w.textContent="↑",C=m(),_=f("button"),_.textContent="↓",L=m(),F=f("button"),F.textContent="⎘",R=m(),A=f("button"),A.textContent="x",g(e,"class","svelte-1qfrzrz"),void 0===t[63]&&q(N),g(o,"class","svelte-1qfrzrz"),g(h,"class","svelte-1qfrzrz"),g(b,"class","svelte-1qfrzrz"),g(T,"class","operation svelte-1qfrzrz")},m(s,u){c(s,e,u);for(let t=0;t<O.length;t+=1)O[t].m(e,null);y(e,t[63]),c(s,n,u),c(s,o,u),r(o,a),c(s,i,u),c(s,h,u),r(h,v),c(s,x,u),c(s,b,u),r(b,k),c(s,z,u),c(s,T,u),r(T,w),r(T,C),r(T,_),r(T,L),r(T,F),r(T,R),r(T,A),E||(S=[p(e,"change",N),p(w,"click",j),p(_,"click",H),p(F,"click",K),p(A,"click",I)],E=!0)},p(n,s){if(t=n,1&s[0]){let n;for(D=t[0],n=0;n<D.length;n+=1){const o=rt(t,D,n);O[n]?O[n].p(o,s):(O[n]=ct(o),O[n].c(),O[n].m(e,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=D.length}3&s[0]&&y(e,t[63]),4&s[0]&&B!==(B=t[2].stages[t[65]]?.cost+"")&&$(a,B),4&s[0]&&M!==(M=t[2].stages[t[65]]?.damage.toFixed(0)+"")&&$(v,M),4&s[0]&&W!==(W=((t[2].stages[t[65]]?.damage||0)/t[2].stages[t[65]]?.cost).toFixed(0)+"")&&$(k,W)},d(t){t&&u(e),l(O,t),t&&u(n),t&&u(o),t&&u(i),t&&u(h),t&&u(x),t&&u(b),t&&u(z),t&&u(T),E=!1,s(S)}}}function lt(t){let e,n,s,o,a,i,l,h,v,y,x,b,k,z,T,w=t[60].name+"",C=t[60].cost+"",_=t[60].damage.toFixed(0)+"",L=t[60].cp.toFixed(0)+"";function q(){return t[58](t[60])}return{c(){e=f("span"),n=d(w),s=m(),o=f("span"),a=d(C),i=m(),l=f("span"),h=d(_),v=m(),y=f("span"),x=d(L),b=m(),k=f("button"),k.textContent="x",g(e,"class","svelte-1qfrzrz"),g(o,"class","svelte-1qfrzrz"),g(l,"class","svelte-1qfrzrz"),g(y,"class","svelte-1qfrzrz"),g(k,"class","svelte-1qfrzrz")},m(t,u){c(t,e,u),r(e,n),c(t,s,u),c(t,o,u),r(o,a),c(t,i,u),c(t,l,u),r(l,h),c(t,v,u),c(t,y,u),r(y,x),c(t,b,u),c(t,k,u),z||(T=p(k,"click",q),z=!0)},p(e,s){t=e,8&s[0]&&w!==(w=t[60].name+"")&&$(n,w),8&s[0]&&C!==(C=t[60].cost+"")&&$(a,C),8&s[0]&&_!==(_=t[60].damage.toFixed(0)+"")&&$(h,_),8&s[0]&&L!==(L=t[60].cp.toFixed(0)+"")&&$(x,L)},d(t){t&&u(e),t&&u(s),t&&u(o),t&&u(i),t&&u(l),t&&u(v),t&&u(y),t&&u(b),t&&u(k),z=!1,T()}}}function ft(t){let e,n,o,a,i,y,x,b,k,z,w,C,_,L,q,R,A,E,S,B,H,K,I,P,J,G,Q,V,X,Y,tt,et,nt,st,ot,rt,ct,ft,dt,mt,pt,gt,ht,$t,vt,yt,xt,bt,kt,zt,Tt,wt,Ct,_t,Lt,qt,Ft,Rt,At,Et,St,Bt,Mt,Wt,Dt,Ot,Nt,jt,Ht,Kt,It,Pt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,se,oe,ae,ie,re,ce,ue,le,fe,de,me,pe,ge,he,$e,ve,ye,xe=t[2].summary.cost+"",be=t[2].summary.damage.toFixed(0)+"",ke=t[2].summary.cp.toFixed(0)+"";o=new U({});let ze=t[1],Te=[];for(let e=0;e<ze.length;e+=1)Te[e]=ut(it(t,ze,e));function we(e){t[54](e)}let Ce={field:"name",text:"Name"};function _e(e){t[55](e)}void 0!==t[4]&&(Ce.method=t[4]),ee=new Z({props:Ce}),T.push((()=>D(ee,"method",we)));let Le={field:"cost",text:"Cost"};function qe(e){t[56](e)}void 0!==t[4]&&(Le.method=t[4]),oe=new Z({props:Le}),T.push((()=>D(oe,"method",_e)));let Fe={field:"damage",text:"Damage"};function Re(e){t[57](e)}void 0!==t[4]&&(Fe.method=t[4]),re=new Z({props:Fe}),T.push((()=>D(re,"method",qe)));let Ae={field:"cp",text:"CP"};void 0!==t[4]&&(Ae.method=t[4]),le=new Z({props:Ae}),T.push((()=>D(le,"method",Re)));let Ee=t[3],Se=[];for(let e=0;e<Ee.length;e+=1)Se[e]=lt(at(t,Ee,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=m(),O(o.$$.fragment),a=m(),i=f("div"),y=f("span"),y.textContent="力量",x=m(),b=f("input"),k=m(),z=f("span"),z.textContent="防禦",w=m(),C=f("input"),_=m(),L=f("span"),L.textContent="智力",q=m(),R=f("input"),A=m(),E=f("span"),E.textContent="魔防",S=m(),B=f("input"),H=m(),K=f("span"),K.textContent="火抗",I=m(),P=f("input"),J=m(),G=f("span"),G.textContent="水抗",Q=m(),V=f("input"),X=m(),Y=f("span"),Y.textContent="毒抗",tt=m(),et=f("input"),nt=m(),st=f("span"),st.textContent="雷抗",ot=m(),rt=f("input"),ct=m(),ft=f("span"),ft.textContent="中毒發生次數",dt=m(),mt=f("input"),pt=m(),gt=f("label"),ht=f("input"),$t=m(),vt=f("span"),vt.textContent="使用武器後中毒（格蕾絲）",yt=m(),xt=f("label"),bt=f("input"),kt=m(),zt=f("span"),zt.textContent="使用火武器後加速（歌莉雅）",Tt=m(),wt=f("h2"),wt.textContent="Combo",Ct=m(),_t=f("div"),Lt=f("span"),Lt.textContent="Weapon",qt=m(),Ft=f("span"),Ft.textContent="Cost",Rt=m(),At=f("span"),At.textContent="Damage",Et=m(),St=f("span"),St.textContent="CP",Bt=m(),Mt=f("span"),Wt=m();for(let t=0;t<Te.length;t+=1)Te[t].c();Dt=m(),Ot=f("span"),Ot.textContent="Summary",Nt=m(),jt=f("span"),Ht=d(xe),Kt=m(),It=f("span"),Pt=d(be),Jt=m(),Zt=f("span"),Gt=d(ke),Qt=m(),Ut=f("button"),Ut.textContent="Add to compare list",Vt=m(),Xt=f("h2"),Xt.textContent="Compare",Yt=m(),te=f("div"),O(ee.$$.fragment),se=m(),O(oe.$$.fragment),ie=m(),O(re.$$.fragment),ue=m(),O(le.$$.fragment),de=m(),me=f("span"),pe=m();for(let t=0;t<Se.length;t+=1)Se[t].c();ge=m(),he=f("footer"),he.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',g(b,"type","number"),g(C,"type","number"),g(R,"type","number"),g(B,"type","number"),g(P,"type","number"),g(V,"type","number"),g(et,"type","number"),g(rt,"type","number"),g(mt,"type","number"),g(ht,"type","checkbox"),g(gt,"class","cspan svelte-1qfrzrz"),g(bt,"type","checkbox"),g(xt,"class","cspan svelte-1qfrzrz"),g(i,"class","base-info svelte-1qfrzrz"),g(Lt,"class","chead svelte-1qfrzrz"),g(Ft,"class","chead svelte-1qfrzrz"),g(At,"class","chead svelte-1qfrzrz"),g(St,"class","chead svelte-1qfrzrz"),g(Mt,"class","svelte-1qfrzrz"),g(Ot,"class","chead svelte-1qfrzrz"),g(jt,"class","svelte-1qfrzrz"),g(It,"class","svelte-1qfrzrz"),g(Zt,"class","svelte-1qfrzrz"),g(_t,"class","combo-table svelte-1qfrzrz"),g(me,"class","svelte-1qfrzrz"),g(te,"class","compare-list svelte-1qfrzrz"),g(he,"class","svelte-1qfrzrz")},m(s,u){c(s,e,u),c(s,n,u),N(o,s,u),c(s,a,u),c(s,i,u),r(i,y),r(i,x),r(i,b),v(b,t[15]),r(i,k),r(i,z),r(i,w),r(i,C),v(C,t[14]),r(i,_),r(i,L),r(i,q),r(i,R),v(R,t[13]),r(i,A),r(i,E),r(i,S),r(i,B),v(B,t[12]),r(i,H),r(i,K),r(i,I),r(i,P),v(P,t[8]),r(i,J),r(i,G),r(i,Q),r(i,V),v(V,t[7]),r(i,X),r(i,Y),r(i,tt),r(i,et),v(et,t[6]),r(i,nt),r(i,st),r(i,ot),r(i,rt),v(rt,t[5]),r(i,ct),r(i,ft),r(i,dt),r(i,mt),v(mt,t[11]),r(i,pt),r(i,gt),r(gt,ht),ht.checked=t[10],r(gt,$t),r(gt,vt),r(i,yt),r(i,xt),r(xt,bt),bt.checked=t[9],r(xt,kt),r(xt,zt),c(s,Tt,u),c(s,wt,u),c(s,Ct,u),c(s,_t,u),r(_t,Lt),r(_t,qt),r(_t,Ft),r(_t,Rt),r(_t,At),r(_t,Et),r(_t,St),r(_t,Bt),r(_t,Mt),r(_t,Wt);for(let t=0;t<Te.length;t+=1)Te[t].m(_t,null);r(_t,Dt),r(_t,Ot),r(_t,Nt),r(_t,jt),r(jt,Ht),r(_t,Kt),r(_t,It),r(It,Pt),r(_t,Jt),r(_t,Zt),r(Zt,Gt),c(s,Qt,u),c(s,Ut,u),c(s,Vt,u),c(s,Xt,u),c(s,Yt,u),c(s,te,u),N(ee,te,null),r(te,se),N(oe,te,null),r(te,ie),N(re,te,null),r(te,ue),N(le,te,null),r(te,de),r(te,me),r(te,pe);for(let t=0;t<Se.length;t+=1)Se[t].m(te,null);c(s,ge,u),c(s,he,u),$e=!0,ve||(ye=[p(b,"input",t[38]),p(C,"input",t[39]),p(R,"input",t[40]),p(B,"input",t[41]),p(P,"input",t[42]),p(V,"input",t[43]),p(et,"input",t[44]),p(rt,"input",t[45]),p(mt,"input",t[46]),p(ht,"change",t[47]),p(bt,"change",t[48]),p(Ut,"click",t[32])],ve=!0)},p(t,e){if(32768&e[0]&&h(b.value)!==t[15]&&v(b,t[15]),16384&e[0]&&h(C.value)!==t[14]&&v(C,t[14]),8192&e[0]&&h(R.value)!==t[13]&&v(R,t[13]),4096&e[0]&&h(B.value)!==t[12]&&v(B,t[12]),256&e[0]&&h(P.value)!==t[8]&&v(P,t[8]),128&e[0]&&h(V.value)!==t[7]&&v(V,t[7]),64&e[0]&&h(et.value)!==t[6]&&v(et,t[6]),32&e[0]&&h(rt.value)!==t[5]&&v(rt,t[5]),2048&e[0]&&h(mt.value)!==t[11]&&v(mt,t[11]),1024&e[0]&&(ht.checked=t[10]),512&e[0]&&(bt.checked=t[9]),1610612743&e[0]|1&e[1]){let n;for(ze=t[1],n=0;n<ze.length;n+=1){const s=it(t,ze,n);Te[n]?Te[n].p(s,e):(Te[n]=ut(s),Te[n].c(),Te[n].m(_t,Dt))}for(;n<Te.length;n+=1)Te[n].d(1);Te.length=ze.length}(!$e||4&e[0])&&xe!==(xe=t[2].summary.cost+"")&&$(Ht,xe),(!$e||4&e[0])&&be!==(be=t[2].summary.damage.toFixed(0)+"")&&$(Pt,be),(!$e||4&e[0])&&ke!==(ke=t[2].summary.cp.toFixed(0)+"")&&$(Gt,ke);const n={};!ne&&16&e[0]&&(ne=!0,n.method=t[4],F((()=>ne=!1))),ee.$set(n);const s={};!ae&&16&e[0]&&(ae=!0,s.method=t[4],F((()=>ae=!1))),oe.$set(s);const o={};!ce&&16&e[0]&&(ce=!0,o.method=t[4],F((()=>ce=!1))),re.$set(o);const a={};if(!fe&&16&e[0]&&(fe=!0,a.method=t[4],F((()=>fe=!1))),le.$set(a),8&e[0]|4&e[1]){let n;for(Ee=t[3],n=0;n<Ee.length;n+=1){const s=at(t,Ee,n);Se[n]?Se[n].p(s,e):(Se[n]=lt(s),Se[n].c(),Se[n].m(te,null))}for(;n<Se.length;n+=1)Se[n].d(1);Se.length=Ee.length}},i(t){$e||(M(o.$$.fragment,t),M(ee.$$.fragment,t),M(oe.$$.fragment,t),M(re.$$.fragment,t),M(le.$$.fragment,t),$e=!0)},o(t){W(o.$$.fragment,t),W(ee.$$.fragment,t),W(oe.$$.fragment,t),W(re.$$.fragment,t),W(le.$$.fragment,t),$e=!1},d(t){t&&u(e),t&&u(n),j(o,t),t&&u(a),t&&u(i),t&&u(Tt),t&&u(wt),t&&u(Ct),t&&u(_t),l(Te,t),t&&u(Qt),t&&u(Ut),t&&u(Vt),t&&u(Xt),t&&u(Yt),t&&u(te),j(ee),j(oe),j(re),j(le),l(Se,t),t&&u(ge),t&&u(he),ve=!1,s(ye)}}}function dt(t,e,n){let s,o,a,r,c,u,l,f,d,m,p,g,$,{weapons:v,storeKey:y}=e;const x=Object.fromEntries(v.map((t=>[t.name,t]))),b=tt(`${y}/atk`,700);i(t,b,(t=>n(15,$=t)));const k=tt(`${y}/def`,200);i(t,k,(t=>n(14,g=t)));const z=tt(`${y}/int`,700);i(t,z,(t=>n(13,p=t)));const T=tt(`${y}/mdef`,200);i(t,T,(t=>n(12,m=t)));const w=tt(`${y}/fireResist`,0);i(t,w,(t=>n(8,u=t)));const C=tt(`${y}/waterResist`,0);i(t,C,(t=>n(7,c=t)));const _=tt(`${y}/poisonResist`,0);i(t,_,(t=>n(6,r=t)));const L=tt(`${y}/lightningResist`,0);i(t,L,(t=>n(5,a=t)));const q=tt(`${y}/poisonTurns`,99);i(t,q,(t=>n(11,d=t)));const F=tt(`${y}/poisonAfterWeapon`,!1);i(t,F,(t=>n(10,f=t)));const R=tt(`${y}/speedAfterFireWeapon`,!1);i(t,R,(t=>n(9,l=t)));const A=tt(`${y}/compareList`,v.map((t=>[t.name])));i(t,A,(t=>n(37,s=t)));const E=tt(`${y}/sortMethod`,{field:null,dir:1});i(t,E,(t=>n(4,o=t)));let S=[v[0]],B={stages:[],summary:{damage:0,cost:0,cp:0}},M=[],W=[],D={};function O(t){S.splice(t,0,S[t]),n(1,S)}function N(t){S.length<=1||(S.splice(t,1),n(1,S))}function j(t,e){const s=S[t];S.splice(t,1),S.splice(t+e,0,s),n(1,S)}function H(t){s.splice(t,1),A.set(s)}return t.$$set=t=>{"weapons"in t&&n(0,v=t.weapons),"storeKey"in t&&n(34,y=t.storeKey)},t.$$.update=()=>{65504&t.$$.dirty[0]&&n(36,D={atk:$,def:g,int:p,mdef:m,poisonTurns:d,poisonAfterWeapon:f,speedAfterFireWeapon:l,fireResist:u,waterResist:c,poisonResist:r,lightningResist:a}),2&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(2,B=nt({...D,weapons:S})),96&t.$$.dirty[1]&&n(35,M=s.map(((t,e)=>{const n=t.map((t=>x[t])),s=nt({...D,weapons:n});return{name:t.join("+"),cost:s.summary.cost,damage:s.summary.damage,cp:s.summary.cp,index:e}}))),24&t.$$.dirty[0]|16&t.$$.dirty[1]&&(n(3,W=M.slice()),o.field&&W.sort(((t,e)=>(t[o.field]<e[o.field]?-1:t[o.field]>e[o.field]?1:0)*o.dir)))},[v,S,B,W,o,a,r,c,u,l,f,d,m,p,g,$,b,k,z,T,w,C,_,L,q,F,R,A,E,O,N,j,function(){s.push(S.map((t=>t.name))),A.set(s)},H,y,M,D,s,function(){$=h(this.value),b.set($)},function(){g=h(this.value),k.set(g)},function(){p=h(this.value),z.set(p)},function(){m=h(this.value),T.set(m)},function(){u=h(this.value),w.set(u)},function(){c=h(this.value),C.set(c)},function(){r=h(this.value),_.set(r)},function(){a=h(this.value),L.set(a)},function(){d=h(this.value),q.set(d)},function(){f=this.checked,F.set(f)},function(){l=this.checked,R.set(l)},function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,S),n(0,v)},t=>j(t,-1),t=>j(t,1),t=>O(t),t=>N(t),function(t){o=t,E.set(o)},function(t){o=t,E.set(o)},function(t){o=t,E.set(o)},function(t){o=t,E.set(o)},t=>H(t.index)]}const mt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int"},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str"},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]}],pt=mt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends I{constructor(t){super(),K(this,t,dt,ft,a,{weapons:0,storeKey:34},null,[-1,-1,-1])}},b:pt,w:mt}}();
//# sourceMappingURL=tome-86c46985.js.map
