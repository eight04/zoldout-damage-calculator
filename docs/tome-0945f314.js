var tome0945F314=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function x(t,e,n){t.classList[n?"add":"remove"](e)}let b;function k(t){b=t}const z=[],w=[],T=[],_=[],C=Promise.resolve();let L=!1;function q(t){T.push(t)}function R(t){_.push(t)}const F=new Set;let E=0;function S(){const t=b;do{for(;E<z.length;){const t=z[E];E++,k(t),H(t.$$)}for(k(null),z.length=0,E=0;w.length;)w.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];F.has(e)||(F.add(e),e())}T.length=0}while(z.length);for(;_.length;)_.pop()();L=!1,F.clear(),k(t)}function H(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const M=new Set;function D(t,e){t&&t.i&&(M.delete(t),t.i(e))}function B(t,e,n,s){if(t&&t.o){if(M.has(t))return;M.add(t),undefined.c.push((()=>{M.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function O(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function A(t){t&&t.c()}function I(t,n,a,i){const{fragment:r,on_mount:c,on_destroy:l,after_update:u}=t.$$;r&&r.m(n,a),i||q((()=>{const n=c.map(e).filter(o);l?l.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(q)}function N(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(z.push(t),L||(L=!0,C.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,a,i,r,c,u,f=[-1]){const d=b;k(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};u&&u(m.root);let p=!1;if(m.ctx=a?a(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return m.ctx&&r(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),p&&j(e,t)),n})):[],m.update(),p=!0,s(m.before_update),m.fragment=!!i&&i(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(l)}else m.fragment&&m.fragment.c();o.intro&&D(e.$$.fragment),I(e,o.target,o.anchor,o.customElement),S()}k(d)}class K{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function P(e){let n,s,o,a;return{c(){n=f("button"),s=d(e[2]),h(n,"class","svelte-19loasr"),x(n,"sorted",e[0].field===e[1]),x(n,"reversed",e[0].dir<0)},m(t,i){c(t,n,i),r(n,s),o||(a=p(n,"click",e[3]),o=!0)},p(t,[e]){4&e&&v(s,t[2]),3&e&&x(n,"sorted",t[0].field===t[1]),1&e&&x(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&l(n),o=!1,a()}}}function J(t,e,n){let{method:s,field:o,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,s=t.method),"field"in t&&n(1,o=t.field),"text"in t&&n(2,a=t.text)},[s,o,a,function(){s.field!==o?(n(0,s.field=o,s),n(0,s.dir=1,s)):n(0,s.dir*=-1,s)}]}class Z extends K{constructor(t){super(),W(this,t,J,P,a,{method:0,field:1,text:2})}}const G=location.pathname.match(/([^/.]*)(\.html)?$/),Q=G[1]&&"index"!==G[1]?G[1]:"sword";function U(e){let n,s,o,a,i,u,d,p;return{c(){n=f("ul"),s=f("li"),s.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',o=m(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=m(),u=f("li"),u.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=m(),p=f("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',h(s,"class","svelte-116mxxw"),x(s,"active","sword"===Q),h(a,"class","svelte-116mxxw"),x(a,"active","bow"===Q),h(u,"class","svelte-116mxxw"),x(u,"active","wand"===Q),h(p,"class","svelte-116mxxw"),x(p,"active","tome"===Q),h(n,"class","svelte-116mxxw")},m(t,e){c(t,n,e),r(n,s),r(n,o),r(n,a),r(n,i),r(n,u),r(n,d),r(n,p)},p:t,i:t,o:t,d(t){t&&l(n)}}}class V extends K{constructor(t){super(),W(this,t,null,U,a,{})}}const X=[];const Y="zoldout-damage-calculator",tt=new Map;function et(e,n){if(tt.has(e))return tt.get(e);const s=function(e,n=t){let s;const o=new Set;function i(t){if(a(e,t)&&(e=t,s)){const t=!X.length;for(const t of o)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,r=t){const c=[a,r];return o.add(c),1===o.size&&(s=n(i)||t),a(e),()=>{o.delete(c),0===o.size&&(s(),s=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${Y}/${e}`))??n);return s.subscribe((t=>localStorage.setItem(`${Y}/${e}`,JSON.stringify(t)))),tt.set(e,s),s}var nt=[{name:"傷害後攻擊增加（艾莉諾拉）",type:"bow",afterHit:t=>{t.buff.push({atk:5,times:99}),1===t.totalHit&&t.buff.push({bonus:1.21,times:99})}},{name:"使用武器後中毒（格蕾絲）",type:"bow",afterWeapon:t=>{t.hit&&t.poison.push({atk:300,turn:2,bonus:0})}},{name:"使用火武器後加速（歌莉雅）",type:"wand",afterWeapon:(t,e)=>{e.fire?.atk&&(t.cost-=2)}},{name:"額外傷害（尤里+泳裝伊蓮）",type:"wand",afterWeapon:(t,e)=>{e.water?.atk&&(t.damage+=2*(900-t.getDef({atkType:"magic"})))}}];const st={F:.85,E0:1,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85};class ot{constructor({atk:t,def:e,int:n,mdef:s,fireResist:o,waterResist:a,poisonResist:i,lightningResist:r,poisonTurns:c,passive:l}){this.atk=t,this.def=e,this.int=n,this.mdef=s,this.fireResist=o,this.waterResist=a,this.poisonResist=i,this.lightningResist=r,this.poisonTurns=c,this.passive=l,this.damage=0,this.hit=0,this.totalHit=0,this.stance=0,this.totalHit=0,this.buff=[],this.targetBuff=[],this.poison=[],this.lightning={}}getDef(t){return it(this,t)}}function at({weapons:t,passiveIds:e,...n}){const s=nt.filter(((t,n)=>e.includes(n))),o=[],a=new ot({...n,passive:s});for(const e of t){const t=ut(a,e);o.push(t)}const i=o.reduce(((t,e)=>t+e.damage),0),r=o.reduce(((t,e)=>t+e.cost),0);return{stages:o,summary:{damage:i,cost:r,cp:i/r}}}function it({def:t,mdef:e,targetBuff:n},{atkType:s}){return"heal"===s?0:"magic"===s?e+n.reduce(((t,e)=>t+(e.mdef||0)),0):t+n.reduce(((t,e)=>t+(e.def||0)),0)}function rt({atk:t,int:e,buff:n},{modType:s,modLv:o,atk:a=0,bonus:i=0}){const r="int"===s?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(o?r*st[o]:0))*(i+100)/100*n.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1)}function ct({poison:t,poisonTurns:e,poisonResist:n}){let s=0;for(const o of t)s+=o.atk*Math.min(o.turn,e)/o.turn*(100-n)/100;return s}function lt(t,e,n){t.passive.forEach((s=>s[n]?.(t,e)))}function ut(t,e){const n=ct(t);t.cost=e.casting||e.cost,t.hit=e.hit||(e.atk||e.modLv?1:0),t.damage=0;const s=it(t,e);for(let n=0;n<t.hit;n++){t.currentHit=n+1,t.totalHit++;let o=rt(t,e);e.stance?.use===t.stance&&(o*=((e.stance.bonus||0)+100)/100),t.damage+=Math.max(o-s,1),t.lightning?.atk&&(t.damage+=t.lightning.atk*(100-t.lightningResist)/100),lt(t,e,"afterHit")}return t.hit&&(t.buff=t.buff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0)),t.targetBuff=t.targetBuff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0))),e.trap&&(t.damage+=Math.max(e.trap.atk-s,1)),e.fire?.atk&&(t.damage+=e.fire.atk*(100-t.fireResist)/100),e.water?.atk&&(t.damage+=e.water.atk*(100-t.waterResist)/100),e.lightning?.atk&&(t.damage+=e.lightning.atk*(100-t.lightningResist)/100,(!t.lightning?.atk||e.lightning.time>t.lightning.time)&&(t.lightning=e.lightning)),e.poison?.atk&&t.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0}),e.poison?.bonus&&(t.poison=t.poison.map((t=>{const n=(t.bonus+100)*(e.poison.bonus+100)/100-100;return{...t,bonus:Math.min(n,200)}}))),e.buff&&t.buff.push(...e.buff),e.targetBuff&&t.targetBuff.push(...e.targetBuff),e?.stance?.use===t.stance&&e.stance.buff&&t.buff.push(...e.stance.buff),null!=e?.stance?.gain&&(t.stance=e.stance.gain),lt(t,e,"afterWeapon"),t.damage+=ct(t)-n,{damage:t.damage,cost:t.cost}}function ft(t,e,n){const s=t.slice();return s[58]=e[n],s}function dt(t,e,n){const s=t.slice();return s[61]=e[n],s[62]=e,s[63]=n,s}function mt(t,e,n){const s=t.slice();return s[64]=e[n],s}function pt(t,e,n){const s=t.slice();return s[67]=e[n],s[63]=n,s}function ht(t){let e,n=Q===t[67].type&&function(t){let e,n,s,o,a,i,u,g,v=t[67].name+"";return{c(){e=f("label"),n=f("input"),s=m(),o=f("span"),a=d(v),i=m(),h(n,"type","checkbox"),n.__value=t[63],n.value=n.__value,t[46][0].push(n),h(e,"class","cspan svelte-1qfrzrz")},m(l,f){c(l,e,f),r(e,n),n.checked=~t[9].indexOf(n.__value),r(e,s),r(e,o),r(o,a),r(e,i),u||(g=p(n,"change",t[45]),u=!0)},p(t,e){512&e[0]&&(n.checked=~t[9].indexOf(n.__value))},d(s){s&&l(e),t[46][0].splice(t[46][0].indexOf(n),1),u=!1,g()}}}(t);return{c(){n&&n.c(),e=d("")},m(t,s){n&&n.m(t,s),c(t,e,s)},p(t,e){Q===t[67].type&&n.p(t,e)},d(t){n&&n.d(t),t&&l(e)}}}function gt(t){let e,n,s,o=t[64].name+"";return{c(){e=f("option"),n=d(o),e.__value=s=t[64],e.value=e.__value},m(t,s){c(t,e,s),r(e,n)},p(t,a){1&a[0]&&o!==(o=t[64].name+"")&&v(n,o),1&a[0]&&s!==(s=t[64])&&(e.__value=s,e.value=e.__value)},d(t){t&&l(e)}}}function vt(t){let e,n,o,a,i,g,$,x,b,k,z,w,T,_,C,L,R,F,E,S,H,M=t[2].stages[t[63]]?.cost+"",D=t[2].stages[t[63]]?.damage.toFixed(0)+"",B=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"",O=t[0],A=[];for(let e=0;e<O.length;e+=1)A[e]=gt(mt(t,O,e));function I(){t[47].call(e,t[62],t[63])}function N(){return t[48](t[63])}function j(){return t[49](t[63])}function W(){return t[50](t[63])}function K(){return t[51](t[63])}return{c(){e=f("select");for(let t=0;t<A.length;t+=1)A[t].c();n=m(),o=f("span"),a=d(M),i=m(),g=f("span"),$=d(D),x=m(),b=f("span"),k=d(B),z=m(),w=f("div"),T=f("button"),T.textContent="↑",_=m(),C=f("button"),C.textContent="↓",L=m(),R=f("button"),R.textContent="⎘",F=m(),E=f("button"),E.textContent="x",h(e,"class","svelte-1qfrzrz"),void 0===t[61]&&q(I),h(o,"class","svelte-1qfrzrz"),h(g,"class","svelte-1qfrzrz"),h(b,"class","svelte-1qfrzrz"),h(w,"class","operation svelte-1qfrzrz")},m(s,l){c(s,e,l);for(let t=0;t<A.length;t+=1)A[t].m(e,null);y(e,t[61]),c(s,n,l),c(s,o,l),r(o,a),c(s,i,l),c(s,g,l),r(g,$),c(s,x,l),c(s,b,l),r(b,k),c(s,z,l),c(s,w,l),r(w,T),r(w,_),r(w,C),r(w,L),r(w,R),r(w,F),r(w,E),S||(H=[p(e,"change",I),p(T,"click",N),p(C,"click",j),p(R,"click",W),p(E,"click",K)],S=!0)},p(n,s){if(t=n,1&s[0]){let n;for(O=t[0],n=0;n<O.length;n+=1){const o=mt(t,O,n);A[n]?A[n].p(o,s):(A[n]=gt(o),A[n].c(),A[n].m(e,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=O.length}3&s[0]&&y(e,t[61]),4&s[0]&&M!==(M=t[2].stages[t[63]]?.cost+"")&&v(a,M),4&s[0]&&D!==(D=t[2].stages[t[63]]?.damage.toFixed(0)+"")&&v($,D),4&s[0]&&B!==(B=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"")&&v(k,B)},d(t){t&&l(e),u(A,t),t&&l(n),t&&l(o),t&&l(i),t&&l(g),t&&l(x),t&&l(b),t&&l(z),t&&l(w),S=!1,s(H)}}}function $t(t){let e,n,s,o,a,i,u,g,$,y,x,b,k,z,w,T=t[58].name+"",_=t[58].cost+"",C=t[58].damage.toFixed(0)+"",L=t[58].cp.toFixed(0)+"";function q(){return t[56](t[58])}return{c(){e=f("span"),n=d(T),s=m(),o=f("span"),a=d(_),i=m(),u=f("span"),g=d(C),$=m(),y=f("span"),x=d(L),b=m(),k=f("button"),k.textContent="x",h(e,"class","svelte-1qfrzrz"),h(o,"class","svelte-1qfrzrz"),h(u,"class","svelte-1qfrzrz"),h(y,"class","svelte-1qfrzrz"),h(k,"class","svelte-1qfrzrz")},m(t,l){c(t,e,l),r(e,n),c(t,s,l),c(t,o,l),r(o,a),c(t,i,l),c(t,u,l),r(u,g),c(t,$,l),c(t,y,l),r(y,x),c(t,b,l),c(t,k,l),z||(w=p(k,"click",q),z=!0)},p(e,s){t=e,8&s[0]&&T!==(T=t[58].name+"")&&v(n,T),8&s[0]&&_!==(_=t[58].cost+"")&&v(a,_),8&s[0]&&C!==(C=t[58].damage.toFixed(0)+"")&&v(g,C),8&s[0]&&L!==(L=t[58].cp.toFixed(0)+"")&&v(x,L)},d(t){t&&l(e),t&&l(s),t&&l(o),t&&l(i),t&&l(u),t&&l($),t&&l(y),t&&l(b),t&&l(k),z=!1,w()}}}function yt(t){let e,n,o,a,i,y,x,b,k,z,T,_,C,L,q,F,E,S,H,M,j,W,K,P,J,G,Q,U,X,Y,tt,et,st,ot,at,it,rt,ct,lt,ut,mt,gt,yt,xt,bt,kt,zt,wt,Tt,_t,Ct,Lt,qt,Rt,Ft,Et,St,Ht,Mt,Dt,Bt,Ot,At,It,Nt,jt,Wt,Kt,Pt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,se,oe,ae,ie,re,ce,le,ue,fe,de,me,pe=t[2].summary.cost+"",he=t[2].summary.damage.toFixed(0)+"",ge=t[2].summary.cp.toFixed(0)+"";o=new V({});let ve=nt,$e=[];for(let e=0;e<ve.length;e+=1)$e[e]=ht(pt(t,ve,e));let ye=t[1],xe=[];for(let e=0;e<ye.length;e+=1)xe[e]=vt(dt(t,ye,e));function be(e){t[52](e)}let ke={field:"name",text:"Name"};function ze(e){t[53](e)}void 0!==t[4]&&(ke.method=t[4]),Qt=new Z({props:ke}),w.push((()=>O(Qt,"method",be)));let we={field:"cost",text:"Cost"};function Te(e){t[54](e)}void 0!==t[4]&&(we.method=t[4]),Xt=new Z({props:we}),w.push((()=>O(Xt,"method",ze)));let _e={field:"damage",text:"Damage"};function Ce(e){t[55](e)}void 0!==t[4]&&(_e.method=t[4]),ee=new Z({props:_e}),w.push((()=>O(ee,"method",Te)));let Le={field:"cp",text:"CP"};void 0!==t[4]&&(Le.method=t[4]),oe=new Z({props:Le}),w.push((()=>O(oe,"method",Ce)));let qe=t[3],Re=[];for(let e=0;e<qe.length;e+=1)Re[e]=$t(ft(t,qe,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=m(),A(o.$$.fragment),a=m(),i=f("div"),y=f("span"),y.textContent="力量",x=m(),b=f("input"),k=m(),z=f("span"),z.textContent="防禦",T=m(),_=f("input"),C=m(),L=f("span"),L.textContent="智力",q=m(),F=f("input"),E=m(),S=f("span"),S.textContent="魔防",H=m(),M=f("input"),j=m(),W=f("span"),W.textContent="火抗",K=m(),P=f("input"),J=m(),G=f("span"),G.textContent="水抗",Q=m(),U=f("input"),X=m(),Y=f("span"),Y.textContent="毒抗",tt=m(),et=f("input"),st=m(),ot=f("span"),ot.textContent="雷抗",at=m(),it=f("input"),rt=m(),ct=f("span"),ct.textContent="中毒發生次數",lt=m(),ut=f("input"),mt=m();for(let t=0;t<$e.length;t+=1)$e[t].c();gt=m(),yt=f("h2"),yt.textContent="Combo",xt=m(),bt=f("div"),kt=f("span"),kt.textContent="Weapon",zt=m(),wt=f("span"),wt.textContent="Cost",Tt=m(),_t=f("span"),_t.textContent="Damage",Ct=m(),Lt=f("span"),Lt.textContent="CP",qt=m(),Rt=f("span"),Ft=m();for(let t=0;t<xe.length;t+=1)xe[t].c();Et=m(),St=f("span"),St.textContent="Summary",Ht=m(),Mt=f("span"),Dt=d(pe),Bt=m(),Ot=f("span"),At=d(he),It=m(),Nt=f("span"),jt=d(ge),Wt=m(),Kt=f("button"),Kt.textContent="Add to compare list",Pt=m(),Jt=f("h2"),Jt.textContent="Compare",Zt=m(),Gt=f("div"),A(Qt.$$.fragment),Vt=m(),A(Xt.$$.fragment),te=m(),A(ee.$$.fragment),se=m(),A(oe.$$.fragment),ie=m(),re=f("span"),ce=m();for(let t=0;t<Re.length;t+=1)Re[t].c();le=m(),ue=f("footer"),ue.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',h(b,"type","number"),h(_,"type","number"),h(F,"type","number"),h(M,"type","number"),h(P,"type","number"),h(U,"type","number"),h(et,"type","number"),h(it,"type","number"),h(ut,"type","number"),h(i,"class","base-info svelte-1qfrzrz"),h(kt,"class","chead svelte-1qfrzrz"),h(wt,"class","chead svelte-1qfrzrz"),h(_t,"class","chead svelte-1qfrzrz"),h(Lt,"class","chead svelte-1qfrzrz"),h(Rt,"class","svelte-1qfrzrz"),h(St,"class","chead svelte-1qfrzrz"),h(Mt,"class","svelte-1qfrzrz"),h(Ot,"class","svelte-1qfrzrz"),h(Nt,"class","svelte-1qfrzrz"),h(bt,"class","combo-table svelte-1qfrzrz"),h(re,"class","svelte-1qfrzrz"),h(Gt,"class","compare-list svelte-1qfrzrz"),h(ue,"class","svelte-1qfrzrz")},m(s,l){c(s,e,l),c(s,n,l),I(o,s,l),c(s,a,l),c(s,i,l),r(i,y),r(i,x),r(i,b),$(b,t[14]),r(i,k),r(i,z),r(i,T),r(i,_),$(_,t[13]),r(i,C),r(i,L),r(i,q),r(i,F),$(F,t[12]),r(i,E),r(i,S),r(i,H),r(i,M),$(M,t[11]),r(i,j),r(i,W),r(i,K),r(i,P),$(P,t[8]),r(i,J),r(i,G),r(i,Q),r(i,U),$(U,t[7]),r(i,X),r(i,Y),r(i,tt),r(i,et),$(et,t[6]),r(i,st),r(i,ot),r(i,at),r(i,it),$(it,t[5]),r(i,rt),r(i,ct),r(i,lt),r(i,ut),$(ut,t[10]),r(i,mt);for(let t=0;t<$e.length;t+=1)$e[t].m(i,null);c(s,gt,l),c(s,yt,l),c(s,xt,l),c(s,bt,l),r(bt,kt),r(bt,zt),r(bt,wt),r(bt,Tt),r(bt,_t),r(bt,Ct),r(bt,Lt),r(bt,qt),r(bt,Rt),r(bt,Ft);for(let t=0;t<xe.length;t+=1)xe[t].m(bt,null);r(bt,Et),r(bt,St),r(bt,Ht),r(bt,Mt),r(Mt,Dt),r(bt,Bt),r(bt,Ot),r(Ot,At),r(bt,It),r(bt,Nt),r(Nt,jt),c(s,Wt,l),c(s,Kt,l),c(s,Pt,l),c(s,Jt,l),c(s,Zt,l),c(s,Gt,l),I(Qt,Gt,null),r(Gt,Vt),I(Xt,Gt,null),r(Gt,te),I(ee,Gt,null),r(Gt,se),I(oe,Gt,null),r(Gt,ie),r(Gt,re),r(Gt,ce);for(let t=0;t<Re.length;t+=1)Re[t].m(Gt,null);c(s,le,l),c(s,ue,l),fe=!0,de||(me=[p(b,"input",t[36]),p(_,"input",t[37]),p(F,"input",t[38]),p(M,"input",t[39]),p(P,"input",t[40]),p(U,"input",t[41]),p(et,"input",t[42]),p(it,"input",t[43]),p(ut,"input",t[44]),p(Kt,"click",t[30])],de=!0)},p(t,e){if(16384&e[0]&&g(b.value)!==t[14]&&$(b,t[14]),8192&e[0]&&g(_.value)!==t[13]&&$(_,t[13]),4096&e[0]&&g(F.value)!==t[12]&&$(F,t[12]),2048&e[0]&&g(M.value)!==t[11]&&$(M,t[11]),256&e[0]&&g(P.value)!==t[8]&&$(P,t[8]),128&e[0]&&g(U.value)!==t[7]&&$(U,t[7]),64&e[0]&&g(et.value)!==t[6]&&$(et,t[6]),32&e[0]&&g(it.value)!==t[5]&&$(it,t[5]),1024&e[0]&&g(ut.value)!==t[10]&&$(ut,t[10]),512&e[0]){let n;for(ve=nt,n=0;n<ve.length;n+=1){const s=pt(t,ve,n);$e[n]?$e[n].p(s,e):($e[n]=ht(s),$e[n].c(),$e[n].m(i,null))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=ve.length}if(939524103&e[0]){let n;for(ye=t[1],n=0;n<ye.length;n+=1){const s=dt(t,ye,n);xe[n]?xe[n].p(s,e):(xe[n]=vt(s),xe[n].c(),xe[n].m(bt,Et))}for(;n<xe.length;n+=1)xe[n].d(1);xe.length=ye.length}(!fe||4&e[0])&&pe!==(pe=t[2].summary.cost+"")&&v(Dt,pe),(!fe||4&e[0])&&he!==(he=t[2].summary.damage.toFixed(0)+"")&&v(At,he),(!fe||4&e[0])&&ge!==(ge=t[2].summary.cp.toFixed(0)+"")&&v(jt,ge);const n={};!Ut&&16&e[0]&&(Ut=!0,n.method=t[4],R((()=>Ut=!1))),Qt.$set(n);const s={};!Yt&&16&e[0]&&(Yt=!0,s.method=t[4],R((()=>Yt=!1))),Xt.$set(s);const o={};!ne&&16&e[0]&&(ne=!0,o.method=t[4],R((()=>ne=!1))),ee.$set(o);const a={};if(!ae&&16&e[0]&&(ae=!0,a.method=t[4],R((()=>ae=!1))),oe.$set(a),8&e[0]|1&e[1]){let n;for(qe=t[3],n=0;n<qe.length;n+=1){const s=ft(t,qe,n);Re[n]?Re[n].p(s,e):(Re[n]=$t(s),Re[n].c(),Re[n].m(Gt,null))}for(;n<Re.length;n+=1)Re[n].d(1);Re.length=qe.length}},i(t){fe||(D(o.$$.fragment,t),D(Qt.$$.fragment,t),D(Xt.$$.fragment,t),D(ee.$$.fragment,t),D(oe.$$.fragment,t),fe=!0)},o(t){B(o.$$.fragment,t),B(Qt.$$.fragment,t),B(Xt.$$.fragment,t),B(ee.$$.fragment,t),B(oe.$$.fragment,t),fe=!1},d(t){t&&l(e),t&&l(n),N(o,t),t&&l(a),t&&l(i),u($e,t),t&&l(gt),t&&l(yt),t&&l(xt),t&&l(bt),u(xe,t),t&&l(Wt),t&&l(Kt),t&&l(Pt),t&&l(Jt),t&&l(Zt),t&&l(Gt),N(Qt),N(Xt),N(ee),N(oe),u(Re,t),t&&l(le),t&&l(ue),de=!1,s(me)}}}function xt(t,e,n){let s,o,a,r,c,l,u,f,d,m,p,h,{weapons:v,storeKey:$}=e;const y=Object.fromEntries(v.map((t=>[t.name,t]))),x=et(`${$}/atk`,700);i(t,x,(t=>n(14,h=t)));const b=et(`${$}/def`,200);i(t,b,(t=>n(13,p=t)));const k=et(`${$}/int`,700);i(t,k,(t=>n(12,m=t)));const z=et(`${$}/mdef`,200);i(t,z,(t=>n(11,d=t)));const w=et(`${$}/fireResist`,0);i(t,w,(t=>n(8,l=t)));const T=et(`${$}/waterResist`,0);i(t,T,(t=>n(7,c=t)));const _=et(`${$}/poisonResist`,0);i(t,_,(t=>n(6,r=t)));const C=et(`${$}/lightningResist`,0);i(t,C,(t=>n(5,a=t)));const L=et(`${$}/poisonTurns`,99);i(t,L,(t=>n(10,f=t)));const q=et(`${$}/passiveIds`,[]);i(t,q,(t=>n(9,u=t)));const R=et(`${$}/compareList`,v.map((t=>[t.name])));i(t,R,(t=>n(35,s=t)));const F=et(`${$}/sortMethod`,{field:null,dir:1});i(t,F,(t=>n(4,o=t)));let E=[v[0]],S={stages:[],summary:{damage:0,cost:0,cp:0}},H=[],M=[],D={};function B(t){E.splice(t,0,E[t]),n(1,E)}function O(t){E.length<=1||(E.splice(t,1),n(1,E))}function A(t,e){const s=E[t];E.splice(t,1),E.splice(t+e,0,s),n(1,E)}function I(t){s.splice(t,1),R.set(s)}const N=[[]];return t.$$set=t=>{"weapons"in t&&n(0,v=t.weapons),"storeKey"in t&&n(32,$=t.storeKey)},t.$$.update=()=>{32736&t.$$.dirty[0]&&n(34,D={atk:h,def:p,int:m,mdef:d,poisonTurns:f,passiveIds:u,fireResist:l,waterResist:c,poisonResist:r,lightningResist:a}),2&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(2,S=at({...D,weapons:E})),24&t.$$.dirty[1]&&n(33,H=s.map(((t,e)=>{const n=t.map((t=>y[t])),s=at({...D,weapons:n});return{name:t.join("+"),cost:s.summary.cost,damage:s.summary.damage,cp:s.summary.cp,index:e}}))),24&t.$$.dirty[0]|4&t.$$.dirty[1]&&(n(3,M=H.slice()),o.field&&M.sort(((t,e)=>(t[o.field]<e[o.field]?-1:t[o.field]>e[o.field]?1:0)*o.dir)))},[v,E,S,M,o,a,r,c,l,u,f,d,m,p,h,x,b,k,z,w,T,_,C,L,q,R,F,B,O,A,function(){s.push(E.map((t=>t.name))),R.set(s)},I,$,H,D,s,function(){h=g(this.value),x.set(h)},function(){p=g(this.value),b.set(p)},function(){m=g(this.value),k.set(m)},function(){d=g(this.value),z.set(d)},function(){l=g(this.value),w.set(l)},function(){c=g(this.value),T.set(c)},function(){r=g(this.value),_.set(r)},function(){a=g(this.value),C.set(a)},function(){f=g(this.value),L.set(f)},function(){u=function(t,e,n){const s=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&s.add(t[e].__value);return n||s.delete(e),Array.from(s)}(N[0],this.__value,this.checked),q.set(u)},N,function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,E),n(0,v)},t=>A(t,-1),t=>A(t,1),t=>B(t),t=>O(t),function(t){o=t,F.set(o)},function(t){o=t,F.set(o)},function(t){o=t,F.set(o)},function(t){o=t,F.set(o)},t=>I(t.index)]}const bt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int"},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str"},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]}],kt=bt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends K{constructor(t){super(),W(this,t,xt,yt,a,{weapons:0,storeKey:32},null,[-1,-1,-1])}},b:kt,w:bt}}();
//# sourceMappingURL=tome-0945f314.js.map
