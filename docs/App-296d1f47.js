var app296D1F47=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function r(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function v(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function b(t,e,n){t.classList[n?"add":"remove"](e)}let y;function k(t){y=t}const w=[],_=[],j=[],C=[],T=Promise.resolve();let F=!1;function M(t){j.push(t)}function A(t){C.push(t)}const B=new Set;let L=0;function S(){const t=y;do{for(;L<w.length;){const t=w[L];L++,k(t),E(t.$$)}for(k(null),w.length=0,L=0;_.length;)_.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];B.has(e)||(B.add(e),e())}j.length=0}while(w.length);for(;C.length;)C.pop()();F=!1,B.clear(),k(t)}function E(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const O=new Set;function W(t,e){t&&t.i&&(O.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(O.has(t))return;O.add(t),undefined.c.push((()=>{O.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function z(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function D(t){t&&t.c()}function H(t,n,a,c){const{fragment:r,on_mount:u,on_destroy:l,after_update:i}=t.$$;r&&r.m(n,a),c||M((()=>{const n=u.map(e).filter(s);l?l.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(M)}function K(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(w.push(t),F||(F=!0,T.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,s,a,c,r,u,i,f=[-1]){const d=y;k(e);const p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||d.$$.root};i&&i(p.root);let m=!1;if(p.ctx=a?a(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),m&&I(e,t)),n})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();s.intro&&W(e.$$.fragment),H(e,s.target,s.anchor,s.customElement),S()}k(d)}class q{$destroy(){K(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function J(e){let n,o,s,a;return{c(){n=f("button"),o=d(e[2]),h(n,"class","svelte-19loasr"),b(n,"sorted",e[0].field===e[1]),b(n,"reversed",e[0].dir<0)},m(t,c){u(t,n,c),r(n,o),s||(a=m(n,"click",e[3]),s=!0)},p(t,[e]){4&e&&$(o,t[2]),3&e&&b(n,"sorted",t[0].field===t[1]),1&e&&b(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&l(n),s=!1,a()}}}function Z(t,e,n){let{method:o,field:s,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,o=t.method),"field"in t&&n(1,s=t.field),"text"in t&&n(2,a=t.text)},[o,s,a,function(){o.field!==s?(n(0,o.field=s,o),n(0,o.dir=1,o)):n(0,o.dir*=-1,o)}]}class G extends q{constructor(t){super(),P(this,t,Z,J,a,{method:0,field:1,text:2})}}function Q(e){let n,o,s,a,c,i,d,m;return{c(){n=f("ul"),o=f("li"),o.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',s=p(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',c=p(),i=f("li"),i.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=p(),m=f("li"),m.innerHTML='<a href="book.html" class="svelte-116mxxw">書</a>',h(o,"class","svelte-116mxxw"),b(o,"active","sword"===e[0]),h(a,"class","svelte-116mxxw"),b(a,"active","bow"===e[0]),h(i,"class","svelte-116mxxw"),b(i,"active","wand"===e[0]),h(m,"class","svelte-116mxxw"),b(m,"active","book"===e[0]),h(n,"class","svelte-116mxxw")},m(t,e){u(t,n,e),r(n,o),r(n,s),r(n,a),r(n,c),r(n,i),r(n,d),r(n,m)},p:t,i:t,o:t,d(t){t&&l(n)}}}function R(t){const e=location.pathname.match(/([^/.]*)(\.html)?$/);return[e[1]&&"index"!==e[1]?e[1]:"sword"]}class U extends q{constructor(t){super(),P(this,t,R,Q,a,{})}}const V=[];const X="zoldout-damage-calculator",Y=new Map;function tt(e,n){if(Y.has(e))return Y.get(e);const o=function(e,n=t){let o;const s=new Set;function c(t){if(a(e,t)&&(e=t,o)){const t=!V.length;for(const t of s)t[1](),V.push(t,e);if(t){for(let t=0;t<V.length;t+=2)V[t][0](V[t+1]);V.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(a,r=t){const u=[a,r];return s.add(u),1===s.size&&(o=n(c)||t),a(e),()=>{s.delete(u),0===s.size&&(o(),o=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${X}/${e}`))??n);return o.subscribe((t=>localStorage.setItem(`${X}/${e}`,JSON.stringify(t)))),Y.set(e,o),o}const et={F:.85,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6};function nt({atk:t,def:e,weapons:n,poisonTurns:o=99,poisonAfterWeapon:s}){const a=[];let c={atk:t,def:e,stance:0,buff:[],targetBuff:[],poisonTurns:o,poison:[],poisonAfterWeapon:s};for(const t of n){const e=ot(c,t);c=e.state,a.push(e)}const r=a.reduce(((t,e)=>t+e.damage),0),u=n.reduce(((t,e)=>t+e.cost),0);return{stages:a,summary:{damage:r,cost:u,cp:r/u}}}function ot(t,e){const n={...t,buff:[],targetBuff:[],poison:[]};let o=0;if(e.atk||e.modLv){let n=0;if(e.modLv){for(const e of t.buff)n+=e.atk||0;n=(n+t.atk)*et[e.modLv]}e.atk&&(n+=e.atk);let s=0;e?.stance?.use===t.stance&&(s+=e.stance.bonus||0);let a=t.def;for(const e of t.targetBuff)a+=e.def||0;o=(n-a)*(e.hit||1)*(100+s)/100,o=Math.max(o,1)}if(o){for(const e of t.buff)e.times>1&&n.buff.push({...e,times:e.times-1});for(const e of t.targetBuff)e.times>1&&n.targetBuff.push({...e,times:e.times-1})}else n.buff.push(...t.buff),n.targetBuff.push(...t.targetBuff);if(e.trap){let n=t.def;for(const e of t.targetBuff)n+=e.def||0;o+=Math.max(e.trap.atk-n,1)}if(n.poison.push(...t.poison),e.poison?.atk&&(o+=e.poison.atk*Math.min(t.poisonTurns,e.poison.turn)/e.poison.turn,n.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0})),e.poison?.bonus){let s=0;for(let o=0;o<n.poison.length;o++){const a=n.poison[o];let c=(a.bonus+100)*(e.poison.bonus+100)/100-100;c=Math.min(c,200),s+=a.atk*Math.min(t.poisonTurns,a.turn)/a.turn*(c-a.bonus)/100,n.poison[o]={...a,bonus:c}}o+=s}return t.poisonAfterWeapon&&(o+=300*Math.min(2,t.poisonTurns)/2,n.poison.push({atk:300,turn:2,bonus:0})),e.buff&&n.buff.push(...e.buff),e.targetBuff&&n.targetBuff.push(...e.targetBuff),e?.stance?.use===t.stance&&e.stance.buff&&n.buff.push(...e.stance.buff),null!=e?.stance?.gain&&(n.stance=e.stance.gain),{damage:o,state:n}}function st(t,e,n){const o=t.slice();return o[38]=e[n],o}function at(t,e,n){const o=t.slice();return o[41]=e[n],o[42]=e,o[43]=n,o}function ct(t,e,n){const o=t.slice();return o[44]=e[n],o}function rt(t){let e,n,o,s=t[44].name+"";return{c(){e=f("option"),n=d(s),e.__value=o=t[44],e.value=e.__value},m(t,o){u(t,e,o),r(e,n)},p(t,a){1&a[0]&&s!==(s=t[44].name+"")&&$(n,s),1&a[0]&&o!==(o=t[44])&&(e.__value=o,e.value=e.__value)},d(t){t&&l(e)}}}function ut(t){let e,n,s,a,c,g,x,b,y,k,w,_,j,C,T,F,A,B,L,S,E,O=t[41].cost+"",W=t[2].stages[t[43]]?.damage.toFixed(0)+"",N=((t[2].stages[t[43]]?.damage||0)/t[41].cost).toFixed(0)+"",z=t[0],D=[];for(let e=0;e<z.length;e+=1)D[e]=rt(ct(t,z,e));function H(){t[27].call(e,t[42],t[43])}function K(){return t[28](t[43])}function I(){return t[29](t[43])}function P(){return t[30](t[43])}function q(){return t[31](t[43])}return{c(){e=f("select");for(let t=0;t<D.length;t+=1)D[t].c();n=p(),s=f("span"),a=d(O),c=p(),g=f("span"),x=d(W),b=p(),y=f("span"),k=d(N),w=p(),_=f("div"),j=f("button"),j.textContent="↑",C=p(),T=f("button"),T.textContent="↓",F=p(),A=f("button"),A.textContent="⎘",B=p(),L=f("button"),L.textContent="x",h(e,"class","svelte-1yftj6"),void 0===t[41]&&M(H),h(s,"class","svelte-1yftj6"),h(g,"class","svelte-1yftj6"),h(y,"class","svelte-1yftj6"),h(_,"class","operation svelte-1yftj6")},m(o,l){u(o,e,l);for(let t=0;t<D.length;t+=1)D[t].m(e,null);v(e,t[41]),u(o,n,l),u(o,s,l),r(s,a),u(o,c,l),u(o,g,l),r(g,x),u(o,b,l),u(o,y,l),r(y,k),u(o,w,l),u(o,_,l),r(_,j),r(_,C),r(_,T),r(_,F),r(_,A),r(_,B),r(_,L),S||(E=[m(e,"change",H),m(j,"click",K),m(T,"click",I),m(A,"click",P),m(L,"click",q)],S=!0)},p(n,o){if(t=n,1&o[0]){let n;for(z=t[0],n=0;n<z.length;n+=1){const s=ct(t,z,n);D[n]?D[n].p(s,o):(D[n]=rt(s),D[n].c(),D[n].m(e,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=z.length}3&o[0]&&v(e,t[41]),2&o[0]&&O!==(O=t[41].cost+"")&&$(a,O),4&o[0]&&W!==(W=t[2].stages[t[43]]?.damage.toFixed(0)+"")&&$(x,W),6&o[0]&&N!==(N=((t[2].stages[t[43]]?.damage||0)/t[41].cost).toFixed(0)+"")&&$(k,N)},d(t){t&&l(e),i(D,t),t&&l(n),t&&l(s),t&&l(c),t&&l(g),t&&l(b),t&&l(y),t&&l(w),t&&l(_),S=!1,o(E)}}}function lt(t){let e,n,o,s,a,c,i,g,x,v,b,y,k,w,_,j=t[38].name+"",C=t[38].cost+"",T=t[38].damage.toFixed(0)+"",F=t[38].cp.toFixed(0)+"";function M(){return t[36](t[38])}return{c(){e=f("span"),n=d(j),o=p(),s=f("span"),a=d(C),c=p(),i=f("span"),g=d(T),x=p(),v=f("span"),b=d(F),y=p(),k=f("button"),k.textContent="x",h(e,"class","svelte-1yftj6"),h(s,"class","svelte-1yftj6"),h(i,"class","svelte-1yftj6"),h(v,"class","svelte-1yftj6"),h(k,"class","svelte-1yftj6")},m(t,l){u(t,e,l),r(e,n),u(t,o,l),u(t,s,l),r(s,a),u(t,c,l),u(t,i,l),r(i,g),u(t,x,l),u(t,v,l),r(v,b),u(t,y,l),u(t,k,l),w||(_=m(k,"click",M),w=!0)},p(e,o){t=e,8&o[0]&&j!==(j=t[38].name+"")&&$(n,j),8&o[0]&&C!==(C=t[38].cost+"")&&$(a,C),8&o[0]&&T!==(T=t[38].damage.toFixed(0)+"")&&$(g,T),8&o[0]&&F!==(F=t[38].cp.toFixed(0)+"")&&$(b,F)},d(t){t&&l(e),t&&l(o),t&&l(s),t&&l(c),t&&l(i),t&&l(x),t&&l(v),t&&l(y),t&&l(k),w=!1,_()}}}function it(t){let e,n,s,a,c,v,b,y,k,w,j,C,T,F,M,B,L,S,E,O,I,P,q,J,Z,Q,R,V,X,Y,tt,et,nt,ot,ct,rt,it,ft,dt,pt,mt,ht,gt,$t,xt,vt,bt,yt,kt,wt,_t,jt,Ct,Tt,Ft,Mt,At,Bt,Lt,St,Et,Ot,Wt,Nt,zt,Dt,Ht,Kt,It,Pt,qt,Jt=t[2].summary.cost+"",Zt=t[2].summary.damage.toFixed(0)+"",Gt=t[2].summary.cp.toFixed(0)+"";s=new U({});let Qt=t[1],Rt=[];for(let e=0;e<Qt.length;e+=1)Rt[e]=ut(at(t,Qt,e));function Ut(e){t[32](e)}let Vt={field:"name",text:"Name"};function Xt(e){t[33](e)}void 0!==t[4]&&(Vt.method=t[4]),Ct=new G({props:Vt}),_.push((()=>z(Ct,"method",Ut)));let Yt={field:"cost",text:"Cost"};function te(e){t[34](e)}void 0!==t[4]&&(Yt.method=t[4]),Mt=new G({props:Yt}),_.push((()=>z(Mt,"method",Xt)));let ee={field:"damage",text:"Damage"};function ne(e){t[35](e)}void 0!==t[4]&&(ee.method=t[4]),Lt=new G({props:ee}),_.push((()=>z(Lt,"method",te)));let oe={field:"cp",text:"CP"};void 0!==t[4]&&(oe.method=t[4]),Ot=new G({props:oe}),_.push((()=>z(Ot,"method",ne)));let se=t[3],ae=[];for(let e=0;e<se.length;e+=1)ae[e]=lt(st(t,se,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=p(),D(s.$$.fragment),a=p(),c=f("div"),v=f("span"),v.textContent="力量",b=p(),y=f("input"),k=p(),w=f("span"),w.textContent="防禦",j=p(),C=f("input"),T=p(),F=f("span"),F.textContent="中毒發生次數",M=p(),B=f("input"),L=p(),S=f("label"),E=f("input"),O=p(),I=f("span"),I.textContent="使用武器後中毒（格蕾絲）",P=p(),q=f("h2"),q.textContent="Combo",J=p(),Z=f("div"),Q=f("span"),Q.textContent="Weapon",R=p(),V=f("span"),V.textContent="Cost",X=p(),Y=f("span"),Y.textContent="Damage",tt=p(),et=f("span"),et.textContent="CP",nt=p(),ot=f("span"),ct=p();for(let t=0;t<Rt.length;t+=1)Rt[t].c();rt=p(),it=f("span"),it.textContent="Summary",ft=p(),dt=f("span"),pt=d(Jt),mt=p(),ht=f("span"),gt=d(Zt),$t=p(),xt=f("span"),vt=d(Gt),bt=p(),yt=f("button"),yt.textContent="Add to compare list",kt=p(),wt=f("h2"),wt.textContent="Compare",_t=p(),jt=f("div"),D(Ct.$$.fragment),Ft=p(),D(Mt.$$.fragment),Bt=p(),D(Lt.$$.fragment),Et=p(),D(Ot.$$.fragment),Nt=p(),zt=f("span"),Dt=p();for(let t=0;t<ae.length;t+=1)ae[t].c();Ht=p(),Kt=f("footer"),Kt.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',h(y,"type","number"),h(C,"type","number"),h(B,"type","number"),h(E,"type","checkbox"),h(S,"class","cspan svelte-1yftj6"),h(c,"class","base-info svelte-1yftj6"),h(Q,"class","chead svelte-1yftj6"),h(V,"class","chead svelte-1yftj6"),h(Y,"class","chead svelte-1yftj6"),h(et,"class","chead svelte-1yftj6"),h(ot,"class","svelte-1yftj6"),h(it,"class","chead svelte-1yftj6"),h(dt,"class","svelte-1yftj6"),h(ht,"class","svelte-1yftj6"),h(xt,"class","svelte-1yftj6"),h(Z,"class","combo-table svelte-1yftj6"),h(zt,"class","svelte-1yftj6"),h(jt,"class","compare-list svelte-1yftj6"),h(Kt,"class","svelte-1yftj6")},m(o,l){u(o,e,l),u(o,n,l),H(s,o,l),u(o,a,l),u(o,c,l),r(c,v),r(c,b),r(c,y),x(y,t[8]),r(c,k),r(c,w),r(c,j),r(c,C),x(C,t[7]),r(c,T),r(c,F),r(c,M),r(c,B),x(B,t[6]),r(c,L),r(c,S),r(S,E),E.checked=t[5],r(S,O),r(S,I),u(o,P,l),u(o,q,l),u(o,J,l),u(o,Z,l),r(Z,Q),r(Z,R),r(Z,V),r(Z,X),r(Z,Y),r(Z,tt),r(Z,et),r(Z,nt),r(Z,ot),r(Z,ct);for(let t=0;t<Rt.length;t+=1)Rt[t].m(Z,null);r(Z,rt),r(Z,it),r(Z,ft),r(Z,dt),r(dt,pt),r(Z,mt),r(Z,ht),r(ht,gt),r(Z,$t),r(Z,xt),r(xt,vt),u(o,bt,l),u(o,yt,l),u(o,kt,l),u(o,wt,l),u(o,_t,l),u(o,jt,l),H(Ct,jt,null),r(jt,Ft),H(Mt,jt,null),r(jt,Bt),H(Lt,jt,null),r(jt,Et),H(Ot,jt,null),r(jt,Nt),r(jt,zt),r(jt,Dt);for(let t=0;t<ae.length;t+=1)ae[t].m(jt,null);u(o,Ht,l),u(o,Kt,l),It=!0,Pt||(qt=[m(y,"input",t[23]),m(C,"input",t[24]),m(B,"input",t[25]),m(E,"change",t[26]),m(yt,"click",t[18])],Pt=!0)},p(t,e){if(256&e[0]&&g(y.value)!==t[8]&&x(y,t[8]),128&e[0]&&g(C.value)!==t[7]&&x(C,t[7]),64&e[0]&&g(B.value)!==t[6]&&x(B,t[6]),32&e[0]&&(E.checked=t[5]),229383&e[0]){let n;for(Qt=t[1],n=0;n<Qt.length;n+=1){const o=at(t,Qt,n);Rt[n]?Rt[n].p(o,e):(Rt[n]=ut(o),Rt[n].c(),Rt[n].m(Z,rt))}for(;n<Rt.length;n+=1)Rt[n].d(1);Rt.length=Qt.length}(!It||4&e[0])&&Jt!==(Jt=t[2].summary.cost+"")&&$(pt,Jt),(!It||4&e[0])&&Zt!==(Zt=t[2].summary.damage.toFixed(0)+"")&&$(gt,Zt),(!It||4&e[0])&&Gt!==(Gt=t[2].summary.cp.toFixed(0)+"")&&$(vt,Gt);const n={};!Tt&&16&e[0]&&(Tt=!0,n.method=t[4],A((()=>Tt=!1))),Ct.$set(n);const o={};!At&&16&e[0]&&(At=!0,o.method=t[4],A((()=>At=!1))),Mt.$set(o);const s={};!St&&16&e[0]&&(St=!0,s.method=t[4],A((()=>St=!1))),Lt.$set(s);const a={};if(!Wt&&16&e[0]&&(Wt=!0,a.method=t[4],A((()=>Wt=!1))),Ot.$set(a),524296&e[0]){let n;for(se=t[3],n=0;n<se.length;n+=1){const o=st(t,se,n);ae[n]?ae[n].p(o,e):(ae[n]=lt(o),ae[n].c(),ae[n].m(jt,null))}for(;n<ae.length;n+=1)ae[n].d(1);ae.length=se.length}},i(t){It||(W(s.$$.fragment,t),W(Ct.$$.fragment,t),W(Mt.$$.fragment,t),W(Lt.$$.fragment,t),W(Ot.$$.fragment,t),It=!0)},o(t){N(s.$$.fragment,t),N(Ct.$$.fragment,t),N(Mt.$$.fragment,t),N(Lt.$$.fragment,t),N(Ot.$$.fragment,t),It=!1},d(t){t&&l(e),t&&l(n),K(s,t),t&&l(a),t&&l(c),t&&l(P),t&&l(q),t&&l(J),t&&l(Z),i(Rt,t),t&&l(bt),t&&l(yt),t&&l(kt),t&&l(wt),t&&l(_t),t&&l(jt),K(Ct),K(Mt),K(Lt),K(Ot),i(ae,t),t&&l(Ht),t&&l(Kt),Pt=!1,o(qt)}}}function ft(t,e,n){let o,s,a,r,u,l,{weapons:i,storeKey:f}=e;const d=Object.fromEntries(i.map((t=>[t.name,t]))),p=tt(`${f}/atk`,700);c(t,p,(t=>n(8,l=t)));const m=tt(`${f}/def`,400);c(t,m,(t=>n(7,u=t)));const h=tt(`${f}/poisonTurns`,99);c(t,h,(t=>n(6,r=t)));const $=tt(`${f}/poisonAfterWeapon`,!1);c(t,$,(t=>n(5,a=t)));const x=tt(`${f}/compareList`,i.map((t=>[t.name])));c(t,x,(t=>n(22,o=t)));const v=tt(`${f}/sortMethod`,{field:null,dir:1});c(t,v,(t=>n(4,s=t)));let b=[i[0]],y={stages:[],summary:{damage:0,cost:0,cp:0}},k=[],w=[];function _(t){b.splice(t,0,b[t]),n(1,b)}function j(t){b.length<=1||(b.splice(t,1),n(1,b))}function C(t,e){const o=b[t];b.splice(t,1),b.splice(t+e,0,o),n(1,b)}function T(t){o.splice(t,1),x.set(o)}return t.$$set=t=>{"weapons"in t&&n(0,i=t.weapons),"storeKey"in t&&n(20,f=t.storeKey)},t.$$.update=()=>{482&t.$$.dirty[0]&&n(2,y=nt({atk:l,def:u,weapons:b,poisonTurns:r,poisonAfterWeapon:a})),4194784&t.$$.dirty[0]&&n(21,k=o.map(((t,e)=>{const n=t.map((t=>d[t])),o=nt({atk:l,def:u,weapons:n,poisonTurns:r,poisonAfterWeapon:a});return{name:t.join("+"),cost:o.summary.cost,damage:o.summary.damage,cp:o.summary.cp,index:e}}))),2097176&t.$$.dirty[0]&&(n(3,w=k.slice()),s.field&&w.sort(((t,e)=>(t[s.field]<e[s.field]?-1:t[s.field]>e[s.field]?1:0)*s.dir)))},[i,b,y,w,s,a,r,u,l,p,m,h,$,x,v,_,j,C,function(){o.push(b.map((t=>t.name))),x.set(o)},T,f,k,o,function(){l=g(this.value),p.set(l)},function(){u=g(this.value),m.set(u)},function(){r=g(this.value),h.set(r)},function(){a=this.checked,$.set(a)},function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,b),n(0,i)},t=>C(t,-1),t=>C(t,1),t=>_(t),t=>j(t),function(t){s=t,v.set(s)},function(t){s=t,v.set(s)},function(t){s=t,v.set(s)},function(t){s=t,v.set(s)},t=>T(t.index)]}return{A:class extends q{constructor(t){super(),P(this,t,ft,it,a,{weapons:0,storeKey:20},null,[-1,-1])}}}}();
//# sourceMappingURL=App-296d1f47.js.map
