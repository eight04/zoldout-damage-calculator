var tomeC1501Cf4=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(t,e,n){return t.set(n),e}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function d(){return p(" ")}function g(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function k(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function b(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function $(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function x(t,e,n){t.classList[n?"add":"remove"](e)}let w;function T(t){w=t}const C=[],R=[],_=[],L=[],q=Promise.resolve();let F=!1;function A(t){_.push(t)}function S(t){L.push(t)}const B=new Set;let E=0;function W(){const t=w;do{for(;E<C.length;){const t=C[E];E++,T(t),H(t.$$)}for(T(null),C.length=0,E=0;R.length;)R.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];B.has(e)||(B.add(e),e())}_.length=0}while(C.length);for(;L.length;)L.pop()();F=!1,B.clear(),T(t)}function H(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const M=new Set;function D(t,e){t&&t.i&&(M.delete(t),t.i(e))}function O(t,e,n,s){if(t&&t.o){if(M.has(t))return;M.add(t),undefined.c.push((()=>{M.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function j(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function z(t){t&&t.c()}function I(t,n,a,i){const{fragment:r,on_mount:c,on_destroy:u,after_update:l}=t.$$;r&&r.m(n,a),i||A((()=>{const n=c.map(e).filter(o);u?u.push(...n):s(n),t.$$.on_mount=[]})),l.forEach(A)}function P(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(C.push(t),F||(F=!0,q.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,o,a,i,r,c,u,f=[-1]){const m=w;T(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(m?m.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||m.$$.root};u&&u(p.root);let d=!1;if(p.ctx=a?a(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),d&&N(e,t)),n})):[],p.update(),d=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();o.intro&&D(e.$$.fragment),I(e,o.target,o.anchor,o.customElement),W()}T(m)}class J{$destroy(){P(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Z(e){let n,s,o,a;return{c(){n=m("button"),s=p(e[2]),h(n,"class","svelte-19loasr"),x(n,"sorted",e[0].field===e[1]),x(n,"reversed",e[0].dir<0)},m(t,i){u(t,n,i),c(n,s),o||(a=g(n,"click",e[3]),o=!0)},p(t,[e]){4&e&&k(s,t[2]),3&e&&x(n,"sorted",t[0].field===t[1]),1&e&&x(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&l(n),o=!1,a()}}}function G(t,e,n){let{method:s,field:o,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,s=t.method),"field"in t&&n(1,o=t.field),"text"in t&&n(2,a=t.text)},[s,o,a,function(){s.field!==o?(n(0,s.field=o,s),n(0,s.dir=1,s)):n(0,s.dir*=-1,s)}]}class Q extends J{constructor(t){super(),K(this,t,G,Z,a,{method:0,field:1,text:2})}}const U=location.pathname.match(/([^/.]*)(\.html)?$/),V=U[1]&&"index"!==U[1]?U[1]:"sword";function X(e){let n,s,o,a,i,r,f,p;return{c(){n=m("ul"),s=m("li"),s.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',o=d(),a=m("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=d(),r=m("li"),r.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',f=d(),p=m("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',h(s,"class","svelte-116mxxw"),x(s,"active","sword"===V),h(a,"class","svelte-116mxxw"),x(a,"active","bow"===V),h(r,"class","svelte-116mxxw"),x(r,"active","wand"===V),h(p,"class","svelte-116mxxw"),x(p,"active","tome"===V),h(n,"class","svelte-116mxxw")},m(t,e){u(t,n,e),c(n,s),c(n,o),c(n,a),c(n,i),c(n,r),c(n,f),c(n,p)},p:t,i:t,o:t,d(t){t&&l(n)}}}class Y extends J{constructor(t){super(),K(this,t,null,X,a,{})}}const tt=[];const et="zoldout-damage-calculator",nt=new Map;function st(e,n){if(nt.has(e))return nt.get(e);const s=function(e,n=t){let s;const o=new Set;function i(t){if(a(e,t)&&(e=t,s)){const t=!tt.length;for(const t of o)t[1](),tt.push(t,e);if(t){for(let t=0;t<tt.length;t+=2)tt[t][0](tt[t+1]);tt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,r=t){const c=[a,r];return o.add(c),1===o.size&&(s=n(i)||t),a(e),()=>{o.delete(c),0===o.size&&(s(),s=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${et}/${e}`))??n);return s.subscribe((t=>localStorage.setItem(`${et}/${e}`,JSON.stringify(t)))),nt.set(e,s),s}var ot=[{name:"攻擊力增加（維羅尼卡）",type:"sword",beforeAll:t=>{t.buff.push({bonus:20,times:99})}},{name:"攻擊力增加（夏洛蒂）",type:"sword",beforeAll:t=>{t.buff.push({bonus:45,times:99})}},{name:"傷害後攻擊增加（艾莉諾拉）",type:"bow",afterHit:t=>{t.buff.push({bonus:5,times:99})}},{name:"第2+次傷害攻擊機率增加（艾莉諾拉）",type:"bow",afterHit:t=>{1===t.totalHit&&t.buff.push({bonus:21,times:99})}},{name:"使用武器後中毒（格蕾絲）",type:"bow",afterWeapon:(t,e)=>{t.hit&&!e.name.includes("奧義")&&t.poison.push({atk:300,turn:2,bonus:0})}},{name:"製造虛影（菲恩）",type:"bow",beforeAll:t=>{t.moves=0,t.isShadow=!1},afterWeapon:(t,e)=>{if("移動"===e.name)return void t.moves++;if(t.isShadow)return;let{atk:n,buff:s,cost:o,damage:a}=t;t.isShadow=!0,t.atk=1047,t.buff=[];for(let n=0;n<t.moves;n++)t.processWeapon(e),a+=t.damage;t.atk=n,t.buff=s,t.cost=o,t.isShadow=!1,t.damage=a}},{name:"傷害後點燃或額外傷害（艾娜）",type:"bow",afterHit:t=>{t.fire?t.damage+=360*t.getFireResist():(t.fire=!0,t.damage+=540*t.getFireResist())}},{name:"使用火武器後加速（歌莉雅）",type:"wand",afterWeapon:(t,e)=>{e.fire?.atk&&(t.cost-=2)}},{name:"著火時增傷、減抗（歌莉雅）",type:"buff",beforeHit:t=>{let e=t.targetBuff.find((t=>"goriya1"===t.id));e||(e={id:"goriya1",times:99},t.targetBuff.push(e)),e.injuryBonus=t.fire?10:0,e.fireResist=t.fire?-10:0}},{name:"大範圍武器加速、攻擊增加（聖樹梅米）",type:"wand",beforeWeapon:(t,e)=>{"large"===e.range&&(t.cost-=1,t.hit&&t.buff.push({bonus:10,times:1}))}},{name:"額外傷害（尤里+泳裝伊蓮）",type:"wand",afterWeapon:(t,e)=>{e.water&&(t.damage+=2*(900-t.getDef({atkType:"magic"})))}},{name:"魔攻增加（西比拉）",type:"wand",beforeWeapon:(t,e)=>{e.casting>=6&&t.hit&&t.buff.push({bonus:25,times:1})}},{name:"生命回復（塔尼亞）",type:"tome",afterWeapon:(t,e)=>{t.hit&&"heal"!==e.atkType||(t.damage+=360)}},{name:"加速（塔尼亞）",type:"tome",afterWeapon:(t,e)=>{(!t.hit&&e.buff||"heal"===e.atkType)&&t.cost--}}];const at={F:.85,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85,Ex:3.1};for(const t in at)at[`${t}0`]=at[t]-.1;class it{constructor({hp:t,atk:e,def:n,int:s,mdef:o,fireResist:a,waterResist:i,poisonResist:r,lightningResist:c,fire:u=!1,freeze:l=!1,poison:f=!1,poisonTurns:m,stance:p=0,maxTargets:d=1,passive:g}){this.hp=t,this.atk=e,this.def=n,this.int=s,this.mdef=o,this.fireResist=a,this.waterResist=i,this.poisonResist=r,this.lightningResist=c,this.poisonTurns=m,this.maxTargets=d,this.passive=g,this.damage=0,this.hit=0,this.totalHit=0,this.stance=p,this.totalHit=0,this.buff=[],this.targetBuff=[],this.targets=0,this.poison=f?[{atk:0,turn:99}]:[],this.lightning={},this.fire=u,this.freeze=l}clone(t={}){const e=new it({});return Object.assign(e,this,t),e}getDef(t){return ct(this,t)}getResist(t){return(100-(this[t]+this.targetBuff.reduce(((e,n)=>e+(n[t]||0)),0)))/100}getFireResist(){return this.getResist("fireResist")}getWaterResist(){return this.getResist("waterResist")}getPoisonResist(){return this.getResist("poisonResist")}getLightningResist(){return this.getResist("lightningResist")}getInjuryBonus(){return(this.targetBuff.reduce(((t,e)=>t+(e.injuryBonus||0)),0)+100)/100}getWaterAtk(t){return ut(this,t)}getFireAtk(t){return ut(this,t)}getLightningAtk(t){return ut(this,t)}getPoisonAtk(t){return ut(this,t)}processWeapon(t){return mt(this,t)}}function rt({weapons:t,passiveIds:e,...n}){const s=ot.filter(((t,n)=>e.includes(n))),o=[],a=new it({...n,passive:s});ft(a,null,"beforeAll");for(const e of t){const t=dt(a,e);o.push(t)}const i=o.reduce(((t,e)=>t+e.damage),0),r=o.reduce(((t,e)=>t+e.cost),0);return{stages:o,summary:{damage:i,cost:r,executeCost:Math.ceil(a.hp/i)*r,cp:i/r}}}function ct({def:t,mdef:e,targetBuff:n},{atkType:s}){return"heal"===s||"water"===s||"fire"===s||"poison"===s||"lightning"===s?0:"magic"===s?Math.max(e+n.reduce(((t,e)=>t+(e.mdef||0)),0),0):Math.max(t+n.reduce(((t,e)=>t+(e.def||0)),0),0)}function ut({atk:t,int:e,buff:n},{modType:s,modLv:o,atk:a=0,bonus:i=0}){const r="int"===s?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(o?r*function(t){if("number"==typeof t)return t;if(at[t])return at[t];throw new Error(`unknown modLv: ${t}`)}(o):0))*(i+100)/100}function lt({poison:t,poisonTurns:e,poisonResist:n}){let s=0;for(const o of t)o.atk&&(s+=o.atk*Math.min(o.turn,e)/o.turn*(100-n)/100);return s}function ft(t,e,n){t.passive.forEach((s=>s[n]?.(t,e))),e?.[n]?.(t,e)}function mt(t,e){t.cost=e.casting||e.cost,t.hit=e.hit||(e.atk||e.modLv?1:0),t.damage=0,t.targets=Math.min(t.maxTargets,e.targets||1);const n=ct(t,e),s=function(t,{atkType:e}){return"fire"===e?t.getFireResist():"water"===e?t.getWaterResist():"poison"===e?t.getPoisonResist():"lightning"===e?t.getLightningResist():1}(t,e);ft(t,e,"beforeWeapon");for(let o=0;o<t.hit;o++){ft(t,e,"beforeHit"),t.currentHit=o+1,t.totalHit++;let a=ut(t,e);a*=t.buff.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1),e.stance?.use===t.stance&&(a*=((e.stance.bonus||0)+100)/100),t.damage+=Math.max(a-n,1)*s*t.getInjuryBonus()*t.targets,t.lightning?.atk&&(t.damage+=t.lightning.atk*(100-t.lightningResist)/100*t.targets),ft(t,e,"afterHit")}if(t.hit&&(t.buff=t.buff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0)),t.targetBuff=t.targetBuff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0))),e.trap){const n=t.clone({passive:[],buff:[]});n.processWeapon(e.trap),t.damage+=n.damage}if(!e.fire||e.fire.cond&&!e.fire.cond(t)||(t.damage+=t.getFireAtk(e.fire)*t.getFireResist()*t.targets,e.fire.time&&(t.fire=!0)),!e.water||e.water.cond&&!e.water.cond(t)||(t.damage+=t.getWaterAtk(e.water)*(100-t.waterResist)/100*t.targets,e.water.time&&(t.freeze=!0)),e.lightning&&(!e.lightning.cond||e.lightning.cond(t))){const n=t.getLightningAtk(e.lightning);t.damage+=n*(100-t.lightningResist)/100*t.targets,(!t.lightning.atk||e.lightning.time>t.lightning.time)&&(t.lightning.atk=n,t.lightning.time=e.lightning.time)}if(e.poison&&(!e.poison.cond||e.poison.cond(t))){for(let n=0;n<t.targets;n++)t.poison.push({atk:t.getPoisonAtk(e.poison),turn:e.poison.turn,bonus:0});e.poison.bonus&&(t.poison=t.poison.map((t=>{const n=(t.bonus+100)*(e.poison.bonus+100)/100-100;return{...t,bonus:Math.min(n,200)}})))}e.buff&&pt(t.buff,e.buff),e.targetBuff&&pt(t.targetBuff,e.targetBuff),e.stance?.use===t.stance&&e.stance.buff&&pt(t.buff,e.stance.buff),null!=e.stance?.gain&&(t.stance=e.stance.gain),ft(t,e,"afterWeapon")}function pt(t,e){const n=new Map(t.map(((t,e)=>[t.id,e])));for(const s of e)s.id&&n.has(s.id)?t[n.get(s.id)]=s:t.push(s)}function dt(t,e){const n=lt(t);return mt(t,e),t.damage+=lt(t)-n,{damage:t.damage,cost:t.cost}}var gt=[{name:"星光帝王蟹",def:999999,mdef:999999,fireResist:-100,waterResist:99,poisonResist:99,lightningResist:-100}];function ht(t,e,n){const s=t.slice();return s[81]=e[n],s}function yt(t,e,n){const s=t.slice();return s[84]=e[n],s[85]=e,s[86]=n,s}function kt(t,e,n){const s=t.slice();return s[87]=e[n],s}function vt(t,e,n){const s=t.slice();return s[90]=e[n],s[86]=n,s}function bt(t,e,n){const s=t.slice();return s[92]=e[n],s}function $t(e){let n,s,o=e[92].name+"";return{c(){n=m("option"),s=p(o),n.__value=e[92],n.value=n.__value},m(t,e){u(t,n,e),c(n,s)},p:t,d(t){t&&l(n)}}}function xt(t){let e,n=(V===t[90].type||"buff"===t[90].type)&&function(t){let e,n,s,o,a,i,r,f,y=t[90].name+"";return{c(){e=m("label"),n=m("input"),s=d(),o=m("span"),a=p(y),i=d(),h(n,"type","checkbox"),n.__value=t[86],n.value=n.__value,t[68][0].push(n),h(e,"class","cspan svelte-yq4ypk")},m(l,m){u(l,e,m),c(e,n),n.checked=~t[12].indexOf(n.__value),c(e,s),c(e,o),c(o,a),c(e,i),r||(f=g(n,"change",t[67]),r=!0)},p(t,e){4096&e[0]&&(n.checked=~t[12].indexOf(n.__value))},d(s){s&&l(e),t[68][0].splice(t[68][0].indexOf(n),1),r=!1,f()}}}(t);return{c(){n&&n.c(),e=p("")},m(t,s){n&&n.m(t,s),u(t,e,s)},p(t,e){V!==t[90].type&&"buff"!==t[90].type||n.p(t,e)},d(t){n&&n.d(t),t&&l(e)}}}function wt(t){let e,n,s,o=t[87].name+"";return{c(){e=m("option"),n=p(o),e.__value=s=t[87],e.value=e.__value},m(t,s){u(t,e,s),c(e,n)},p(t,a){1&a[0]&&o!==(o=t[87].name+"")&&k(n,o),1&a[0]&&s!==(s=t[87])&&(e.__value=s,e.value=e.__value)},d(t){t&&l(e)}}}function Tt(t){let e,n,o,a,i,r,y,v,$,x,w,T,C,R,_,L,q,F,S,B,E,W=t[2].stages[t[86]]?.cost+"",H=t[2].stages[t[86]]?.damage.toFixed(0)+"",M=((t[2].stages[t[86]]?.damage||0)/t[2].stages[t[86]]?.cost).toFixed(0)+"",D=t[0],O=[];for(let e=0;e<D.length;e+=1)O[e]=wt(kt(t,D,e));function j(){t[69].call(e,t[85],t[86])}function z(){return t[70](t[86])}function I(){return t[71](t[86])}function P(){return t[72](t[86])}function N(){return t[73](t[86])}return{c(){e=m("select");for(let t=0;t<O.length;t+=1)O[t].c();n=d(),o=m("span"),a=p(W),i=d(),r=m("span"),y=p(H),v=d(),$=m("span"),x=p(M),w=d(),T=m("div"),C=m("button"),C.textContent="↑",R=d(),_=m("button"),_.textContent="↓",L=d(),q=m("button"),q.textContent="⎘",F=d(),S=m("button"),S.textContent="x",h(e,"class","svelte-yq4ypk"),void 0===t[84]&&A(j),h(o,"class","svelte-yq4ypk"),h(r,"class","svelte-yq4ypk"),h($,"class","svelte-yq4ypk"),h(T,"class","operation svelte-yq4ypk")},m(s,l){u(s,e,l);for(let t=0;t<O.length;t+=1)O[t].m(e,null);b(e,t[84]),u(s,n,l),u(s,o,l),c(o,a),u(s,i,l),u(s,r,l),c(r,y),u(s,v,l),u(s,$,l),c($,x),u(s,w,l),u(s,T,l),c(T,C),c(T,R),c(T,_),c(T,L),c(T,q),c(T,F),c(T,S),B||(E=[g(e,"change",j),g(C,"click",z),g(_,"click",I),g(q,"click",P),g(S,"click",N)],B=!0)},p(n,s){if(t=n,1&s[0]){let n;for(D=t[0],n=0;n<D.length;n+=1){const o=kt(t,D,n);O[n]?O[n].p(o,s):(O[n]=wt(o),O[n].c(),O[n].m(e,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=D.length}3&s[0]&&b(e,t[84]),4&s[0]&&W!==(W=t[2].stages[t[86]]?.cost+"")&&k(a,W),4&s[0]&&H!==(H=t[2].stages[t[86]]?.damage.toFixed(0)+"")&&k(y,H),4&s[0]&&M!==(M=((t[2].stages[t[86]]?.damage||0)/t[2].stages[t[86]]?.cost).toFixed(0)+"")&&k(x,M)},d(t){t&&l(e),f(O,t),t&&l(n),t&&l(o),t&&l(i),t&&l(r),t&&l(v),t&&l($),t&&l(w),t&&l(T),B=!1,s(E)}}}function Ct(t){let e,n,s,o,a,i,r,f,y,v,b,$,x,w,T,C,R,_,L=t[81].name+"",q=t[81].cost+"",F=t[81].damage.toFixed(0)+"",A=t[81].cp.toFixed(0)+"",S=t[81].executeCost+"";function B(){return t[79](t[81])}return{c(){e=m("span"),n=p(L),s=d(),o=m("span"),a=p(q),i=d(),r=m("span"),f=p(F),y=d(),v=m("span"),b=p(A),$=d(),x=m("span"),w=p(S),T=d(),C=m("button"),C.textContent="x",h(e,"class","svelte-yq4ypk"),h(o,"class","svelte-yq4ypk"),h(r,"class","svelte-yq4ypk"),h(v,"class","svelte-yq4ypk"),h(x,"class","svelte-yq4ypk"),h(C,"class","svelte-yq4ypk")},m(t,l){u(t,e,l),c(e,n),u(t,s,l),u(t,o,l),c(o,a),u(t,i,l),u(t,r,l),c(r,f),u(t,y,l),u(t,v,l),c(v,b),u(t,$,l),u(t,x,l),c(x,w),u(t,T,l),u(t,C,l),R||(_=g(C,"click",B),R=!0)},p(e,s){t=e,8&s[0]&&L!==(L=t[81].name+"")&&k(n,L),8&s[0]&&q!==(q=t[81].cost+"")&&k(a,q),8&s[0]&&F!==(F=t[81].damage.toFixed(0)+"")&&k(f,F),8&s[0]&&A!==(A=t[81].cp.toFixed(0)+"")&&k(b,A),8&s[0]&&S!==(S=t[81].executeCost+"")&&k(w,S)},d(t){t&&l(e),t&&l(s),t&&l(o),t&&l(i),t&&l(r),t&&l(y),t&&l(v),t&&l($),t&&l(x),t&&l(T),t&&l(C),R=!1,_()}}}function Rt(t){let e,n,o,a,i,r,$,x,w,T,C,_,L,q,F,B,E,W,H,M,N,K,J,Z,G,U,V,X,tt,et,nt,st,at,it,rt,ct,ut,lt,ft,mt,pt,dt,kt,wt,Rt,_t,Lt,qt,Ft,At,St,Bt,Et,Wt,Ht,Mt,Dt,Ot,jt,zt,It,Pt,Nt,Kt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,se,oe,ae,ie,re,ce,ue,le,fe,me,pe,de,ge,he,ye,ke,ve,be,$e,xe,we,Te,Ce,Re,_e,Le,qe,Fe,Ae,Se,Be,Ee,We,He,Me,De,Oe,je,ze,Ie,Pe,Ne,Ke,Je,Ze,Ge,Qe,Ue,Ve,Xe,Ye,tn,en,nn,sn,on,an=t[2].summary.cost+"",rn=t[2].summary.damage.toFixed(0)+"",cn=t[2].summary.cp.toFixed(0)+"";o=new Y({});let un=gt,ln=[];for(let e=0;e<un.length;e+=1)ln[e]=$t(bt(t,un,e));let fn=ot,mn=[];for(let e=0;e<fn.length;e+=1)mn[e]=xt(vt(t,fn,e));let pn=t[1],dn=[];for(let e=0;e<pn.length;e+=1)dn[e]=Tt(yt(t,pn,e));function gn(e){t[74](e)}let hn={field:"name",text:"Name"};function yn(e){t[75](e)}void 0!==t[11]&&(hn.method=t[11]),Me=new Q({props:hn}),R.push((()=>j(Me,"method",gn)));let kn={field:"cost",text:"Cost"};function vn(e){t[76](e)}void 0!==t[11]&&(kn.method=t[11]),je=new Q({props:kn}),R.push((()=>j(je,"method",yn)));let bn={field:"damage",text:"Damage"};function $n(e){t[77](e)}void 0!==t[11]&&(bn.method=t[11]),Pe=new Q({props:bn}),R.push((()=>j(Pe,"method",vn)));let xn={field:"cp",text:"CP"};function wn(e){t[78](e)}void 0!==t[11]&&(xn.method=t[11]),Je=new Q({props:xn}),R.push((()=>j(Je,"method",$n)));let Tn={field:"executeCost",text:"斬殺Cost"};void 0!==t[11]&&(Tn.method=t[11]),Qe=new Q({props:Tn}),R.push((()=>j(Qe,"method",wn)));let Cn=t[3],Rn=[];for(let e=0;e<Cn.length;e+=1)Rn[e]=Ct(ht(t,Cn,e));return{c(){e=m("h1"),e.textContent="Zold:Out Damage Calculator",n=d(),z(o.$$.fragment),a=d(),i=m("div"),r=m("span"),r.textContent="載入預設敵人",$=d(),x=m("select");for(let t=0;t<ln.length;t+=1)ln[t].c();w=d(),T=m("button"),T.textContent="Apply",C=d(),_=m("div"),L=m("span"),L.textContent="血量",q=d(),F=m("input"),B=d(),E=m("span"),E.textContent="力量",W=d(),H=m("input"),M=d(),N=m("span"),N.textContent="防禦",K=d(),J=m("input"),Z=d(),G=m("span"),G.textContent="智力",U=d(),V=m("input"),X=d(),tt=m("span"),tt.textContent="魔防",et=d(),nt=m("input"),st=d(),at=m("span"),at.textContent="火抗",it=d(),rt=m("input"),ct=d(),ut=m("span"),ut.textContent="水抗",lt=d(),ft=m("input"),mt=d(),pt=m("span"),pt.textContent="毒抗",dt=d(),kt=m("input"),wt=d(),Rt=m("span"),Rt.textContent="雷抗",_t=d(),Lt=m("input"),qt=d(),Ft=m("label"),At=m("input"),St=d(),Bt=m("span"),Bt.textContent="敵人凍結",Et=d(),Wt=m("label"),Ht=m("input"),Mt=d(),Dt=m("span"),Dt.textContent="敵人著火",Ot=d(),jt=m("label"),zt=m("input"),It=d(),Pt=m("span"),Pt.textContent="敵人中毒",Nt=d(),Kt=m("label"),Jt=m("input"),Zt=d(),Gt=m("span"),Gt.textContent="敵人觸電",Qt=d(),Ut=m("span"),Ut.textContent="中毒發生次數",Vt=d(),Xt=m("input"),Yt=d(),te=m("span"),te.textContent="當前架勢",ee=d(),ne=m("input"),se=d();for(let t=0;t<mn.length;t+=1)mn[t].c();oe=d(),ae=m("h2"),ae.textContent="Combo",ie=d(),re=m("div"),ce=m("span"),ce.textContent="Weapon",ue=d(),le=m("span"),le.textContent="Cost",fe=d(),me=m("span"),me.textContent="Damage",pe=d(),de=m("span"),de.textContent="CP",ge=d(),he=m("span"),ye=d();for(let t=0;t<dn.length;t+=1)dn[t].c();ke=d(),ve=m("span"),ve.textContent="Summary",be=d(),$e=m("span"),xe=p(an),we=d(),Te=m("span"),Ce=p(rn),Re=d(),_e=m("span"),Le=p(cn),qe=d(),Fe=m("button"),Fe.textContent="Add to compare list",Ae=d(),Se=m("h2"),Se.textContent="Compare",Be=d(),Ee=m("button"),Ee.textContent="Add all weapons",We=d(),He=m("div"),z(Me.$$.fragment),Oe=d(),z(je.$$.fragment),Ie=d(),z(Pe.$$.fragment),Ke=d(),z(Je.$$.fragment),Ge=d(),z(Qe.$$.fragment),Ve=d(),Xe=m("span"),Ye=d();for(let t=0;t<Rn.length;t+=1)Rn[t].c();tn=d(),en=m("footer"),en.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',void 0===t[21]&&A((()=>t[51].call(x))),h(i,"class","enemy-preset svelte-yq4ypk"),h(F,"type","number"),h(F,"class","cspan3 svelte-yq4ypk"),h(H,"type","number"),h(J,"type","number"),h(V,"type","number"),h(nt,"type","number"),h(rt,"type","number"),h(ft,"type","number"),h(kt,"type","number"),h(Lt,"type","number"),h(At,"type","checkbox"),h(Ft,"class","cspan svelte-yq4ypk"),h(Ht,"type","checkbox"),h(Wt,"class","cspan svelte-yq4ypk"),h(zt,"type","checkbox"),h(jt,"class","cspan svelte-yq4ypk"),h(Jt,"type","checkbox"),h(Kt,"class","cspan svelte-yq4ypk"),h(Xt,"type","number"),h(ne,"type","number"),h(_,"class","base-info svelte-yq4ypk"),h(ce,"class","chead svelte-yq4ypk"),h(le,"class","chead svelte-yq4ypk"),h(me,"class","chead svelte-yq4ypk"),h(de,"class","chead svelte-yq4ypk"),h(he,"class","operation svelte-yq4ypk"),h(ve,"class","chead svelte-yq4ypk"),h($e,"class","svelte-yq4ypk"),h(Te,"class","svelte-yq4ypk"),h(_e,"class","svelte-yq4ypk"),h(re,"class","combo-table svelte-yq4ypk"),h(Xe,"class","svelte-yq4ypk"),h(He,"class","compare-list svelte-yq4ypk"),h(en,"class","svelte-yq4ypk")},m(s,l){u(s,e,l),u(s,n,l),I(o,s,l),u(s,a,l),u(s,i,l),c(i,r),c(i,$),c(i,x);for(let t=0;t<ln.length;t+=1)ln[t].m(x,null);b(x,t[21]),c(i,w),c(i,T),u(s,C,l),u(s,_,l),c(_,L),c(_,q),c(_,F),v(F,t[10]),c(_,B),c(_,E),c(_,W),c(_,H),v(H,t[20]),c(_,M),c(_,N),c(_,K),c(_,J),v(J,t[9]),c(_,Z),c(_,G),c(_,U),c(_,V),v(V,t[19]),c(_,X),c(_,tt),c(_,et),c(_,nt),v(nt,t[8]),c(_,st),c(_,at),c(_,it),c(_,rt),v(rt,t[7]),c(_,ct),c(_,ut),c(_,lt),c(_,ft),v(ft,t[6]),c(_,mt),c(_,pt),c(_,dt),c(_,kt),v(kt,t[5]),c(_,wt),c(_,Rt),c(_,_t),c(_,Lt),v(Lt,t[4]),c(_,qt),c(_,Ft),c(Ft,At),At.checked=t[17],c(Ft,St),c(Ft,Bt),c(_,Et),c(_,Wt),c(Wt,Ht),Ht.checked=t[18],c(Wt,Mt),c(Wt,Dt),c(_,Ot),c(_,jt),c(jt,zt),zt.checked=t[16],c(jt,It),c(jt,Pt),c(_,Nt),c(_,Kt),c(Kt,Jt),Jt.checked=t[15],c(Kt,Zt),c(Kt,Gt),c(_,Qt),c(_,Ut),c(_,Vt),c(_,Xt),v(Xt,t[14]),c(_,Yt),c(_,te),c(_,ee),c(_,ne),v(ne,t[13]),c(_,se);for(let t=0;t<mn.length;t+=1)mn[t].m(_,null);u(s,oe,l),u(s,ae,l),u(s,ie,l),u(s,re,l),c(re,ce),c(re,ue),c(re,le),c(re,fe),c(re,me),c(re,pe),c(re,de),c(re,ge),c(re,he),c(re,ye);for(let t=0;t<dn.length;t+=1)dn[t].m(re,null);c(re,ke),c(re,ve),c(re,be),c(re,$e),c($e,xe),c(re,we),c(re,Te),c(Te,Ce),c(re,Re),c(re,_e),c(_e,Le),u(s,qe,l),u(s,Fe,l),u(s,Ae,l),u(s,Se,l),u(s,Be,l),u(s,Ee,l),u(s,We,l),u(s,He,l),I(Me,He,null),c(He,Oe),I(je,He,null),c(He,Ie),I(Pe,He,null),c(He,Ke),I(Je,He,null),c(He,Ge),I(Qe,He,null),c(He,Ve),c(He,Xe),c(He,Ye);for(let t=0;t<Rn.length;t+=1)Rn[t].m(He,null);u(s,tn,l),u(s,en,l),nn=!0,sn||(on=[g(x,"change",t[51]),g(T,"click",t[40]),g(F,"input",t[52]),g(H,"input",t[53]),g(J,"input",t[54]),g(V,"input",t[55]),g(nt,"input",t[56]),g(rt,"input",t[57]),g(ft,"input",t[58]),g(kt,"input",t[59]),g(Lt,"input",t[60]),g(At,"change",t[61]),g(Ht,"change",t[62]),g(zt,"change",t[63]),g(Jt,"change",t[64]),g(Xt,"input",t[65]),g(ne,"input",t[66]),g(Fe,"click",t[44]),g(Ee,"click",t[46])],sn=!0)},p(t,e){if(0&e){let n;for(un=gt,n=0;n<un.length;n+=1){const s=bt(t,un,n);ln[n]?ln[n].p(s,e):(ln[n]=$t(s),ln[n].c(),ln[n].m(x,null))}for(;n<ln.length;n+=1)ln[n].d(1);ln.length=un.length}if(2097152&e[0]&&b(x,t[21]),1024&e[0]&&y(F.value)!==t[10]&&v(F,t[10]),1048576&e[0]&&y(H.value)!==t[20]&&v(H,t[20]),512&e[0]&&y(J.value)!==t[9]&&v(J,t[9]),524288&e[0]&&y(V.value)!==t[19]&&v(V,t[19]),256&e[0]&&y(nt.value)!==t[8]&&v(nt,t[8]),128&e[0]&&y(rt.value)!==t[7]&&v(rt,t[7]),64&e[0]&&y(ft.value)!==t[6]&&v(ft,t[6]),32&e[0]&&y(kt.value)!==t[5]&&v(kt,t[5]),16&e[0]&&y(Lt.value)!==t[4]&&v(Lt,t[4]),131072&e[0]&&(At.checked=t[17]),262144&e[0]&&(Ht.checked=t[18]),65536&e[0]&&(zt.checked=t[16]),32768&e[0]&&(Jt.checked=t[15]),16384&e[0]&&y(Xt.value)!==t[14]&&v(Xt,t[14]),8192&e[0]&&y(ne.value)!==t[13]&&v(ne,t[13]),4096&e[0]){let n;for(fn=ot,n=0;n<fn.length;n+=1){const s=vt(t,fn,n);mn[n]?mn[n].p(s,e):(mn[n]=xt(s),mn[n].c(),mn[n].m(_,null))}for(;n<mn.length;n+=1)mn[n].d(1);mn.length=fn.length}if(7&e[0]|7168&e[1]){let n;for(pn=t[1],n=0;n<pn.length;n+=1){const s=yt(t,pn,n);dn[n]?dn[n].p(s,e):(dn[n]=Tt(s),dn[n].c(),dn[n].m(re,ke))}for(;n<dn.length;n+=1)dn[n].d(1);dn.length=pn.length}(!nn||4&e[0])&&an!==(an=t[2].summary.cost+"")&&k(xe,an),(!nn||4&e[0])&&rn!==(rn=t[2].summary.damage.toFixed(0)+"")&&k(Ce,rn),(!nn||4&e[0])&&cn!==(cn=t[2].summary.cp.toFixed(0)+"")&&k(Le,cn);const n={};!De&&2048&e[0]&&(De=!0,n.method=t[11],S((()=>De=!1))),Me.$set(n);const s={};!ze&&2048&e[0]&&(ze=!0,s.method=t[11],S((()=>ze=!1))),je.$set(s);const o={};!Ne&&2048&e[0]&&(Ne=!0,o.method=t[11],S((()=>Ne=!1))),Pe.$set(o);const a={};!Ze&&2048&e[0]&&(Ze=!0,a.method=t[11],S((()=>Ze=!1))),Je.$set(a);const i={};if(!Ue&&2048&e[0]&&(Ue=!0,i.method=t[11],S((()=>Ue=!1))),Qe.$set(i),8&e[0]|16384&e[1]){let n;for(Cn=t[3],n=0;n<Cn.length;n+=1){const s=ht(t,Cn,n);Rn[n]?Rn[n].p(s,e):(Rn[n]=Ct(s),Rn[n].c(),Rn[n].m(He,null))}for(;n<Rn.length;n+=1)Rn[n].d(1);Rn.length=Cn.length}},i(t){nn||(D(o.$$.fragment,t),D(Me.$$.fragment,t),D(je.$$.fragment,t),D(Pe.$$.fragment,t),D(Je.$$.fragment,t),D(Qe.$$.fragment,t),nn=!0)},o(t){O(o.$$.fragment,t),O(Me.$$.fragment,t),O(je.$$.fragment,t),O(Pe.$$.fragment,t),O(Je.$$.fragment,t),O(Qe.$$.fragment,t),nn=!1},d(t){t&&l(e),t&&l(n),P(o,t),t&&l(a),t&&l(i),f(ln,t),t&&l(C),t&&l(_),f(mn,t),t&&l(oe),t&&l(ae),t&&l(ie),t&&l(re),f(dn,t),t&&l(qe),t&&l(Fe),t&&l(Ae),t&&l(Se),t&&l(Be),t&&l(Ee),t&&l(We),t&&l(He),P(Me),P(je),P(Pe),P(Je),P(Qe),f(Rn,t),t&&l(tn),t&&l(en),sn=!1,s(on)}}}function _t(t,e,n){let s,o,a,c,u,l,f,m,p,d,g,h,k,v,b,x,w,T,{weapons:C,storeKey:R}=e;C.unshift({name:"移動",cost:"sword"===V?1:2});const _=Object.fromEntries(C.map((t=>[t.name,t]))),L=st(`${R}/atk`,700);i(t,L,(t=>n(20,T=t)));const q=st("comm/def",200);i(t,q,(t=>n(9,f=t)));const F=st(`${R}/int`,700);i(t,F,(t=>n(19,w=t)));const A=st("comm/mdef",200);i(t,A,(t=>n(8,l=t)));const S=st("comm/hp",2736);i(t,S,(t=>n(10,m=t)));const B=st("comm/fireResist",0);i(t,B,(t=>n(7,u=t)));const E=st("comm/waterResist",0);i(t,E,(t=>n(6,c=t)));const W=st("comm/poisonResist",0);i(t,W,(t=>n(5,a=t)));const H=st("comm/lightningResist",0);i(t,H,(t=>n(4,o=t)));const M=st("comm/fire",!1);i(t,M,(t=>n(18,x=t)));const D=st("comm/freeze",!1);i(t,D,(t=>n(17,b=t)));const O=st("comm/poison",!1);i(t,O,(t=>n(16,v=t)));const j=st("comm/lightning",!1);i(t,j,(t=>n(15,k=t)));const z=st(`${R}/poisonTurns`,99);i(t,z,(t=>n(14,h=t)));const I=st(`${R}/stance`,0);i(t,I,(t=>n(13,g=t)));const P=st(`${R}/passiveIds`,[]);i(t,P,(t=>n(12,d=t)));const N=st(`${R}/compareList`,[]);i(t,N,(t=>n(50,s=t)));const K=st(`${R}/sortMethod`,{field:null,dir:1});let J;i(t,K,(t=>n(11,p=t)));let Z=[C[0]],G={stages:[],summary:{damage:0,cost:0,cp:0}},Q=[],U=[],X={};function Y(t){Z.splice(t,0,Z[t]),n(1,Z)}function tt(t){Z.length<=1||(Z.splice(t,1),n(1,Z))}function et(t,e){const s=Z[t];Z.splice(t,1),Z.splice(t+e,0,s),n(1,Z)}function nt(t){s.splice(t,1),N.set(s)}const ot=[[]];return t.$$set=t=>{"weapons"in t&&n(0,C=t.weapons),"storeKey"in t&&n(47,R=t.storeKey)},t.$$.update=()=>{2095088&t.$$.dirty[0]&&n(49,X={hp:m,atk:T,def:f,int:w,mdef:l,fire:x,freeze:b,poison:v,lightning:k,poisonTurns:h,stance:g,passiveIds:d,fireResist:u,waterResist:c,poisonResist:a,lightningResist:o}),2&t.$$.dirty[0]|262144&t.$$.dirty[1]&&n(2,G=rt({...X,weapons:Z})),786432&t.$$.dirty[1]&&n(48,Q=s.map(((t,e)=>{const n=t.map((t=>_[t])),s=rt({...X,weapons:n});return{name:t.join("+"),index:e,...s.summary}}))),2056&t.$$.dirty[0]|131072&t.$$.dirty[1]&&(n(3,U=Q.slice()),p.field&&U.sort(((t,e)=>(t[p.field]<e[p.field]?-1:t[p.field]>e[p.field]?1:0)*p.dir)))},[C,Z,G,U,o,a,c,u,l,f,m,p,d,g,h,k,v,b,x,w,T,J,L,q,F,A,S,B,E,W,H,M,D,O,j,z,I,P,N,K,function(){r(S,m=J.hp||0,m),r(q,f=J.def||0,f),r(A,l=J.mdef||0,l),r(B,u=J.fireResist||0,u),r(E,c=J.waterResist||0,c),r(W,a=J.poisonResist||0,a),r(H,o=J.lightningResist||0,o)},Y,tt,et,function(){s.push(Z.map((t=>t.name))),N.set(s)},nt,function(){const t=new Set(s.map((t=>t[0])));for(const e of C)t.has(e.name)||s.push([e.name]);N.set(s)},R,Q,X,s,function(){J=$(this),n(21,J)},function(){m=y(this.value),S.set(m)},function(){T=y(this.value),L.set(T)},function(){f=y(this.value),q.set(f)},function(){w=y(this.value),F.set(w)},function(){l=y(this.value),A.set(l)},function(){u=y(this.value),B.set(u)},function(){c=y(this.value),E.set(c)},function(){a=y(this.value),W.set(a)},function(){o=y(this.value),H.set(o)},function(){b=this.checked,D.set(b)},function(){x=this.checked,M.set(x)},function(){v=this.checked,O.set(v)},function(){k=this.checked,j.set(k)},function(){h=y(this.value),z.set(h)},function(){g=y(this.value),I.set(g)},function(){d=function(t,e,n){const s=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&s.add(t[e].__value);return n||s.delete(e),Array.from(s)}(ot[0],this.__value,this.checked),P.set(d)},ot,function(t,e){t[e]=$(this),n(1,Z),n(0,C)},t=>et(t,-1),t=>et(t,1),t=>Y(t),t=>tt(t),function(t){p=t,K.set(p)},function(t){p=t,K.set(p)},function(t){p=t,K.set(p)},function(t){p=t,K.set(p)},function(t){p=t,K.set(p)},t=>nt(t.index)]}const Lt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int",targets:99},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"聖樹祭慶祝指南",cost:5,grade:3,atk:50,atkType:"heal",modLv:"C",modType:"int",buff:[{def:250,times:99}]},{name:"夏洛蒂自傳",cost:5,grade:3,atk:350,atkType:"magic",modLv:"C",modType:"str"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"航海指南",cost:4,atk:220,atkType:"heal",modLv:"C",modType:"int"},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str",fire:{modLv:1.31,modType:"int",time:5}},{name:"眾神之怒",cost:3,grade:4,buff:[{bonus:30,times:1}]},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]},{name:"腥紅海鯊後援團守則",cost:7,grade:4,atk:280,atkType:"heal",modLv:"C",modType:"int",targets:99}],qt=Lt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends J{constructor(t){super(),K(this,t,_t,Rt,a,{weapons:0,storeKey:47},null,[-1,-1,-1,-1])}},b:qt,w:Lt}}();
//# sourceMappingURL=tome-c1501cf4.js.map
