var tome042D967B=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function x(t,e,n){t.classList[n?"add":"remove"](e)}let b;function k(t){b=t}const w=[],T=[],_=[],C=[],L=Promise.resolve();let R=!1;function B(t){_.push(t)}function F(t){C.push(t)}const E=new Set;let S=0;function D(){const t=b;do{for(;S<w.length;){const t=w[S];S++,k(t),H(t.$$)}for(k(null),w.length=0,S=0;T.length;)T.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];E.has(e)||(E.add(e),e())}_.length=0}while(w.length);for(;C.length;)C.pop()();R=!1,E.clear(),k(t)}function H(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const M=new Set;function O(t,e){t&&t.i&&(M.delete(t),t.i(e))}function j(t,e,n,s){if(t&&t.o){if(M.has(t))return;M.add(t),undefined.c.push((()=>{M.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function A(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function I(t){t&&t.c()}function N(t,n,a,i){const{fragment:r,on_mount:c,on_destroy:u,after_update:l}=t.$$;r&&r.m(n,a),i||B((()=>{const n=c.map(e).filter(o);u?u.push(...n):s(n),t.$$.on_mount=[]})),l.forEach(B)}function z(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(w.push(t),R||(R=!0,L.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,o,a,i,r,c,l,f=[-1]){const d=b;k(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};l&&l(m.root);let p=!1;if(m.ctx=a?a(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return m.ctx&&r(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),p&&W(e,t)),n})):[],m.update(),p=!0,s(m.before_update),m.fragment=!!i&&i(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();o.intro&&O(e.$$.fragment),N(e,o.target,o.anchor,o.customElement),D()}k(d)}class P{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q(e){let n,s,o,a;return{c(){n=f("button"),s=d(e[2]),g(n,"class","svelte-19loasr"),x(n,"sorted",e[0].field===e[1]),x(n,"reversed",e[0].dir<0)},m(t,i){c(t,n,i),r(n,s),o||(a=p(n,"click",e[3]),o=!0)},p(t,[e]){4&e&&v(s,t[2]),3&e&&x(n,"sorted",t[0].field===t[1]),1&e&&x(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&u(n),o=!1,a()}}}function J(t,e,n){let{method:s,field:o,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,s=t.method),"field"in t&&n(1,o=t.field),"text"in t&&n(2,a=t.text)},[s,o,a,function(){s.field!==o?(n(0,s.field=o,s),n(0,s.dir=1,s)):n(0,s.dir*=-1,s)}]}class Z extends P{constructor(t){super(),K(this,t,J,q,a,{method:0,field:1,text:2})}}const G=location.pathname.match(/([^/.]*)(\.html)?$/),Q=G[1]&&"index"!==G[1]?G[1]:"sword";function U(e){let n,s,o,a,i,l,d,p;return{c(){n=f("ul"),s=f("li"),s.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',o=m(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=m(),l=f("li"),l.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=m(),p=f("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',g(s,"class","svelte-116mxxw"),x(s,"active","sword"===Q),g(a,"class","svelte-116mxxw"),x(a,"active","bow"===Q),g(l,"class","svelte-116mxxw"),x(l,"active","wand"===Q),g(p,"class","svelte-116mxxw"),x(p,"active","tome"===Q),g(n,"class","svelte-116mxxw")},m(t,e){c(t,n,e),r(n,s),r(n,o),r(n,a),r(n,i),r(n,l),r(n,d),r(n,p)},p:t,i:t,o:t,d(t){t&&u(n)}}}class V extends P{constructor(t){super(),K(this,t,null,U,a,{})}}const X=[];const Y="zoldout-damage-calculator",tt=new Map;function et(e,n){if(tt.has(e))return tt.get(e);const s=function(e,n=t){let s;const o=new Set;function i(t){if(a(e,t)&&(e=t,s)){const t=!X.length;for(const t of o)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,r=t){const c=[a,r];return o.add(c),1===o.size&&(s=n(i)||t),a(e),()=>{o.delete(c),0===o.size&&(s(),s=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${Y}/${e}`))??n);return s.subscribe((t=>localStorage.setItem(`${Y}/${e}`,JSON.stringify(t)))),tt.set(e,s),s}var nt=[{name:"傷害後攻擊增加（艾莉諾拉）",type:"bow",afterHit:t=>{t.buff.push({atk:5,times:99}),1===t.totalHit&&t.buff.push({bonus:1.21,times:99})}},{name:"使用武器後中毒（格蕾絲）",type:"bow",afterWeapon:t=>{t.hit&&t.poison.push({atk:300,turn:2,bonus:0})}},{name:"使用火武器後加速（歌莉雅）",type:"wand",afterWeapon:(t,e)=>{e.fire?.atk&&(t.cost-=2,t.targetBuff.every((t=>!t.goriya))&&(t.targetBuff.push({injuryBonus:10,times:99,goriya:!0}),t.targetBuff.push({fireResist:-10,times:99,goriya:!0})))}},{name:"額外傷害（尤里+泳裝伊蓮）",type:"wand",afterWeapon:(t,e)=>{e.water?.atk&&(t.damage+=2*(900-t.getDef({atkType:"magic"})))}}];const st={F:.85,E0:1,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85};class ot{constructor({atk:t,def:e,int:n,mdef:s,fireResist:o,waterResist:a,poisonResist:i,lightningResist:r,poisonTurns:c,passive:u}){this.atk=t,this.def=e,this.int=n,this.mdef=s,this.fireResist=o,this.waterResist=a,this.poisonResist=i,this.lightningResist=r,this.poisonTurns=c,this.passive=u,this.damage=0,this.hit=0,this.totalHit=0,this.stance=0,this.totalHit=0,this.buff=[],this.targetBuff=[],this.poison=[],this.lightning={}}getDef(t){return it(this,t)}getFireResist(){return this.fireResist+this.targetBuff.reduce(((t,e)=>t+(e.fireResist||0)),0)}getInjuryBonus(){return(this.targetBuff.reduce(((t,e)=>t+(e.injuryBonus||0)),0)+100)/100}}function at({weapons:t,passiveIds:e,...n}){const s=nt.filter(((t,n)=>e.includes(n))),o=[],a=new ot({...n,passive:s});for(const e of t){const t=lt(a,e);o.push(t)}const i=o.reduce(((t,e)=>t+e.damage),0),r=o.reduce(((t,e)=>t+e.cost),0);return{stages:o,summary:{damage:i,cost:r,cp:i/r}}}function it({def:t,mdef:e,targetBuff:n},{atkType:s}){return"heal"===s?0:"magic"===s?e+n.reduce(((t,e)=>t+(e.mdef||0)),0):t+n.reduce(((t,e)=>t+(e.def||0)),0)}function rt({atk:t,int:e,buff:n},{modType:s,modLv:o,atk:a=0,bonus:i=0}){const r="int"===s?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(o?r*st[o]:0))*(i+100)/100*n.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1)}function ct({poison:t,poisonTurns:e,poisonResist:n}){let s=0;for(const o of t)s+=o.atk*Math.min(o.turn,e)/o.turn*(100-n)/100;return s}function ut(t,e,n){t.passive.forEach((s=>s[n]?.(t,e)))}function lt(t,e){const n=ct(t);t.cost=e.casting||e.cost,t.hit=e.hit||(e.atk||e.modLv?1:0),t.damage=0;const s=it(t,e);for(let n=0;n<t.hit;n++){t.currentHit=n+1,t.totalHit++;let o=rt(t,e);e.stance?.use===t.stance&&(o*=((e.stance.bonus||0)+100)/100),t.damage+=Math.max(o-s,1)*t.getInjuryBonus(),t.lightning?.atk&&(t.damage+=t.lightning.atk*(100-t.lightningResist)/100),ut(t,e,"afterHit")}return t.hit&&(t.buff=t.buff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0)),t.targetBuff=t.targetBuff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0))),e.trap&&(t.damage+=Math.max(e.trap.atk-s,1)),e.fire?.atk&&(t.damage+=e.fire.atk*(100-t.getFireResist())/100),e.water?.atk&&(t.damage+=e.water.atk*(100-t.waterResist)/100),e.lightning?.atk&&(t.damage+=e.lightning.atk*(100-t.lightningResist)/100,(!t.lightning?.atk||e.lightning.time>t.lightning.time)&&(t.lightning=e.lightning)),e.poison?.atk&&t.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0}),e.poison?.bonus&&(t.poison=t.poison.map((t=>{const n=(t.bonus+100)*(e.poison.bonus+100)/100-100;return{...t,bonus:Math.min(n,200)}}))),e.buff&&t.buff.push(...e.buff),e.targetBuff&&t.targetBuff.push(...e.targetBuff),e?.stance?.use===t.stance&&e.stance.buff&&t.buff.push(...e.stance.buff),null!=e?.stance?.gain&&(t.stance=e.stance.gain),ut(t,e,"afterWeapon"),t.damage+=ct(t)-n,{damage:t.damage,cost:t.cost}}function ft(t,e,n){const s=t.slice();return s[58]=e[n],s}function dt(t,e,n){const s=t.slice();return s[61]=e[n],s[62]=e,s[63]=n,s}function mt(t,e,n){const s=t.slice();return s[64]=e[n],s}function pt(t,e,n){const s=t.slice();return s[67]=e[n],s[63]=n,s}function gt(t){let e,n=Q===t[67].type&&function(t){let e,n,s,o,a,i,l,h,v=t[67].name+"";return{c(){e=f("label"),n=f("input"),s=m(),o=f("span"),a=d(v),i=m(),g(n,"type","checkbox"),n.__value=t[63],n.value=n.__value,t[46][0].push(n),g(e,"class","cspan svelte-127o0eo")},m(u,f){c(u,e,f),r(e,n),n.checked=~t[9].indexOf(n.__value),r(e,s),r(e,o),r(o,a),r(e,i),l||(h=p(n,"change",t[45]),l=!0)},p(t,e){512&e[0]&&(n.checked=~t[9].indexOf(n.__value))},d(s){s&&u(e),t[46][0].splice(t[46][0].indexOf(n),1),l=!1,h()}}}(t);return{c(){n&&n.c(),e=d("")},m(t,s){n&&n.m(t,s),c(t,e,s)},p(t,e){Q===t[67].type&&n.p(t,e)},d(t){n&&n.d(t),t&&u(e)}}}function ht(t){let e,n,s,o=t[64].name+"";return{c(){e=f("option"),n=d(o),e.__value=s=t[64],e.value=e.__value},m(t,s){c(t,e,s),r(e,n)},p(t,a){1&a[0]&&o!==(o=t[64].name+"")&&v(n,o),1&a[0]&&s!==(s=t[64])&&(e.__value=s,e.value=e.__value)},d(t){t&&u(e)}}}function vt(t){let e,n,o,a,i,h,$,x,b,k,w,T,_,C,L,R,F,E,S,D,H,M=t[2].stages[t[63]]?.cost+"",O=t[2].stages[t[63]]?.damage.toFixed(0)+"",j=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"",A=t[0],I=[];for(let e=0;e<A.length;e+=1)I[e]=ht(mt(t,A,e));function N(){t[47].call(e,t[62],t[63])}function z(){return t[48](t[63])}function W(){return t[49](t[63])}function K(){return t[50](t[63])}function P(){return t[51](t[63])}return{c(){e=f("select");for(let t=0;t<I.length;t+=1)I[t].c();n=m(),o=f("span"),a=d(M),i=m(),h=f("span"),$=d(O),x=m(),b=f("span"),k=d(j),w=m(),T=f("div"),_=f("button"),_.textContent="↑",C=m(),L=f("button"),L.textContent="↓",R=m(),F=f("button"),F.textContent="⎘",E=m(),S=f("button"),S.textContent="x",g(e,"class","svelte-127o0eo"),void 0===t[61]&&B(N),g(o,"class","svelte-127o0eo"),g(h,"class","svelte-127o0eo"),g(b,"class","svelte-127o0eo"),g(T,"class","operation svelte-127o0eo")},m(s,u){c(s,e,u);for(let t=0;t<I.length;t+=1)I[t].m(e,null);y(e,t[61]),c(s,n,u),c(s,o,u),r(o,a),c(s,i,u),c(s,h,u),r(h,$),c(s,x,u),c(s,b,u),r(b,k),c(s,w,u),c(s,T,u),r(T,_),r(T,C),r(T,L),r(T,R),r(T,F),r(T,E),r(T,S),D||(H=[p(e,"change",N),p(_,"click",z),p(L,"click",W),p(F,"click",K),p(S,"click",P)],D=!0)},p(n,s){if(t=n,1&s[0]){let n;for(A=t[0],n=0;n<A.length;n+=1){const o=mt(t,A,n);I[n]?I[n].p(o,s):(I[n]=ht(o),I[n].c(),I[n].m(e,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=A.length}3&s[0]&&y(e,t[61]),4&s[0]&&M!==(M=t[2].stages[t[63]]?.cost+"")&&v(a,M),4&s[0]&&O!==(O=t[2].stages[t[63]]?.damage.toFixed(0)+"")&&v($,O),4&s[0]&&j!==(j=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"")&&v(k,j)},d(t){t&&u(e),l(I,t),t&&u(n),t&&u(o),t&&u(i),t&&u(h),t&&u(x),t&&u(b),t&&u(w),t&&u(T),D=!1,s(H)}}}function $t(t){let e,n,s,o,a,i,l,h,$,y,x,b,k,w,T,_=t[58].name+"",C=t[58].cost+"",L=t[58].damage.toFixed(0)+"",R=t[58].cp.toFixed(0)+"";function B(){return t[56](t[58])}return{c(){e=f("span"),n=d(_),s=m(),o=f("span"),a=d(C),i=m(),l=f("span"),h=d(L),$=m(),y=f("span"),x=d(R),b=m(),k=f("button"),k.textContent="x",g(e,"class","svelte-127o0eo"),g(o,"class","svelte-127o0eo"),g(l,"class","svelte-127o0eo"),g(y,"class","svelte-127o0eo"),g(k,"class","svelte-127o0eo")},m(t,u){c(t,e,u),r(e,n),c(t,s,u),c(t,o,u),r(o,a),c(t,i,u),c(t,l,u),r(l,h),c(t,$,u),c(t,y,u),r(y,x),c(t,b,u),c(t,k,u),w||(T=p(k,"click",B),w=!0)},p(e,s){t=e,8&s[0]&&_!==(_=t[58].name+"")&&v(n,_),8&s[0]&&C!==(C=t[58].cost+"")&&v(a,C),8&s[0]&&L!==(L=t[58].damage.toFixed(0)+"")&&v(h,L),8&s[0]&&R!==(R=t[58].cp.toFixed(0)+"")&&v(x,R)},d(t){t&&u(e),t&&u(s),t&&u(o),t&&u(i),t&&u(l),t&&u($),t&&u(y),t&&u(b),t&&u(k),w=!1,T()}}}function yt(t){let e,n,o,a,i,y,x,b,k,w,_,C,L,R,B,E,S,D,H,M,W,K,P,q,J,G,Q,U,X,Y,tt,et,st,ot,at,it,rt,ct,ut,lt,mt,ht,yt,xt,bt,kt,wt,Tt,_t,Ct,Lt,Rt,Bt,Ft,Et,St,Dt,Ht,Mt,Ot,jt,At,It,Nt,zt,Wt,Kt,Pt,qt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,se,oe,ae,ie,re,ce,ue,le,fe,de,me,pe=t[2].summary.cost+"",ge=t[2].summary.damage.toFixed(0)+"",he=t[2].summary.cp.toFixed(0)+"";o=new V({});let ve=nt,$e=[];for(let e=0;e<ve.length;e+=1)$e[e]=gt(pt(t,ve,e));let ye=t[1],xe=[];for(let e=0;e<ye.length;e+=1)xe[e]=vt(dt(t,ye,e));function be(e){t[52](e)}let ke={field:"name",text:"Name"};function we(e){t[53](e)}void 0!==t[4]&&(ke.method=t[4]),Qt=new Z({props:ke}),T.push((()=>A(Qt,"method",be)));let Te={field:"cost",text:"Cost"};function _e(e){t[54](e)}void 0!==t[4]&&(Te.method=t[4]),Xt=new Z({props:Te}),T.push((()=>A(Xt,"method",we)));let Ce={field:"damage",text:"Damage"};function Le(e){t[55](e)}void 0!==t[4]&&(Ce.method=t[4]),ee=new Z({props:Ce}),T.push((()=>A(ee,"method",_e)));let Re={field:"cp",text:"CP"};void 0!==t[4]&&(Re.method=t[4]),oe=new Z({props:Re}),T.push((()=>A(oe,"method",Le)));let Be=t[3],Fe=[];for(let e=0;e<Be.length;e+=1)Fe[e]=$t(ft(t,Be,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=m(),I(o.$$.fragment),a=m(),i=f("div"),y=f("span"),y.textContent="力量",x=m(),b=f("input"),k=m(),w=f("span"),w.textContent="防禦",_=m(),C=f("input"),L=m(),R=f("span"),R.textContent="智力",B=m(),E=f("input"),S=m(),D=f("span"),D.textContent="魔防",H=m(),M=f("input"),W=m(),K=f("span"),K.textContent="火抗",P=m(),q=f("input"),J=m(),G=f("span"),G.textContent="水抗",Q=m(),U=f("input"),X=m(),Y=f("span"),Y.textContent="毒抗",tt=m(),et=f("input"),st=m(),ot=f("span"),ot.textContent="雷抗",at=m(),it=f("input"),rt=m(),ct=f("span"),ct.textContent="中毒發生次數",ut=m(),lt=f("input"),mt=m();for(let t=0;t<$e.length;t+=1)$e[t].c();ht=m(),yt=f("h2"),yt.textContent="Combo",xt=m(),bt=f("div"),kt=f("span"),kt.textContent="Weapon",wt=m(),Tt=f("span"),Tt.textContent="Cost",_t=m(),Ct=f("span"),Ct.textContent="Damage",Lt=m(),Rt=f("span"),Rt.textContent="CP",Bt=m(),Ft=f("span"),Et=m();for(let t=0;t<xe.length;t+=1)xe[t].c();St=m(),Dt=f("span"),Dt.textContent="Summary",Ht=m(),Mt=f("span"),Ot=d(pe),jt=m(),At=f("span"),It=d(ge),Nt=m(),zt=f("span"),Wt=d(he),Kt=m(),Pt=f("button"),Pt.textContent="Add to compare list",qt=m(),Jt=f("h2"),Jt.textContent="Compare",Zt=m(),Gt=f("div"),I(Qt.$$.fragment),Vt=m(),I(Xt.$$.fragment),te=m(),I(ee.$$.fragment),se=m(),I(oe.$$.fragment),ie=m(),re=f("span"),ce=m();for(let t=0;t<Fe.length;t+=1)Fe[t].c();ue=m(),le=f("footer"),le.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',g(b,"type","number"),g(C,"type","number"),g(E,"type","number"),g(M,"type","number"),g(q,"type","number"),g(U,"type","number"),g(et,"type","number"),g(it,"type","number"),g(lt,"type","number"),g(i,"class","base-info svelte-127o0eo"),g(kt,"class","chead svelte-127o0eo"),g(Tt,"class","chead svelte-127o0eo"),g(Ct,"class","chead svelte-127o0eo"),g(Rt,"class","chead svelte-127o0eo"),g(Ft,"class","operation svelte-127o0eo"),g(Dt,"class","chead svelte-127o0eo"),g(Mt,"class","svelte-127o0eo"),g(At,"class","svelte-127o0eo"),g(zt,"class","svelte-127o0eo"),g(bt,"class","combo-table svelte-127o0eo"),g(re,"class","svelte-127o0eo"),g(Gt,"class","compare-list svelte-127o0eo"),g(le,"class","svelte-127o0eo")},m(s,u){c(s,e,u),c(s,n,u),N(o,s,u),c(s,a,u),c(s,i,u),r(i,y),r(i,x),r(i,b),$(b,t[14]),r(i,k),r(i,w),r(i,_),r(i,C),$(C,t[13]),r(i,L),r(i,R),r(i,B),r(i,E),$(E,t[12]),r(i,S),r(i,D),r(i,H),r(i,M),$(M,t[11]),r(i,W),r(i,K),r(i,P),r(i,q),$(q,t[8]),r(i,J),r(i,G),r(i,Q),r(i,U),$(U,t[7]),r(i,X),r(i,Y),r(i,tt),r(i,et),$(et,t[6]),r(i,st),r(i,ot),r(i,at),r(i,it),$(it,t[5]),r(i,rt),r(i,ct),r(i,ut),r(i,lt),$(lt,t[10]),r(i,mt);for(let t=0;t<$e.length;t+=1)$e[t].m(i,null);c(s,ht,u),c(s,yt,u),c(s,xt,u),c(s,bt,u),r(bt,kt),r(bt,wt),r(bt,Tt),r(bt,_t),r(bt,Ct),r(bt,Lt),r(bt,Rt),r(bt,Bt),r(bt,Ft),r(bt,Et);for(let t=0;t<xe.length;t+=1)xe[t].m(bt,null);r(bt,St),r(bt,Dt),r(bt,Ht),r(bt,Mt),r(Mt,Ot),r(bt,jt),r(bt,At),r(At,It),r(bt,Nt),r(bt,zt),r(zt,Wt),c(s,Kt,u),c(s,Pt,u),c(s,qt,u),c(s,Jt,u),c(s,Zt,u),c(s,Gt,u),N(Qt,Gt,null),r(Gt,Vt),N(Xt,Gt,null),r(Gt,te),N(ee,Gt,null),r(Gt,se),N(oe,Gt,null),r(Gt,ie),r(Gt,re),r(Gt,ce);for(let t=0;t<Fe.length;t+=1)Fe[t].m(Gt,null);c(s,ue,u),c(s,le,u),fe=!0,de||(me=[p(b,"input",t[36]),p(C,"input",t[37]),p(E,"input",t[38]),p(M,"input",t[39]),p(q,"input",t[40]),p(U,"input",t[41]),p(et,"input",t[42]),p(it,"input",t[43]),p(lt,"input",t[44]),p(Pt,"click",t[30])],de=!0)},p(t,e){if(16384&e[0]&&h(b.value)!==t[14]&&$(b,t[14]),8192&e[0]&&h(C.value)!==t[13]&&$(C,t[13]),4096&e[0]&&h(E.value)!==t[12]&&$(E,t[12]),2048&e[0]&&h(M.value)!==t[11]&&$(M,t[11]),256&e[0]&&h(q.value)!==t[8]&&$(q,t[8]),128&e[0]&&h(U.value)!==t[7]&&$(U,t[7]),64&e[0]&&h(et.value)!==t[6]&&$(et,t[6]),32&e[0]&&h(it.value)!==t[5]&&$(it,t[5]),1024&e[0]&&h(lt.value)!==t[10]&&$(lt,t[10]),512&e[0]){let n;for(ve=nt,n=0;n<ve.length;n+=1){const s=pt(t,ve,n);$e[n]?$e[n].p(s,e):($e[n]=gt(s),$e[n].c(),$e[n].m(i,null))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=ve.length}if(939524103&e[0]){let n;for(ye=t[1],n=0;n<ye.length;n+=1){const s=dt(t,ye,n);xe[n]?xe[n].p(s,e):(xe[n]=vt(s),xe[n].c(),xe[n].m(bt,St))}for(;n<xe.length;n+=1)xe[n].d(1);xe.length=ye.length}(!fe||4&e[0])&&pe!==(pe=t[2].summary.cost+"")&&v(Ot,pe),(!fe||4&e[0])&&ge!==(ge=t[2].summary.damage.toFixed(0)+"")&&v(It,ge),(!fe||4&e[0])&&he!==(he=t[2].summary.cp.toFixed(0)+"")&&v(Wt,he);const n={};!Ut&&16&e[0]&&(Ut=!0,n.method=t[4],F((()=>Ut=!1))),Qt.$set(n);const s={};!Yt&&16&e[0]&&(Yt=!0,s.method=t[4],F((()=>Yt=!1))),Xt.$set(s);const o={};!ne&&16&e[0]&&(ne=!0,o.method=t[4],F((()=>ne=!1))),ee.$set(o);const a={};if(!ae&&16&e[0]&&(ae=!0,a.method=t[4],F((()=>ae=!1))),oe.$set(a),8&e[0]|1&e[1]){let n;for(Be=t[3],n=0;n<Be.length;n+=1){const s=ft(t,Be,n);Fe[n]?Fe[n].p(s,e):(Fe[n]=$t(s),Fe[n].c(),Fe[n].m(Gt,null))}for(;n<Fe.length;n+=1)Fe[n].d(1);Fe.length=Be.length}},i(t){fe||(O(o.$$.fragment,t),O(Qt.$$.fragment,t),O(Xt.$$.fragment,t),O(ee.$$.fragment,t),O(oe.$$.fragment,t),fe=!0)},o(t){j(o.$$.fragment,t),j(Qt.$$.fragment,t),j(Xt.$$.fragment,t),j(ee.$$.fragment,t),j(oe.$$.fragment,t),fe=!1},d(t){t&&u(e),t&&u(n),z(o,t),t&&u(a),t&&u(i),l($e,t),t&&u(ht),t&&u(yt),t&&u(xt),t&&u(bt),l(xe,t),t&&u(Kt),t&&u(Pt),t&&u(qt),t&&u(Jt),t&&u(Zt),t&&u(Gt),z(Qt),z(Xt),z(ee),z(oe),l(Fe,t),t&&u(ue),t&&u(le),de=!1,s(me)}}}function xt(t,e,n){let s,o,a,r,c,u,l,f,d,m,p,g,{weapons:v,storeKey:$}=e;const y=Object.fromEntries(v.map((t=>[t.name,t]))),x=et(`${$}/atk`,700);i(t,x,(t=>n(14,g=t)));const b=et(`${$}/def`,200);i(t,b,(t=>n(13,p=t)));const k=et(`${$}/int`,700);i(t,k,(t=>n(12,m=t)));const w=et(`${$}/mdef`,200);i(t,w,(t=>n(11,d=t)));const T=et(`${$}/fireResist`,0);i(t,T,(t=>n(8,u=t)));const _=et(`${$}/waterResist`,0);i(t,_,(t=>n(7,c=t)));const C=et(`${$}/poisonResist`,0);i(t,C,(t=>n(6,r=t)));const L=et(`${$}/lightningResist`,0);i(t,L,(t=>n(5,a=t)));const R=et(`${$}/poisonTurns`,99);i(t,R,(t=>n(10,f=t)));const B=et(`${$}/passiveIds`,[]);i(t,B,(t=>n(9,l=t)));const F=et(`${$}/compareList`,v.map((t=>[t.name])));i(t,F,(t=>n(35,s=t)));const E=et(`${$}/sortMethod`,{field:null,dir:1});i(t,E,(t=>n(4,o=t)));let S=[v[0]],D={stages:[],summary:{damage:0,cost:0,cp:0}},H=[],M=[],O={};function j(t){S.splice(t,0,S[t]),n(1,S)}function A(t){S.length<=1||(S.splice(t,1),n(1,S))}function I(t,e){const s=S[t];S.splice(t,1),S.splice(t+e,0,s),n(1,S)}function N(t){s.splice(t,1),F.set(s)}const z=[[]];return t.$$set=t=>{"weapons"in t&&n(0,v=t.weapons),"storeKey"in t&&n(32,$=t.storeKey)},t.$$.update=()=>{32736&t.$$.dirty[0]&&n(34,O={atk:g,def:p,int:m,mdef:d,poisonTurns:f,passiveIds:l,fireResist:u,waterResist:c,poisonResist:r,lightningResist:a}),2&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(2,D=at({...O,weapons:S})),24&t.$$.dirty[1]&&n(33,H=s.map(((t,e)=>{const n=t.map((t=>y[t])),s=at({...O,weapons:n});return{name:t.join("+"),cost:s.summary.cost,damage:s.summary.damage,cp:s.summary.cp,index:e}}))),24&t.$$.dirty[0]|4&t.$$.dirty[1]&&(n(3,M=H.slice()),o.field&&M.sort(((t,e)=>(t[o.field]<e[o.field]?-1:t[o.field]>e[o.field]?1:0)*o.dir)))},[v,S,D,M,o,a,r,c,u,l,f,d,m,p,g,x,b,k,w,T,_,C,L,R,B,F,E,j,A,I,function(){s.push(S.map((t=>t.name))),F.set(s)},N,$,H,O,s,function(){g=h(this.value),x.set(g)},function(){p=h(this.value),b.set(p)},function(){m=h(this.value),k.set(m)},function(){d=h(this.value),w.set(d)},function(){u=h(this.value),T.set(u)},function(){c=h(this.value),_.set(c)},function(){r=h(this.value),C.set(r)},function(){a=h(this.value),L.set(a)},function(){f=h(this.value),R.set(f)},function(){l=function(t,e,n){const s=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&s.add(t[e].__value);return n||s.delete(e),Array.from(s)}(z[0],this.__value,this.checked),B.set(l)},z,function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,S),n(0,v)},t=>I(t,-1),t=>I(t,1),t=>j(t),t=>A(t),function(t){o=t,E.set(o)},function(t){o=t,E.set(o)},function(t){o=t,E.set(o)},function(t){o=t,E.set(o)},t=>N(t.index)]}const bt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int"},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str"},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]}],kt=bt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends P{constructor(t){super(),K(this,t,xt,yt,a,{weapons:0,storeKey:32},null,[-1,-1,-1])}},b:kt,w:bt}}();
//# sourceMappingURL=tome-042d967b.js.map
