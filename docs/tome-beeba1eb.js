var tomeBeeba1Eb=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function r(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function b(t,e,n){t.classList[n?"add":"remove"](e)}let k;function x(t){k=t}const T=[],w=[],_=[],C=[],L=Promise.resolve();let R=!1;function B(t){_.push(t)}function F(t){C.push(t)}const E=new Set;let S=0;function H(){const t=k;do{for(;S<T.length;){const t=T[S];S++,x(t),M(t.$$)}for(x(null),T.length=0,S=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];E.has(e)||(E.add(e),e())}_.length=0}while(T.length);for(;C.length;)C.pop()();R=!1,E.clear(),x(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const D=new Set;function O(t,e){t&&t.i&&(D.delete(t),t.i(e))}function j(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),undefined.c.push((()=>{D.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function W(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function A(t){t&&t.c()}function I(t,n,a,i){const{fragment:r,on_mount:c,on_destroy:u,after_update:l}=t.$$;r&&r.m(n,a),i||B((()=>{const n=c.map(e).filter(s);u?u.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(B)}function N(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(T.push(t),R||(R=!0,L.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,s,a,i,r,c,l,f=[-1]){const d=k;x(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||d.$$.root};l&&l(m.root);let p=!1;if(m.ctx=a?a(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&r(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&z(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!i&&i(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();s.intro&&O(e.$$.fragment),I(e,s.target,s.anchor,s.customElement),H()}x(d)}class P{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q(e){let n,o,s,a;return{c(){n=f("button"),o=d(e[2]),g(n,"class","svelte-19loasr"),b(n,"sorted",e[0].field===e[1]),b(n,"reversed",e[0].dir<0)},m(t,i){c(t,n,i),r(n,o),s||(a=p(n,"click",e[3]),s=!0)},p(t,[e]){4&e&&v(o,t[2]),3&e&&b(n,"sorted",t[0].field===t[1]),1&e&&b(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&u(n),s=!1,a()}}}function J(t,e,n){let{method:o,field:s,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,o=t.method),"field"in t&&n(1,s=t.field),"text"in t&&n(2,a=t.text)},[o,s,a,function(){o.field!==s?(n(0,o.field=s,o),n(0,o.dir=1,o)):n(0,o.dir*=-1,o)}]}class Z extends P{constructor(t){super(),K(this,t,J,q,a,{method:0,field:1,text:2})}}const G=location.pathname.match(/([^/.]*)(\.html)?$/),Q=G[1]&&"index"!==G[1]?G[1]:"sword";function U(e){let n,o,s,a,i,l,d,p;return{c(){n=f("ul"),o=f("li"),o.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',s=m(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=m(),l=f("li"),l.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=m(),p=f("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',g(o,"class","svelte-116mxxw"),b(o,"active","sword"===Q),g(a,"class","svelte-116mxxw"),b(a,"active","bow"===Q),g(l,"class","svelte-116mxxw"),b(l,"active","wand"===Q),g(p,"class","svelte-116mxxw"),b(p,"active","tome"===Q),g(n,"class","svelte-116mxxw")},m(t,e){c(t,n,e),r(n,o),r(n,s),r(n,a),r(n,i),r(n,l),r(n,d),r(n,p)},p:t,i:t,o:t,d(t){t&&u(n)}}}class V extends P{constructor(t){super(),K(this,t,null,U,a,{})}}const X=[];const Y="zoldout-damage-calculator",tt=new Map;function et(e,n){if(tt.has(e))return tt.get(e);const o=function(e,n=t){let o;const s=new Set;function i(t){if(a(e,t)&&(e=t,o)){const t=!X.length;for(const t of s)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,r=t){const c=[a,r];return s.add(c),1===s.size&&(o=n(i)||t),a(e),()=>{s.delete(c),0===s.size&&(o(),o=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${Y}/${e}`))??n);return o.subscribe((t=>localStorage.setItem(`${Y}/${e}`,JSON.stringify(t)))),tt.set(e,o),o}var nt=[{name:"傷害後攻擊增加（艾莉諾拉）",type:"bow",afterHit:t=>{t.buff.push({atk:5,times:99}),1===t.totalHit&&t.buff.push({bonus:1.21,times:99})}},{name:"使用武器後中毒（格蕾絲）",type:"bow",afterWeapon:t=>{t.hit&&t.poison.push({atk:300,turn:2,bonus:0})}},{name:"使用火武器後加速（歌莉雅）",type:"wand",afterWeapon:(t,e)=>{e.fire?.atk&&(t.cost-=2,t.targetBuff.every((t=>!t.goriya))&&(t.targetBuff.push({injuryBonus:10,times:99,goriya:!0}),t.targetBuff.push({fireResist:-10,times:99,goriya:!0})))}},{name:"額外傷害（尤里+泳裝伊蓮）",type:"wand",afterWeapon:(t,e)=>{e.water?.atk&&(t.damage+=2*(900-t.getDef({atkType:"magic"})))}},{name:"魔攻增加（西比拉）",type:"wand",beforeWeapon:(t,e)=>{e.casting>=6&&t.hit&&t.buff.push({bonus:25,times:1})}},{name:"生命回復（塔尼亞）",type:"tome",afterWeapon:(t,e)=>{t.hit&&"heal"!==e.atkType||(t.damage+=360)}},{name:"加速（塔尼亞）",type:"tome",afterWeapon:(t,e)=>{t.hit&&"heal"!==e.atkType||t.cost--}}];const ot={F:.85,E0:1,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85};class st{constructor({atk:t,def:e,int:n,mdef:o,fireResist:s,waterResist:a,poisonResist:i,lightningResist:r,poisonTurns:c,passive:u}){this.atk=t,this.def=e,this.int=n,this.mdef=o,this.fireResist=s,this.waterResist=a,this.poisonResist=i,this.lightningResist=r,this.poisonTurns=c,this.passive=u,this.damage=0,this.hit=0,this.totalHit=0,this.stance=0,this.totalHit=0,this.buff=[],this.targetBuff=[],this.poison=[],this.lightning={}}getDef(t){return it(this,t)}getFireResist(){return this.fireResist+this.targetBuff.reduce(((t,e)=>t+(e.fireResist||0)),0)}getInjuryBonus(){return(this.targetBuff.reduce(((t,e)=>t+(e.injuryBonus||0)),0)+100)/100}}function at({weapons:t,passiveIds:e,...n}){const o=nt.filter(((t,n)=>e.includes(n))),s=[],a=new st({...n,passive:o});for(const e of t){const t=lt(a,e);s.push(t)}const i=s.reduce(((t,e)=>t+e.damage),0),r=s.reduce(((t,e)=>t+e.cost),0);return{stages:s,summary:{damage:i,cost:r,cp:i/r}}}function it({def:t,mdef:e,targetBuff:n},{atkType:o}){return"heal"===o?0:"magic"===o?e+n.reduce(((t,e)=>t+(e.mdef||0)),0):t+n.reduce(((t,e)=>t+(e.def||0)),0)}function rt({atk:t,int:e,buff:n},{modType:o,modLv:s,atk:a=0,bonus:i=0}){const r="int"===o?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(s?r*ot[s]:0))*(i+100)/100*n.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1)}function ct({poison:t,poisonTurns:e,poisonResist:n}){let o=0;for(const s of t)o+=s.atk*Math.min(s.turn,e)/s.turn*(100-n)/100;return o}function ut(t,e,n){t.passive.forEach((o=>o[n]?.(t,e)))}function lt(t,e){const n=ct(t);t.cost=e.casting||e.cost,t.hit=e.hit||(e.atk||e.modLv?1:0),t.damage=0;const o=it(t,e);ut(t,e,"beforeWeapon");for(let n=0;n<t.hit;n++){t.currentHit=n+1,t.totalHit++;let s=rt(t,e);e.stance?.use===t.stance&&(s*=((e.stance.bonus||0)+100)/100),t.damage+=Math.max(s-o,1)*t.getInjuryBonus(),t.lightning?.atk&&(t.damage+=t.lightning.atk*(100-t.lightningResist)/100),ut(t,e,"afterHit")}return t.hit&&(t.buff=t.buff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0)),t.targetBuff=t.targetBuff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0))),e.trap&&(t.damage+=Math.max(e.trap.atk-o,1)),e.fire?.atk&&(t.damage+=e.fire.atk*(100-t.getFireResist())/100),e.water?.atk&&(t.damage+=e.water.atk*(100-t.waterResist)/100),e.lightning?.atk&&(t.damage+=e.lightning.atk*(100-t.lightningResist)/100,(!t.lightning?.atk||e.lightning.time>t.lightning.time)&&(t.lightning=e.lightning)),e.poison?.atk&&t.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0}),e.poison?.bonus&&(t.poison=t.poison.map((t=>{const n=(t.bonus+100)*(e.poison.bonus+100)/100-100;return{...t,bonus:Math.min(n,200)}}))),e.buff&&t.buff.push(...e.buff),e.targetBuff&&t.targetBuff.push(...e.targetBuff),e?.stance?.use===t.stance&&e.stance.buff&&t.buff.push(...e.stance.buff),null!=e?.stance?.gain&&(t.stance=e.stance.gain),ut(t,e,"afterWeapon"),t.damage+=ct(t)-n,{damage:t.damage,cost:t.cost}}function ft(t,e,n){const o=t.slice();return o[58]=e[n],o}function dt(t,e,n){const o=t.slice();return o[61]=e[n],o[62]=e,o[63]=n,o}function mt(t,e,n){const o=t.slice();return o[64]=e[n],o}function pt(t,e,n){const o=t.slice();return o[67]=e[n],o[63]=n,o}function gt(t){let e,n=Q===t[67].type&&function(t){let e,n,o,s,a,i,l,h,v=t[67].name+"";return{c(){e=f("label"),n=f("input"),o=m(),s=f("span"),a=d(v),i=m(),g(n,"type","checkbox"),n.__value=t[63],n.value=n.__value,t[46][0].push(n),g(e,"class","cspan svelte-127o0eo")},m(u,f){c(u,e,f),r(e,n),n.checked=~t[9].indexOf(n.__value),r(e,o),r(e,s),r(s,a),r(e,i),l||(h=p(n,"change",t[45]),l=!0)},p(t,e){512&e[0]&&(n.checked=~t[9].indexOf(n.__value))},d(o){o&&u(e),t[46][0].splice(t[46][0].indexOf(n),1),l=!1,h()}}}(t);return{c(){n&&n.c(),e=d("")},m(t,o){n&&n.m(t,o),c(t,e,o)},p(t,e){Q===t[67].type&&n.p(t,e)},d(t){n&&n.d(t),t&&u(e)}}}function ht(t){let e,n,o,s=t[64].name+"";return{c(){e=f("option"),n=d(s),e.__value=o=t[64],e.value=e.__value},m(t,o){c(t,e,o),r(e,n)},p(t,a){1&a[0]&&s!==(s=t[64].name+"")&&v(n,s),1&a[0]&&o!==(o=t[64])&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function vt(t){let e,n,s,a,i,h,$,b,k,x,T,w,_,C,L,R,F,E,S,H,M,D=t[2].stages[t[63]]?.cost+"",O=t[2].stages[t[63]]?.damage.toFixed(0)+"",j=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"",W=t[0],A=[];for(let e=0;e<W.length;e+=1)A[e]=ht(mt(t,W,e));function I(){t[47].call(e,t[62],t[63])}function N(){return t[48](t[63])}function z(){return t[49](t[63])}function K(){return t[50](t[63])}function P(){return t[51](t[63])}return{c(){e=f("select");for(let t=0;t<A.length;t+=1)A[t].c();n=m(),s=f("span"),a=d(D),i=m(),h=f("span"),$=d(O),b=m(),k=f("span"),x=d(j),T=m(),w=f("div"),_=f("button"),_.textContent="↑",C=m(),L=f("button"),L.textContent="↓",R=m(),F=f("button"),F.textContent="⎘",E=m(),S=f("button"),S.textContent="x",g(e,"class","svelte-127o0eo"),void 0===t[61]&&B(I),g(s,"class","svelte-127o0eo"),g(h,"class","svelte-127o0eo"),g(k,"class","svelte-127o0eo"),g(w,"class","operation svelte-127o0eo")},m(o,u){c(o,e,u);for(let t=0;t<A.length;t+=1)A[t].m(e,null);y(e,t[61]),c(o,n,u),c(o,s,u),r(s,a),c(o,i,u),c(o,h,u),r(h,$),c(o,b,u),c(o,k,u),r(k,x),c(o,T,u),c(o,w,u),r(w,_),r(w,C),r(w,L),r(w,R),r(w,F),r(w,E),r(w,S),H||(M=[p(e,"change",I),p(_,"click",N),p(L,"click",z),p(F,"click",K),p(S,"click",P)],H=!0)},p(n,o){if(t=n,1&o[0]){let n;for(W=t[0],n=0;n<W.length;n+=1){const s=mt(t,W,n);A[n]?A[n].p(s,o):(A[n]=ht(s),A[n].c(),A[n].m(e,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=W.length}3&o[0]&&y(e,t[61]),4&o[0]&&D!==(D=t[2].stages[t[63]]?.cost+"")&&v(a,D),4&o[0]&&O!==(O=t[2].stages[t[63]]?.damage.toFixed(0)+"")&&v($,O),4&o[0]&&j!==(j=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"")&&v(x,j)},d(t){t&&u(e),l(A,t),t&&u(n),t&&u(s),t&&u(i),t&&u(h),t&&u(b),t&&u(k),t&&u(T),t&&u(w),H=!1,o(M)}}}function $t(t){let e,n,o,s,a,i,l,h,$,y,b,k,x,T,w,_=t[58].name+"",C=t[58].cost+"",L=t[58].damage.toFixed(0)+"",R=t[58].cp.toFixed(0)+"";function B(){return t[56](t[58])}return{c(){e=f("span"),n=d(_),o=m(),s=f("span"),a=d(C),i=m(),l=f("span"),h=d(L),$=m(),y=f("span"),b=d(R),k=m(),x=f("button"),x.textContent="x",g(e,"class","svelte-127o0eo"),g(s,"class","svelte-127o0eo"),g(l,"class","svelte-127o0eo"),g(y,"class","svelte-127o0eo"),g(x,"class","svelte-127o0eo")},m(t,u){c(t,e,u),r(e,n),c(t,o,u),c(t,s,u),r(s,a),c(t,i,u),c(t,l,u),r(l,h),c(t,$,u),c(t,y,u),r(y,b),c(t,k,u),c(t,x,u),T||(w=p(x,"click",B),T=!0)},p(e,o){t=e,8&o[0]&&_!==(_=t[58].name+"")&&v(n,_),8&o[0]&&C!==(C=t[58].cost+"")&&v(a,C),8&o[0]&&L!==(L=t[58].damage.toFixed(0)+"")&&v(h,L),8&o[0]&&R!==(R=t[58].cp.toFixed(0)+"")&&v(b,R)},d(t){t&&u(e),t&&u(o),t&&u(s),t&&u(i),t&&u(l),t&&u($),t&&u(y),t&&u(k),t&&u(x),T=!1,w()}}}function yt(t){let e,n,s,a,i,y,b,k,x,T,_,C,L,R,B,E,S,H,M,D,z,K,P,q,J,G,Q,U,X,Y,tt,et,ot,st,at,it,rt,ct,ut,lt,mt,ht,yt,bt,kt,xt,Tt,wt,_t,Ct,Lt,Rt,Bt,Ft,Et,St,Ht,Mt,Dt,Ot,jt,Wt,At,It,Nt,zt,Kt,Pt,qt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,oe,se,ae,ie,re,ce,ue,le,fe,de,me,pe=t[2].summary.cost+"",ge=t[2].summary.damage.toFixed(0)+"",he=t[2].summary.cp.toFixed(0)+"";s=new V({});let ve=nt,$e=[];for(let e=0;e<ve.length;e+=1)$e[e]=gt(pt(t,ve,e));let ye=t[1],be=[];for(let e=0;e<ye.length;e+=1)be[e]=vt(dt(t,ye,e));function ke(e){t[52](e)}let xe={field:"name",text:"Name"};function Te(e){t[53](e)}void 0!==t[4]&&(xe.method=t[4]),Qt=new Z({props:xe}),w.push((()=>W(Qt,"method",ke)));let we={field:"cost",text:"Cost"};function _e(e){t[54](e)}void 0!==t[4]&&(we.method=t[4]),Xt=new Z({props:we}),w.push((()=>W(Xt,"method",Te)));let Ce={field:"damage",text:"Damage"};function Le(e){t[55](e)}void 0!==t[4]&&(Ce.method=t[4]),ee=new Z({props:Ce}),w.push((()=>W(ee,"method",_e)));let Re={field:"cp",text:"CP"};void 0!==t[4]&&(Re.method=t[4]),se=new Z({props:Re}),w.push((()=>W(se,"method",Le)));let Be=t[3],Fe=[];for(let e=0;e<Be.length;e+=1)Fe[e]=$t(ft(t,Be,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=m(),A(s.$$.fragment),a=m(),i=f("div"),y=f("span"),y.textContent="力量",b=m(),k=f("input"),x=m(),T=f("span"),T.textContent="防禦",_=m(),C=f("input"),L=m(),R=f("span"),R.textContent="智力",B=m(),E=f("input"),S=m(),H=f("span"),H.textContent="魔防",M=m(),D=f("input"),z=m(),K=f("span"),K.textContent="火抗",P=m(),q=f("input"),J=m(),G=f("span"),G.textContent="水抗",Q=m(),U=f("input"),X=m(),Y=f("span"),Y.textContent="毒抗",tt=m(),et=f("input"),ot=m(),st=f("span"),st.textContent="雷抗",at=m(),it=f("input"),rt=m(),ct=f("span"),ct.textContent="中毒發生次數",ut=m(),lt=f("input"),mt=m();for(let t=0;t<$e.length;t+=1)$e[t].c();ht=m(),yt=f("h2"),yt.textContent="Combo",bt=m(),kt=f("div"),xt=f("span"),xt.textContent="Weapon",Tt=m(),wt=f("span"),wt.textContent="Cost",_t=m(),Ct=f("span"),Ct.textContent="Damage",Lt=m(),Rt=f("span"),Rt.textContent="CP",Bt=m(),Ft=f("span"),Et=m();for(let t=0;t<be.length;t+=1)be[t].c();St=m(),Ht=f("span"),Ht.textContent="Summary",Mt=m(),Dt=f("span"),Ot=d(pe),jt=m(),Wt=f("span"),At=d(ge),It=m(),Nt=f("span"),zt=d(he),Kt=m(),Pt=f("button"),Pt.textContent="Add to compare list",qt=m(),Jt=f("h2"),Jt.textContent="Compare",Zt=m(),Gt=f("div"),A(Qt.$$.fragment),Vt=m(),A(Xt.$$.fragment),te=m(),A(ee.$$.fragment),oe=m(),A(se.$$.fragment),ie=m(),re=f("span"),ce=m();for(let t=0;t<Fe.length;t+=1)Fe[t].c();ue=m(),le=f("footer"),le.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',g(k,"type","number"),g(C,"type","number"),g(E,"type","number"),g(D,"type","number"),g(q,"type","number"),g(U,"type","number"),g(et,"type","number"),g(it,"type","number"),g(lt,"type","number"),g(i,"class","base-info svelte-127o0eo"),g(xt,"class","chead svelte-127o0eo"),g(wt,"class","chead svelte-127o0eo"),g(Ct,"class","chead svelte-127o0eo"),g(Rt,"class","chead svelte-127o0eo"),g(Ft,"class","operation svelte-127o0eo"),g(Ht,"class","chead svelte-127o0eo"),g(Dt,"class","svelte-127o0eo"),g(Wt,"class","svelte-127o0eo"),g(Nt,"class","svelte-127o0eo"),g(kt,"class","combo-table svelte-127o0eo"),g(re,"class","svelte-127o0eo"),g(Gt,"class","compare-list svelte-127o0eo"),g(le,"class","svelte-127o0eo")},m(o,u){c(o,e,u),c(o,n,u),I(s,o,u),c(o,a,u),c(o,i,u),r(i,y),r(i,b),r(i,k),$(k,t[14]),r(i,x),r(i,T),r(i,_),r(i,C),$(C,t[13]),r(i,L),r(i,R),r(i,B),r(i,E),$(E,t[12]),r(i,S),r(i,H),r(i,M),r(i,D),$(D,t[11]),r(i,z),r(i,K),r(i,P),r(i,q),$(q,t[8]),r(i,J),r(i,G),r(i,Q),r(i,U),$(U,t[7]),r(i,X),r(i,Y),r(i,tt),r(i,et),$(et,t[6]),r(i,ot),r(i,st),r(i,at),r(i,it),$(it,t[5]),r(i,rt),r(i,ct),r(i,ut),r(i,lt),$(lt,t[10]),r(i,mt);for(let t=0;t<$e.length;t+=1)$e[t].m(i,null);c(o,ht,u),c(o,yt,u),c(o,bt,u),c(o,kt,u),r(kt,xt),r(kt,Tt),r(kt,wt),r(kt,_t),r(kt,Ct),r(kt,Lt),r(kt,Rt),r(kt,Bt),r(kt,Ft),r(kt,Et);for(let t=0;t<be.length;t+=1)be[t].m(kt,null);r(kt,St),r(kt,Ht),r(kt,Mt),r(kt,Dt),r(Dt,Ot),r(kt,jt),r(kt,Wt),r(Wt,At),r(kt,It),r(kt,Nt),r(Nt,zt),c(o,Kt,u),c(o,Pt,u),c(o,qt,u),c(o,Jt,u),c(o,Zt,u),c(o,Gt,u),I(Qt,Gt,null),r(Gt,Vt),I(Xt,Gt,null),r(Gt,te),I(ee,Gt,null),r(Gt,oe),I(se,Gt,null),r(Gt,ie),r(Gt,re),r(Gt,ce);for(let t=0;t<Fe.length;t+=1)Fe[t].m(Gt,null);c(o,ue,u),c(o,le,u),fe=!0,de||(me=[p(k,"input",t[36]),p(C,"input",t[37]),p(E,"input",t[38]),p(D,"input",t[39]),p(q,"input",t[40]),p(U,"input",t[41]),p(et,"input",t[42]),p(it,"input",t[43]),p(lt,"input",t[44]),p(Pt,"click",t[30])],de=!0)},p(t,e){if(16384&e[0]&&h(k.value)!==t[14]&&$(k,t[14]),8192&e[0]&&h(C.value)!==t[13]&&$(C,t[13]),4096&e[0]&&h(E.value)!==t[12]&&$(E,t[12]),2048&e[0]&&h(D.value)!==t[11]&&$(D,t[11]),256&e[0]&&h(q.value)!==t[8]&&$(q,t[8]),128&e[0]&&h(U.value)!==t[7]&&$(U,t[7]),64&e[0]&&h(et.value)!==t[6]&&$(et,t[6]),32&e[0]&&h(it.value)!==t[5]&&$(it,t[5]),1024&e[0]&&h(lt.value)!==t[10]&&$(lt,t[10]),512&e[0]){let n;for(ve=nt,n=0;n<ve.length;n+=1){const o=pt(t,ve,n);$e[n]?$e[n].p(o,e):($e[n]=gt(o),$e[n].c(),$e[n].m(i,null))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=ve.length}if(939524103&e[0]){let n;for(ye=t[1],n=0;n<ye.length;n+=1){const o=dt(t,ye,n);be[n]?be[n].p(o,e):(be[n]=vt(o),be[n].c(),be[n].m(kt,St))}for(;n<be.length;n+=1)be[n].d(1);be.length=ye.length}(!fe||4&e[0])&&pe!==(pe=t[2].summary.cost+"")&&v(Ot,pe),(!fe||4&e[0])&&ge!==(ge=t[2].summary.damage.toFixed(0)+"")&&v(At,ge),(!fe||4&e[0])&&he!==(he=t[2].summary.cp.toFixed(0)+"")&&v(zt,he);const n={};!Ut&&16&e[0]&&(Ut=!0,n.method=t[4],F((()=>Ut=!1))),Qt.$set(n);const o={};!Yt&&16&e[0]&&(Yt=!0,o.method=t[4],F((()=>Yt=!1))),Xt.$set(o);const s={};!ne&&16&e[0]&&(ne=!0,s.method=t[4],F((()=>ne=!1))),ee.$set(s);const a={};if(!ae&&16&e[0]&&(ae=!0,a.method=t[4],F((()=>ae=!1))),se.$set(a),8&e[0]|1&e[1]){let n;for(Be=t[3],n=0;n<Be.length;n+=1){const o=ft(t,Be,n);Fe[n]?Fe[n].p(o,e):(Fe[n]=$t(o),Fe[n].c(),Fe[n].m(Gt,null))}for(;n<Fe.length;n+=1)Fe[n].d(1);Fe.length=Be.length}},i(t){fe||(O(s.$$.fragment,t),O(Qt.$$.fragment,t),O(Xt.$$.fragment,t),O(ee.$$.fragment,t),O(se.$$.fragment,t),fe=!0)},o(t){j(s.$$.fragment,t),j(Qt.$$.fragment,t),j(Xt.$$.fragment,t),j(ee.$$.fragment,t),j(se.$$.fragment,t),fe=!1},d(t){t&&u(e),t&&u(n),N(s,t),t&&u(a),t&&u(i),l($e,t),t&&u(ht),t&&u(yt),t&&u(bt),t&&u(kt),l(be,t),t&&u(Kt),t&&u(Pt),t&&u(qt),t&&u(Jt),t&&u(Zt),t&&u(Gt),N(Qt),N(Xt),N(ee),N(se),l(Fe,t),t&&u(ue),t&&u(le),de=!1,o(me)}}}function bt(t,e,n){let o,s,a,r,c,u,l,f,d,m,p,g,{weapons:v,storeKey:$}=e;const y=Object.fromEntries(v.map((t=>[t.name,t]))),b=et(`${$}/atk`,700);i(t,b,(t=>n(14,g=t)));const k=et(`${$}/def`,200);i(t,k,(t=>n(13,p=t)));const x=et(`${$}/int`,700);i(t,x,(t=>n(12,m=t)));const T=et(`${$}/mdef`,200);i(t,T,(t=>n(11,d=t)));const w=et(`${$}/fireResist`,0);i(t,w,(t=>n(8,u=t)));const _=et(`${$}/waterResist`,0);i(t,_,(t=>n(7,c=t)));const C=et(`${$}/poisonResist`,0);i(t,C,(t=>n(6,r=t)));const L=et(`${$}/lightningResist`,0);i(t,L,(t=>n(5,a=t)));const R=et(`${$}/poisonTurns`,99);i(t,R,(t=>n(10,f=t)));const B=et(`${$}/passiveIds`,[]);i(t,B,(t=>n(9,l=t)));const F=et(`${$}/compareList`,v.map((t=>[t.name])));i(t,F,(t=>n(35,o=t)));const E=et(`${$}/sortMethod`,{field:null,dir:1});i(t,E,(t=>n(4,s=t)));let S=[v[0]],H={stages:[],summary:{damage:0,cost:0,cp:0}},M=[],D=[],O={};function j(t){S.splice(t,0,S[t]),n(1,S)}function W(t){S.length<=1||(S.splice(t,1),n(1,S))}function A(t,e){const o=S[t];S.splice(t,1),S.splice(t+e,0,o),n(1,S)}function I(t){o.splice(t,1),F.set(o)}const N=[[]];return t.$$set=t=>{"weapons"in t&&n(0,v=t.weapons),"storeKey"in t&&n(32,$=t.storeKey)},t.$$.update=()=>{32736&t.$$.dirty[0]&&n(34,O={atk:g,def:p,int:m,mdef:d,poisonTurns:f,passiveIds:l,fireResist:u,waterResist:c,poisonResist:r,lightningResist:a}),2&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(2,H=at({...O,weapons:S})),24&t.$$.dirty[1]&&n(33,M=o.map(((t,e)=>{const n=t.map((t=>y[t])),o=at({...O,weapons:n});return{name:t.join("+"),cost:o.summary.cost,damage:o.summary.damage,cp:o.summary.cp,index:e}}))),24&t.$$.dirty[0]|4&t.$$.dirty[1]&&(n(3,D=M.slice()),s.field&&D.sort(((t,e)=>(t[s.field]<e[s.field]?-1:t[s.field]>e[s.field]?1:0)*s.dir)))},[v,S,H,D,s,a,r,c,u,l,f,d,m,p,g,b,k,x,T,w,_,C,L,R,B,F,E,j,W,A,function(){o.push(S.map((t=>t.name))),F.set(o)},I,$,M,O,o,function(){g=h(this.value),b.set(g)},function(){p=h(this.value),k.set(p)},function(){m=h(this.value),x.set(m)},function(){d=h(this.value),T.set(d)},function(){u=h(this.value),w.set(u)},function(){c=h(this.value),_.set(c)},function(){r=h(this.value),C.set(r)},function(){a=h(this.value),L.set(a)},function(){f=h(this.value),R.set(f)},function(){l=function(t,e,n){const o=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&o.add(t[e].__value);return n||o.delete(e),Array.from(o)}(N[0],this.__value,this.checked),B.set(l)},N,function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,S),n(0,v)},t=>A(t,-1),t=>A(t,1),t=>j(t),t=>W(t),function(t){s=t,E.set(s)},function(t){s=t,E.set(s)},function(t){s=t,E.set(s)},function(t){s=t,E.set(s)},t=>I(t.index)]}const kt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int"},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str"},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]}],xt=kt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends P{constructor(t){super(),K(this,t,bt,yt,a,{weapons:0,storeKey:32},null,[-1,-1,-1])}},b:xt,w:kt}}();
//# sourceMappingURL=tome-beeba1eb.js.map
