var tomeEe121504=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function x(t,e,n){t.classList[n?"add":"remove"](e)}let b;function k(t){b=t}const w=[],T=[],_=[],C=[],L=Promise.resolve();let R=!1;function E(t){_.push(t)}function F(t){C.push(t)}const S=new Set;let H=0;function M(){const t=b;do{for(;H<w.length;){const t=w[H];H++,k(t),D(t.$$)}for(k(null),w.length=0,H=0;T.length;)T.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];S.has(e)||(S.add(e),e())}_.length=0}while(w.length);for(;C.length;)C.pop()();R=!1,S.clear(),k(t)}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const B=new Set;function O(t,e){t&&t.i&&(B.delete(t),t.i(e))}function A(t,e,n,o){if(t&&t.o){if(B.has(t))return;B.add(t),undefined.c.push((()=>{B.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function I(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function N(t){t&&t.c()}function j(t,n,a,i){const{fragment:c,on_mount:r,on_destroy:l,after_update:u}=t.$$;c&&c.m(n,a),i||E((()=>{const n=r.map(e).filter(s);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(E)}function z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(w.push(t),R||(R=!0,L.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,s,a,i,c,r,u,f=[-1]){const d=b;k(e);const m=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||d.$$.root};u&&u(m.root);let p=!1;if(m.ctx=a?a(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&W(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!i&&i(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(l)}else m.fragment&&m.fragment.c();s.intro&&O(e.$$.fragment),j(e,s.target,s.anchor,s.customElement),M()}k(d)}class P{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q(e){let n,o,s,a;return{c(){n=f("button"),o=d(e[2]),h(n,"class","svelte-19loasr"),x(n,"sorted",e[0].field===e[1]),x(n,"reversed",e[0].dir<0)},m(t,i){r(t,n,i),c(n,o),s||(a=p(n,"click",e[3]),s=!0)},p(t,[e]){4&e&&v(o,t[2]),3&e&&x(n,"sorted",t[0].field===t[1]),1&e&&x(n,"reversed",t[0].dir<0)},i:t,o:t,d(t){t&&l(n),s=!1,a()}}}function J(t,e,n){let{method:o,field:s,text:a}=e;return t.$$set=t=>{"method"in t&&n(0,o=t.method),"field"in t&&n(1,s=t.field),"text"in t&&n(2,a=t.text)},[o,s,a,function(){o.field!==s?(n(0,o.field=s,o),n(0,o.dir=1,o)):n(0,o.dir*=-1,o)}]}class Z extends P{constructor(t){super(),K(this,t,J,q,a,{method:0,field:1,text:2})}}const G=location.pathname.match(/([^/.]*)(\.html)?$/),Q=G[1]&&"index"!==G[1]?G[1]:"sword";function U(e){let n,o,s,a,i,u,d,p;return{c(){n=f("ul"),o=f("li"),o.innerHTML='<a href="." class="svelte-116mxxw">劍</a>',s=m(),a=f("li"),a.innerHTML='<a href="bow.html" class="svelte-116mxxw">弓</a>',i=m(),u=f("li"),u.innerHTML='<a href="wand.html" class="svelte-116mxxw">杖</a>',d=m(),p=f("li"),p.innerHTML='<a href="tome.html" class="svelte-116mxxw">書</a>',h(o,"class","svelte-116mxxw"),x(o,"active","sword"===Q),h(a,"class","svelte-116mxxw"),x(a,"active","bow"===Q),h(u,"class","svelte-116mxxw"),x(u,"active","wand"===Q),h(p,"class","svelte-116mxxw"),x(p,"active","tome"===Q),h(n,"class","svelte-116mxxw")},m(t,e){r(t,n,e),c(n,o),c(n,s),c(n,a),c(n,i),c(n,u),c(n,d),c(n,p)},p:t,i:t,o:t,d(t){t&&l(n)}}}class V extends P{constructor(t){super(),K(this,t,null,U,a,{})}}const X=[];const Y="zoldout-damage-calculator",tt=new Map;function et(e,n){if(tt.has(e))return tt.get(e);const o=function(e,n=t){let o;const s=new Set;function i(t){if(a(e,t)&&(e=t,o)){const t=!X.length;for(const t of s)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,c=t){const r=[a,c];return s.add(r),1===s.size&&(o=n(i)||t),a(e),()=>{s.delete(r),0===s.size&&(o(),o=null)}}}}(function(t){try{return JSON.parse(t)}catch{}}(localStorage.getItem(`${Y}/${e}`))??n);return o.subscribe((t=>localStorage.setItem(`${Y}/${e}`,JSON.stringify(t)))),tt.set(e,o),o}var nt=[{name:"傷害後攻擊增加（艾莉諾拉）",type:"bow",afterHit:t=>{t.buff.push({atk:5,times:99}),1===t.totalHit&&t.buff.push({bonus:1.21,times:99})}},{name:"使用武器後中毒（格蕾絲）",type:"bow",afterWeapon:t=>{t.hit&&t.poison.push({atk:300,turn:2,bonus:0})}},{name:"使用火武器後加速（歌莉雅）",type:"wand",afterWeapon:(t,e)=>{e.fire?.atk&&(t.cost-=2)}},{name:"額外傷害（尤里+泳裝伊蓮）",type:"wand",afterWeapon:(t,e)=>{e.water?.atk&&(t.damage+=2*(900-t.getDef({atkType:"magic"})))}}];const ot={F:.85,E0:1,E:1.1,D:1.35,C:1.6,B:1.85,A:2.1,S:2.35,SS:2.6,SSS:2.85};class st{constructor({atk:t,def:e,int:n,mdef:o,fireResist:s,waterResist:a,poisonResist:i,lightningResist:c,poisonTurns:r,passive:l}){this.atk=t,this.def=e,this.int=n,this.mdef=o,this.fireResist=s,this.waterResist=a,this.poisonResist=i,this.lightningResist=c,this.poisonTurns=r,this.passive=l,this.damage=0,this.hit=0,this.totalHit=0,this.stance=0,this.totalHit=0,this.buff=[],this.targetBuff=[],this.poison=[],this.lightning={}}getDef(t){return it(this,t)}}function at({weapons:t,passiveIds:e,...n}){const o=nt.filter(((t,n)=>e.includes(n))),s=[],a=new st({...n,passive:o});for(const e of t){const t=ut(a,e);s.push(t)}const i=s.reduce(((t,e)=>t+e.damage),0),c=s.reduce(((t,e)=>t+e.cost),0);return{stages:s,summary:{damage:i,cost:c,cp:i/c}}}function it({def:t,mdef:e,targetBuff:n},{atkType:o}){return"heal"===o?0:"magic"===o?e+n.reduce(((t,e)=>t+(e.mdef||0)),0):t+n.reduce(((t,e)=>t+(e.def||0)),0)}function ct({atk:t,int:e,buff:n},{modType:o,modLv:s,atk:a=0,bonus:i=0}){const c="int"===o?e+n.reduce(((t,e)=>t+(e.int||0)),0):t+n.reduce(((t,e)=>t+(e.atk||0)),0);return(a+(s?c*ot[s]:0))*(i+100)/100*n.reduce(((t,e)=>t*(e.bonus?(e.bonus+100)/100:1)),1)}function rt({poison:t,poisonTurns:e,poisonResist:n}){let o=0;for(const s of t)o+=s.atk*Math.min(s.turn,e)/s.turn*(100-n)/100;return o}function lt(t,e,n){t.passive.forEach((o=>o[n]?.(t,e)))}function ut(t,e){const n=rt(t);t.cost=e.casting||e.cost,t.hit=e.hit||(e.atk||e.modLv?1:0),t.damage=0;const o=it(t,e);for(let n=0;n<t.hit;n++){t.currentHit=n+1,t.totalHit++;let s=ct(t,e);e.stance?.use===t.stance&&(s*=((e.stance.bonus||0)+100)/100),t.damage+=Math.max(s-o,1),t.lightning?.atk&&(t.damage+=t.lightning.atk*(100-t.lightningResist)/100),lt(t,e,"afterHit")}return t.hit&&(t.buff=t.buff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0)),t.targetBuff=t.targetBuff.map((t=>({...t,times:t.times-1}))).filter((t=>t.times>0))),e.trap&&(t.damage+=Math.max(e.trap.atk-o,1)),e.fire?.atk&&(t.damage+=e.fire.atk*(100-t.fireResist)/100),e.water?.atk&&(t.damage+=e.water.atk*(100-t.waterResist)/100),e.lightning?.atk&&(t.damage+=e.lightning.atk*(100-t.lightningResist)/100,(!t.lightning?.atk||e.lightning.time>t.lightning.time)&&(t.lightning=e.lightning)),e.poison?.atk&&t.poison.push({atk:e.poison.atk,turn:e.poison.turn,bonus:0}),e.poison?.bonus&&(t.poison=t.poison.map((t=>{const n=(t.bonus+100)*(e.poison.bonus+100)/100-100;return{...t,bonus:Math.min(n,200)}}))),e.buff&&t.buff.push(...e.buff),e.targetBuff&&t.targetBuff.push(...e.targetBuff),e?.stance?.use===t.stance&&e.stance.buff&&t.buff.push(...e.stance.buff),null!=e?.stance?.gain&&(t.stance=e.stance.gain),lt(t,e,"afterWeapon"),t.damage+=rt(t)-n,{damage:t.damage,cost:t.cost}}function ft(t,e,n){const o=t.slice();return o[58]=e[n],o}function dt(t,e,n){const o=t.slice();return o[61]=e[n],o[62]=e,o[63]=n,o}function mt(t,e,n){const o=t.slice();return o[64]=e[n],o}function pt(t,e,n){const o=t.slice();return o[67]=e[n],o[63]=n,o}function ht(t){let e,n=Q===t[67].type&&function(t){let e,n,o,s,a,i,u,g,v=t[67].name+"";return{c(){e=f("label"),n=f("input"),o=m(),s=f("span"),a=d(v),i=m(),h(n,"type","checkbox"),n.__value=t[63],n.value=n.__value,t[46][0].push(n),h(e,"class","cspan svelte-127o0eo")},m(l,f){r(l,e,f),c(e,n),n.checked=~t[9].indexOf(n.__value),c(e,o),c(e,s),c(s,a),c(e,i),u||(g=p(n,"change",t[45]),u=!0)},p(t,e){512&e[0]&&(n.checked=~t[9].indexOf(n.__value))},d(o){o&&l(e),t[46][0].splice(t[46][0].indexOf(n),1),u=!1,g()}}}(t);return{c(){n&&n.c(),e=d("")},m(t,o){n&&n.m(t,o),r(t,e,o)},p(t,e){Q===t[67].type&&n.p(t,e)},d(t){n&&n.d(t),t&&l(e)}}}function gt(t){let e,n,o,s=t[64].name+"";return{c(){e=f("option"),n=d(s),e.__value=o=t[64],e.value=e.__value},m(t,o){r(t,e,o),c(e,n)},p(t,a){1&a[0]&&s!==(s=t[64].name+"")&&v(n,s),1&a[0]&&o!==(o=t[64])&&(e.__value=o,e.value=e.__value)},d(t){t&&l(e)}}}function vt(t){let e,n,s,a,i,g,$,x,b,k,w,T,_,C,L,R,F,S,H,M,D,B=t[2].stages[t[63]]?.cost+"",O=t[2].stages[t[63]]?.damage.toFixed(0)+"",A=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"",I=t[0],N=[];for(let e=0;e<I.length;e+=1)N[e]=gt(mt(t,I,e));function j(){t[47].call(e,t[62],t[63])}function z(){return t[48](t[63])}function W(){return t[49](t[63])}function K(){return t[50](t[63])}function P(){return t[51](t[63])}return{c(){e=f("select");for(let t=0;t<N.length;t+=1)N[t].c();n=m(),s=f("span"),a=d(B),i=m(),g=f("span"),$=d(O),x=m(),b=f("span"),k=d(A),w=m(),T=f("div"),_=f("button"),_.textContent="↑",C=m(),L=f("button"),L.textContent="↓",R=m(),F=f("button"),F.textContent="⎘",S=m(),H=f("button"),H.textContent="x",h(e,"class","svelte-127o0eo"),void 0===t[61]&&E(j),h(s,"class","svelte-127o0eo"),h(g,"class","svelte-127o0eo"),h(b,"class","svelte-127o0eo"),h(T,"class","operation svelte-127o0eo")},m(o,l){r(o,e,l);for(let t=0;t<N.length;t+=1)N[t].m(e,null);y(e,t[61]),r(o,n,l),r(o,s,l),c(s,a),r(o,i,l),r(o,g,l),c(g,$),r(o,x,l),r(o,b,l),c(b,k),r(o,w,l),r(o,T,l),c(T,_),c(T,C),c(T,L),c(T,R),c(T,F),c(T,S),c(T,H),M||(D=[p(e,"change",j),p(_,"click",z),p(L,"click",W),p(F,"click",K),p(H,"click",P)],M=!0)},p(n,o){if(t=n,1&o[0]){let n;for(I=t[0],n=0;n<I.length;n+=1){const s=mt(t,I,n);N[n]?N[n].p(s,o):(N[n]=gt(s),N[n].c(),N[n].m(e,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=I.length}3&o[0]&&y(e,t[61]),4&o[0]&&B!==(B=t[2].stages[t[63]]?.cost+"")&&v(a,B),4&o[0]&&O!==(O=t[2].stages[t[63]]?.damage.toFixed(0)+"")&&v($,O),4&o[0]&&A!==(A=((t[2].stages[t[63]]?.damage||0)/t[2].stages[t[63]]?.cost).toFixed(0)+"")&&v(k,A)},d(t){t&&l(e),u(N,t),t&&l(n),t&&l(s),t&&l(i),t&&l(g),t&&l(x),t&&l(b),t&&l(w),t&&l(T),M=!1,o(D)}}}function $t(t){let e,n,o,s,a,i,u,g,$,y,x,b,k,w,T,_=t[58].name+"",C=t[58].cost+"",L=t[58].damage.toFixed(0)+"",R=t[58].cp.toFixed(0)+"";function E(){return t[56](t[58])}return{c(){e=f("span"),n=d(_),o=m(),s=f("span"),a=d(C),i=m(),u=f("span"),g=d(L),$=m(),y=f("span"),x=d(R),b=m(),k=f("button"),k.textContent="x",h(e,"class","svelte-127o0eo"),h(s,"class","svelte-127o0eo"),h(u,"class","svelte-127o0eo"),h(y,"class","svelte-127o0eo"),h(k,"class","svelte-127o0eo")},m(t,l){r(t,e,l),c(e,n),r(t,o,l),r(t,s,l),c(s,a),r(t,i,l),r(t,u,l),c(u,g),r(t,$,l),r(t,y,l),c(y,x),r(t,b,l),r(t,k,l),w||(T=p(k,"click",E),w=!0)},p(e,o){t=e,8&o[0]&&_!==(_=t[58].name+"")&&v(n,_),8&o[0]&&C!==(C=t[58].cost+"")&&v(a,C),8&o[0]&&L!==(L=t[58].damage.toFixed(0)+"")&&v(g,L),8&o[0]&&R!==(R=t[58].cp.toFixed(0)+"")&&v(x,R)},d(t){t&&l(e),t&&l(o),t&&l(s),t&&l(i),t&&l(u),t&&l($),t&&l(y),t&&l(b),t&&l(k),w=!1,T()}}}function yt(t){let e,n,s,a,i,y,x,b,k,w,_,C,L,R,E,S,H,M,D,B,W,K,P,q,J,G,Q,U,X,Y,tt,et,ot,st,at,it,ct,rt,lt,ut,mt,gt,yt,xt,bt,kt,wt,Tt,_t,Ct,Lt,Rt,Et,Ft,St,Ht,Mt,Dt,Bt,Ot,At,It,Nt,jt,zt,Wt,Kt,Pt,qt,Jt,Zt,Gt,Qt,Ut,Vt,Xt,Yt,te,ee,ne,oe,se,ae,ie,ce,re,le,ue,fe,de,me,pe=t[2].summary.cost+"",he=t[2].summary.damage.toFixed(0)+"",ge=t[2].summary.cp.toFixed(0)+"";s=new V({});let ve=nt,$e=[];for(let e=0;e<ve.length;e+=1)$e[e]=ht(pt(t,ve,e));let ye=t[1],xe=[];for(let e=0;e<ye.length;e+=1)xe[e]=vt(dt(t,ye,e));function be(e){t[52](e)}let ke={field:"name",text:"Name"};function we(e){t[53](e)}void 0!==t[4]&&(ke.method=t[4]),Qt=new Z({props:ke}),T.push((()=>I(Qt,"method",be)));let Te={field:"cost",text:"Cost"};function _e(e){t[54](e)}void 0!==t[4]&&(Te.method=t[4]),Xt=new Z({props:Te}),T.push((()=>I(Xt,"method",we)));let Ce={field:"damage",text:"Damage"};function Le(e){t[55](e)}void 0!==t[4]&&(Ce.method=t[4]),ee=new Z({props:Ce}),T.push((()=>I(ee,"method",_e)));let Re={field:"cp",text:"CP"};void 0!==t[4]&&(Re.method=t[4]),se=new Z({props:Re}),T.push((()=>I(se,"method",Le)));let Ee=t[3],Fe=[];for(let e=0;e<Ee.length;e+=1)Fe[e]=$t(ft(t,Ee,e));return{c(){e=f("h1"),e.textContent="Zold:Out Damage Calculator",n=m(),N(s.$$.fragment),a=m(),i=f("div"),y=f("span"),y.textContent="力量",x=m(),b=f("input"),k=m(),w=f("span"),w.textContent="防禦",_=m(),C=f("input"),L=m(),R=f("span"),R.textContent="智力",E=m(),S=f("input"),H=m(),M=f("span"),M.textContent="魔防",D=m(),B=f("input"),W=m(),K=f("span"),K.textContent="火抗",P=m(),q=f("input"),J=m(),G=f("span"),G.textContent="水抗",Q=m(),U=f("input"),X=m(),Y=f("span"),Y.textContent="毒抗",tt=m(),et=f("input"),ot=m(),st=f("span"),st.textContent="雷抗",at=m(),it=f("input"),ct=m(),rt=f("span"),rt.textContent="中毒發生次數",lt=m(),ut=f("input"),mt=m();for(let t=0;t<$e.length;t+=1)$e[t].c();gt=m(),yt=f("h2"),yt.textContent="Combo",xt=m(),bt=f("div"),kt=f("span"),kt.textContent="Weapon",wt=m(),Tt=f("span"),Tt.textContent="Cost",_t=m(),Ct=f("span"),Ct.textContent="Damage",Lt=m(),Rt=f("span"),Rt.textContent="CP",Et=m(),Ft=f("span"),St=m();for(let t=0;t<xe.length;t+=1)xe[t].c();Ht=m(),Mt=f("span"),Mt.textContent="Summary",Dt=m(),Bt=f("span"),Ot=d(pe),At=m(),It=f("span"),Nt=d(he),jt=m(),zt=f("span"),Wt=d(ge),Kt=m(),Pt=f("button"),Pt.textContent="Add to compare list",qt=m(),Jt=f("h2"),Jt.textContent="Compare",Zt=m(),Gt=f("div"),N(Qt.$$.fragment),Vt=m(),N(Xt.$$.fragment),te=m(),N(ee.$$.fragment),oe=m(),N(se.$$.fragment),ie=m(),ce=f("span"),re=m();for(let t=0;t<Fe.length;t+=1)Fe[t].c();le=m(),ue=f("footer"),ue.innerHTML='<a href="https://github.com/eight04/zoldout-damage-calculator">zoldout-damage-calculator</a>',h(b,"type","number"),h(C,"type","number"),h(S,"type","number"),h(B,"type","number"),h(q,"type","number"),h(U,"type","number"),h(et,"type","number"),h(it,"type","number"),h(ut,"type","number"),h(i,"class","base-info svelte-127o0eo"),h(kt,"class","chead svelte-127o0eo"),h(Tt,"class","chead svelte-127o0eo"),h(Ct,"class","chead svelte-127o0eo"),h(Rt,"class","chead svelte-127o0eo"),h(Ft,"class","operation svelte-127o0eo"),h(Mt,"class","chead svelte-127o0eo"),h(Bt,"class","svelte-127o0eo"),h(It,"class","svelte-127o0eo"),h(zt,"class","svelte-127o0eo"),h(bt,"class","combo-table svelte-127o0eo"),h(ce,"class","svelte-127o0eo"),h(Gt,"class","compare-list svelte-127o0eo"),h(ue,"class","svelte-127o0eo")},m(o,l){r(o,e,l),r(o,n,l),j(s,o,l),r(o,a,l),r(o,i,l),c(i,y),c(i,x),c(i,b),$(b,t[14]),c(i,k),c(i,w),c(i,_),c(i,C),$(C,t[13]),c(i,L),c(i,R),c(i,E),c(i,S),$(S,t[12]),c(i,H),c(i,M),c(i,D),c(i,B),$(B,t[11]),c(i,W),c(i,K),c(i,P),c(i,q),$(q,t[8]),c(i,J),c(i,G),c(i,Q),c(i,U),$(U,t[7]),c(i,X),c(i,Y),c(i,tt),c(i,et),$(et,t[6]),c(i,ot),c(i,st),c(i,at),c(i,it),$(it,t[5]),c(i,ct),c(i,rt),c(i,lt),c(i,ut),$(ut,t[10]),c(i,mt);for(let t=0;t<$e.length;t+=1)$e[t].m(i,null);r(o,gt,l),r(o,yt,l),r(o,xt,l),r(o,bt,l),c(bt,kt),c(bt,wt),c(bt,Tt),c(bt,_t),c(bt,Ct),c(bt,Lt),c(bt,Rt),c(bt,Et),c(bt,Ft),c(bt,St);for(let t=0;t<xe.length;t+=1)xe[t].m(bt,null);c(bt,Ht),c(bt,Mt),c(bt,Dt),c(bt,Bt),c(Bt,Ot),c(bt,At),c(bt,It),c(It,Nt),c(bt,jt),c(bt,zt),c(zt,Wt),r(o,Kt,l),r(o,Pt,l),r(o,qt,l),r(o,Jt,l),r(o,Zt,l),r(o,Gt,l),j(Qt,Gt,null),c(Gt,Vt),j(Xt,Gt,null),c(Gt,te),j(ee,Gt,null),c(Gt,oe),j(se,Gt,null),c(Gt,ie),c(Gt,ce),c(Gt,re);for(let t=0;t<Fe.length;t+=1)Fe[t].m(Gt,null);r(o,le,l),r(o,ue,l),fe=!0,de||(me=[p(b,"input",t[36]),p(C,"input",t[37]),p(S,"input",t[38]),p(B,"input",t[39]),p(q,"input",t[40]),p(U,"input",t[41]),p(et,"input",t[42]),p(it,"input",t[43]),p(ut,"input",t[44]),p(Pt,"click",t[30])],de=!0)},p(t,e){if(16384&e[0]&&g(b.value)!==t[14]&&$(b,t[14]),8192&e[0]&&g(C.value)!==t[13]&&$(C,t[13]),4096&e[0]&&g(S.value)!==t[12]&&$(S,t[12]),2048&e[0]&&g(B.value)!==t[11]&&$(B,t[11]),256&e[0]&&g(q.value)!==t[8]&&$(q,t[8]),128&e[0]&&g(U.value)!==t[7]&&$(U,t[7]),64&e[0]&&g(et.value)!==t[6]&&$(et,t[6]),32&e[0]&&g(it.value)!==t[5]&&$(it,t[5]),1024&e[0]&&g(ut.value)!==t[10]&&$(ut,t[10]),512&e[0]){let n;for(ve=nt,n=0;n<ve.length;n+=1){const o=pt(t,ve,n);$e[n]?$e[n].p(o,e):($e[n]=ht(o),$e[n].c(),$e[n].m(i,null))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=ve.length}if(939524103&e[0]){let n;for(ye=t[1],n=0;n<ye.length;n+=1){const o=dt(t,ye,n);xe[n]?xe[n].p(o,e):(xe[n]=vt(o),xe[n].c(),xe[n].m(bt,Ht))}for(;n<xe.length;n+=1)xe[n].d(1);xe.length=ye.length}(!fe||4&e[0])&&pe!==(pe=t[2].summary.cost+"")&&v(Ot,pe),(!fe||4&e[0])&&he!==(he=t[2].summary.damage.toFixed(0)+"")&&v(Nt,he),(!fe||4&e[0])&&ge!==(ge=t[2].summary.cp.toFixed(0)+"")&&v(Wt,ge);const n={};!Ut&&16&e[0]&&(Ut=!0,n.method=t[4],F((()=>Ut=!1))),Qt.$set(n);const o={};!Yt&&16&e[0]&&(Yt=!0,o.method=t[4],F((()=>Yt=!1))),Xt.$set(o);const s={};!ne&&16&e[0]&&(ne=!0,s.method=t[4],F((()=>ne=!1))),ee.$set(s);const a={};if(!ae&&16&e[0]&&(ae=!0,a.method=t[4],F((()=>ae=!1))),se.$set(a),8&e[0]|1&e[1]){let n;for(Ee=t[3],n=0;n<Ee.length;n+=1){const o=ft(t,Ee,n);Fe[n]?Fe[n].p(o,e):(Fe[n]=$t(o),Fe[n].c(),Fe[n].m(Gt,null))}for(;n<Fe.length;n+=1)Fe[n].d(1);Fe.length=Ee.length}},i(t){fe||(O(s.$$.fragment,t),O(Qt.$$.fragment,t),O(Xt.$$.fragment,t),O(ee.$$.fragment,t),O(se.$$.fragment,t),fe=!0)},o(t){A(s.$$.fragment,t),A(Qt.$$.fragment,t),A(Xt.$$.fragment,t),A(ee.$$.fragment,t),A(se.$$.fragment,t),fe=!1},d(t){t&&l(e),t&&l(n),z(s,t),t&&l(a),t&&l(i),u($e,t),t&&l(gt),t&&l(yt),t&&l(xt),t&&l(bt),u(xe,t),t&&l(Kt),t&&l(Pt),t&&l(qt),t&&l(Jt),t&&l(Zt),t&&l(Gt),z(Qt),z(Xt),z(ee),z(se),u(Fe,t),t&&l(le),t&&l(ue),de=!1,o(me)}}}function xt(t,e,n){let o,s,a,c,r,l,u,f,d,m,p,h,{weapons:v,storeKey:$}=e;const y=Object.fromEntries(v.map((t=>[t.name,t]))),x=et(`${$}/atk`,700);i(t,x,(t=>n(14,h=t)));const b=et(`${$}/def`,200);i(t,b,(t=>n(13,p=t)));const k=et(`${$}/int`,700);i(t,k,(t=>n(12,m=t)));const w=et(`${$}/mdef`,200);i(t,w,(t=>n(11,d=t)));const T=et(`${$}/fireResist`,0);i(t,T,(t=>n(8,l=t)));const _=et(`${$}/waterResist`,0);i(t,_,(t=>n(7,r=t)));const C=et(`${$}/poisonResist`,0);i(t,C,(t=>n(6,c=t)));const L=et(`${$}/lightningResist`,0);i(t,L,(t=>n(5,a=t)));const R=et(`${$}/poisonTurns`,99);i(t,R,(t=>n(10,f=t)));const E=et(`${$}/passiveIds`,[]);i(t,E,(t=>n(9,u=t)));const F=et(`${$}/compareList`,v.map((t=>[t.name])));i(t,F,(t=>n(35,o=t)));const S=et(`${$}/sortMethod`,{field:null,dir:1});i(t,S,(t=>n(4,s=t)));let H=[v[0]],M={stages:[],summary:{damage:0,cost:0,cp:0}},D=[],B=[],O={};function A(t){H.splice(t,0,H[t]),n(1,H)}function I(t){H.length<=1||(H.splice(t,1),n(1,H))}function N(t,e){const o=H[t];H.splice(t,1),H.splice(t+e,0,o),n(1,H)}function j(t){o.splice(t,1),F.set(o)}const z=[[]];return t.$$set=t=>{"weapons"in t&&n(0,v=t.weapons),"storeKey"in t&&n(32,$=t.storeKey)},t.$$.update=()=>{32736&t.$$.dirty[0]&&n(34,O={atk:h,def:p,int:m,mdef:d,poisonTurns:f,passiveIds:u,fireResist:l,waterResist:r,poisonResist:c,lightningResist:a}),2&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(2,M=at({...O,weapons:H})),24&t.$$.dirty[1]&&n(33,D=o.map(((t,e)=>{const n=t.map((t=>y[t])),o=at({...O,weapons:n});return{name:t.join("+"),cost:o.summary.cost,damage:o.summary.damage,cp:o.summary.cp,index:e}}))),24&t.$$.dirty[0]|4&t.$$.dirty[1]&&(n(3,B=D.slice()),s.field&&B.sort(((t,e)=>(t[s.field]<e[s.field]?-1:t[s.field]>e[s.field]?1:0)*s.dir)))},[v,H,M,B,s,a,c,r,l,u,f,d,m,p,h,x,b,k,w,T,_,C,L,R,E,F,S,A,I,N,function(){o.push(H.map((t=>t.name))),F.set(o)},j,$,D,O,o,function(){h=g(this.value),x.set(h)},function(){p=g(this.value),b.set(p)},function(){m=g(this.value),k.set(m)},function(){d=g(this.value),w.set(d)},function(){l=g(this.value),T.set(l)},function(){r=g(this.value),_.set(r)},function(){c=g(this.value),C.set(c)},function(){a=g(this.value),L.set(a)},function(){f=g(this.value),R.set(f)},function(){u=function(t,e,n){const o=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&o.add(t[e].__value);return n||o.delete(e),Array.from(o)}(z[0],this.__value,this.checked),E.set(u)},z,function(t,e){t[e]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,H),n(0,v)},t=>N(t,-1),t=>N(t,1),t=>A(t),t=>I(t),function(t){s=t,S.set(s)},function(t){s=t,S.set(s)},function(t){s=t,S.set(s)},function(t){s=t,S.set(s)},t=>j(t.index)]}const bt=[{name:"閃耀之書",cost:4,grade:1,atk:230,atkType:"magic",modLv:"E",modType:"str"},{name:"憤怒之書",cost:2,grade:1,buff:[{bonus:15,times:1}]},{name:"大回復之書",cost:7,grade:1,atk:180,atkType:"heal",modLv:"D",modType:"int"},{name:"淨化之書",cost:3,grade:1,atk:30,atkType:"heal",modLv:"F",modType:"int"},{name:"燃燒之書",cost:4,grade:1,atk:150,atkType:"magic",modLv:"F",modType:"str",fire:{atk:220,time:4}},{name:"加速之書",cost:3,grade:1,atk:110,atkType:"heal",modLv:"F",modType:"int"},{name:"快速回復之書",cost:4,grade:2,atk:200,atkType:"heal",modLv:"D",modType:"int"},{name:"觸電之書",cost:3,grade:1,atk:50,atkType:"magic",modLv:"E",modType:"str",lightning:{atk:50,time:6}},{name:"聖光之書",cost:4,grade:2,atk:230,atkType:"magic",modLv:"D",modType:"str"},{name:"智慧之書",cost:4,grade:2,buff:[{int:200,times:99}]},{name:"高階回復之書",cost:7,grade:2,atk:100,atkType:"heal",modLv:"C",modType:"int"},{name:"自由火蝶",cost:4,grade:4,fire:{atk:720,time:4}},{name:"清淨如水",cost:6,grade:3,atk:155,atkType:"heal",modLv:"F",modType:"int"},{name:"雷電蜂",cost:4,grade:3,atk:100,atkType:"magic",modLv:"D",modType:"str",lightning:{atk:145,time:10}},{name:"猛炎之書",cost:5,grade:2,atk:330,atkType:"magic",modLv:"E",modType:"str",fire:{atk:480,time:4}},{name:"海魔獸歷史",cost:4,grade:3,atk:100,atkType:"heal",modLv:"E",modType:"int"},{name:"火焰之加護",cost:4,grade:4,atk:20,atkType:"heal",modLv:"D",modType:"int"},{name:"神怒之書",cost:4,grade:3,buff:[{bonus:35,times:1}]},{name:"刨冰食用指南",cost:4,grade:4,water:{modLv:"C",modType:"int",time:2}},{name:"深紅的日記",cost:5,grade:3,atk:250,atkType:"magic",modLv:"E",modType:"str"},{name:"生命滿溢",cost:3,grade:4,atk:300,atkType:"heal",modLv:"C",modType:"int"},{name:"聖火護盾",cost:7,grade:4,atk:82,atkType:"heal",modLv:"B",modType:"int"},{name:"結晶智慧",cost:4,grade:2,buff:[{int:400,times:99}]}],kt=bt.filter((t=>t.buff&&!t.modLv&&!t.atk));return{A:class extends P{constructor(t){super(),K(this,t,xt,yt,a,{weapons:0,storeKey:32},null,[-1,-1,-1])}},b:kt,w:bt}}();
//# sourceMappingURL=tome-ee121504.js.map
