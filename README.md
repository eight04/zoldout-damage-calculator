Zold:Out Damage Calculator
==========================

[![test](https://github.com/eight04/zoldout-damage-calculator/actions/workflows/test.yml/badge.svg)](https://github.com/eight04/zoldout-damage-calculator/actions/workflows/test.yml)

武器、架勢傷害計算機

https://eight04.github.io/zoldout-damage-calculator/

傷害公式
--------

### 武器傷害

```
傷害 = ((面板攻擊力 * 武器加乘 + 武器攻擊力) * 傷害增加 * 攻擊力增加 * 架勢增傷 - 防禦力) * 被傷害增加
```

* 面板攻擊力 - 角色的力量/智力，包括覺醒、buff，會直接反映在面板上的數值
* 武器加乘 - https://forum.gamer.com.tw/C.php?bsn=32534&snA=125
* 武器攻擊力 - 武器的基本攻擊力
* 傷害增加 - 例︰憤怒之書。有時遊戲內的說明會寫成攻擊力增加。
* 攻擊力增加 - 例︰斯莉婭的專武
* 架勢增傷 - 1~3架勢發動時獲得的增傷
* 被傷害增加 - 例︰歌莉雅技能，著火時被傷害增加

### 陷阱傷害

```
傷害 = 陷阱攻擊力 - 防禦力
```

### 元素傷害

```
傷害 = 元素攻擊力 * 元素抗性 * 元素增傷
```

* 元素抗性 - `(100 - 抗性) / 100`。抗性若是負數，則傷害增加。抗性超過 100，會幫敵人補血。

### 中毒強化

* 根據說明，強化最多至原本傷害的3倍。
* 強化直接相乘。例︰120 毒傷，引蜂毒素2次，會變 120 * 1.35 * 1.35 = 218.7 毒傷。

### 觸電

* 無法疊加。時刻低的會被覆蓋。
* 觸電當下會受到一次雷傷。觸電後受擊會受到一次雷傷。
* 麗莎的被動技能配合連射弓，發生1次雷傷。
* 艾麗諾拉的專武，發生2次雷傷。
* 雷電書，發生1次雷傷。

其它公式
--------

### 活動加成

```
當期活動角加成 = 20 + (等級 / 5) + (奧義等級 + 特性1等級 + 特性2等級 + 覺醒等級 + 防守技等級) * 2

非當期活動角加成 = 當期活動角加成 / 4
```

* 實際加成數值似乎總是比算出來的數字多1

### 夏洛蒂奧義充能

```
// Lv.2
充能 = 造成傷害 * 0.004482

// Lv.3
充能 = 造成傷害 * 0.005119

// Lv.4
0.005929

// Lv.5
0.006742
```

* 浮動有點大，有其它變數嗎？

### 發牌機制

1. 起手牌數固定。

   - 兩職︰5張
   - 三職︰6張
   - 四職︰7張

2. 起手牌組固定。

   - 1+3: 2+3
   - 2+2: 2+3
   - 1+1+2: 1+2+3, 2+2+2
   - 1+1+1+1: 1+1+2+3, 1+2+2+2, 不知道會不會出1+1+1+4

2. 每職各有一堆牌，用完時會重置整堆，不會考慮手牌。如果手上有一張亞空間杖，重置後堆裡還是會有一張亞空間杖，也就是說可以存兩張以上的亞空間杖在手上。

3. 使用武器後抽牌，會抽出下個角色職業的牌。除非下個角色的牌太多，或其它角色的牌太少，抽到其它職的機率會越來越高。下面列出不同組隊情況下，最多可以堆出幾張同職業的牌︰

   - 1+3: 4/5
   - 2+2: 4
   - 1+1+2: 5
   - 1+1+1+1: 6
   
   像火法這種可以1SP連續行動的角色，就可以連續地丟杖 -> 抽出杖。  
   一些圖，劍法法法︰  
   https://i.imgur.com/jlYdABZ.png  
   https://i.imgur.com/dnUAnf3.png  
   法書劍劍︰  
   https://i.imgur.com/ghAGVhx.png  
   劍弓書法︰  
   https://i.imgur.com/IwrvDDl.png  

1. 棄牌後抽牌就更複雜，有棄牌前先用牌的情況，與棄兩張以上的情況，都沒有測試︰

   - 1+3: 自己和下個角色同個職業，會傾向於洗出1+4。自己和下角不同職，傾向洗出2+3
   - 2+2: 傾向洗出2+3，誰2誰3隨機。自己和下角同職，有機率洗出1+4。
   - 1+1+2: 比較隨機？
   - 1+1+1+1: 也是比較隨機？
   
   跟使用武器後抽牌相比，下個角色職業佔的權重變低，比較傾向於平衡所有職業。雖然牌少的職業比較容易抽出來，但統計起來大約也只有50%左右，還是會抽到其它職。
   
   對於三職以上的隊伍，個人覺得只有在某職完全沒有武器時，棄牌才比較能預測/利用。例如這回合跟下回合都是劍角，這回合把劍都用光，再多棄一張，就可以多洗出一張劍給下一人用。
   
1. 像魔法少女那種可以用兩種武器的角色，就不知道怎麼算，畢竟我沒有。

Todos
-----

* 技能的傷害增加會跟架勢疊嗎？例︰巴倫

Trivia
------

* 遊戲內的計算，遇到小數點就直接捨去，所以實際傷害會比算出來的低少許。

